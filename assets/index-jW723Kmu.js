(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function lg(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Zu={exports:{}},Xo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function Fv(){if(rp)return Xo;rp=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,r,u){var m=null;if(u!==void 0&&(m=""+u),r.key!==void 0&&(m=""+r.key),"key"in r){u={};for(var g in r)g!=="key"&&(u[g]=r[g])}else u=r;return r=u.ref,{$$typeof:l,type:a,key:m,ref:r!==void 0?r:null,props:u}}return Xo.Fragment=t,Xo.jsx=n,Xo.jsxs=n,Xo}var sp;function Yv(){return sp||(sp=1,Zu.exports=Fv()),Zu.exports}var T=Yv(),Ku={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function Zv(){if(up)return He;up=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=E&&I[E]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,L={};function N(I,j,K){this.props=I,this.context=j,this.refs=L,this.updater=K||b}N.prototype.isReactComponent={},N.prototype.setState=function(I,j){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,j,"setState")},N.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function A(){}A.prototype=N.prototype;function P(I,j,K){this.props=I,this.context=j,this.refs=L,this.updater=K||b}var k=P.prototype=new A;k.constructor=P,R(k,N.prototype),k.isPureReactComponent=!0;var w=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function W(I,j,K,le,fe,ee){return K=ee.ref,{$$typeof:l,type:I,key:j,ref:K!==void 0?K:null,props:ee}}function ne(I,j){return W(I.type,j,void 0,void 0,void 0,I.props)}function B(I){return typeof I=="object"&&I!==null&&I.$$typeof===l}function ce(I){var j={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(K){return j[K]})}var ie=/\/+/g;function Z(I,j){return typeof I=="object"&&I!==null&&I.key!=null?ce(""+I.key):j.toString(36)}function de(){}function se(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(de,de):(I.status="pending",I.then(function(j){I.status==="pending"&&(I.status="fulfilled",I.value=j)},function(j){I.status==="pending"&&(I.status="rejected",I.reason=j)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function ue(I,j,K,le,fe){var ee=typeof I;(ee==="undefined"||ee==="boolean")&&(I=null);var J=!1;if(I===null)J=!0;else switch(ee){case"bigint":case"string":case"number":J=!0;break;case"object":switch(I.$$typeof){case l:case t:J=!0;break;case v:return J=I._init,ue(J(I._payload),j,K,le,fe)}}if(J)return fe=fe(I),J=le===""?"."+Z(I,0):le,w(fe)?(K="",J!=null&&(K=J.replace(ie,"$&/")+"/"),ue(fe,j,K,"",function(F){return F})):fe!=null&&(B(fe)&&(fe=ne(fe,K+(fe.key==null||I&&I.key===fe.key?"":(""+fe.key).replace(ie,"$&/")+"/")+J)),j.push(fe)),1;J=0;var ae=le===""?".":le+":";if(w(I))for(var ge=0;ge<I.length;ge++)le=I[ge],ee=ae+Z(le,ge),J+=ue(le,j,K,ee,fe);else if(ge=x(I),typeof ge=="function")for(I=ge.call(I),ge=0;!(le=I.next()).done;)le=le.value,ee=ae+Z(le,ge++),J+=ue(le,j,K,ee,fe);else if(ee==="object"){if(typeof I.then=="function")return ue(se(I),j,K,le,fe);throw j=String(I),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return J}function O(I,j,K){if(I==null)return I;var le=[],fe=0;return ue(I,le,"","",function(ee){return j.call(K,ee,fe++)}),le}function Q(I){if(I._status===-1){var j=I._result;j=j(),j.then(function(K){(I._status===0||I._status===-1)&&(I._status=1,I._result=K)},function(K){(I._status===0||I._status===-1)&&(I._status=2,I._result=K)}),I._status===-1&&(I._status=0,I._result=j)}if(I._status===1)return I._result.default;throw I._result}var Y=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function he(){}return He.Children={map:O,forEach:function(I,j,K){O(I,function(){j.apply(this,arguments)},K)},count:function(I){var j=0;return O(I,function(){j++}),j},toArray:function(I){return O(I,function(j){return j})||[]},only:function(I){if(!B(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},He.Component=N,He.Fragment=n,He.Profiler=r,He.PureComponent=P,He.StrictMode=a,He.Suspense=y,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,He.__COMPILER_RUNTIME={__proto__:null,c:function(I){return D.H.useMemoCache(I)}},He.cache=function(I){return function(){return I.apply(null,arguments)}},He.cloneElement=function(I,j,K){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=R({},I.props),fe=I.key,ee=void 0;if(j!=null)for(J in j.ref!==void 0&&(ee=void 0),j.key!==void 0&&(fe=""+j.key),j)!X.call(j,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&j.ref===void 0||(le[J]=j[J]);var J=arguments.length-2;if(J===1)le.children=K;else if(1<J){for(var ae=Array(J),ge=0;ge<J;ge++)ae[ge]=arguments[ge+2];le.children=ae}return W(I.type,fe,void 0,void 0,ee,le)},He.createContext=function(I){return I={$$typeof:m,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:u,_context:I},I},He.createElement=function(I,j,K){var le,fe={},ee=null;if(j!=null)for(le in j.key!==void 0&&(ee=""+j.key),j)X.call(j,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(fe[le]=j[le]);var J=arguments.length-2;if(J===1)fe.children=K;else if(1<J){for(var ae=Array(J),ge=0;ge<J;ge++)ae[ge]=arguments[ge+2];fe.children=ae}if(I&&I.defaultProps)for(le in J=I.defaultProps,J)fe[le]===void 0&&(fe[le]=J[le]);return W(I,ee,void 0,void 0,null,fe)},He.createRef=function(){return{current:null}},He.forwardRef=function(I){return{$$typeof:g,render:I}},He.isValidElement=B,He.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:Q}},He.memo=function(I,j){return{$$typeof:p,type:I,compare:j===void 0?null:j}},He.startTransition=function(I){var j=D.T,K={};D.T=K;try{var le=I(),fe=D.S;fe!==null&&fe(K,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(he,Y)}catch(ee){Y(ee)}finally{D.T=j}},He.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},He.use=function(I){return D.H.use(I)},He.useActionState=function(I,j,K){return D.H.useActionState(I,j,K)},He.useCallback=function(I,j){return D.H.useCallback(I,j)},He.useContext=function(I){return D.H.useContext(I)},He.useDebugValue=function(){},He.useDeferredValue=function(I,j){return D.H.useDeferredValue(I,j)},He.useEffect=function(I,j,K){var le=D.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(I,j)},He.useId=function(){return D.H.useId()},He.useImperativeHandle=function(I,j,K){return D.H.useImperativeHandle(I,j,K)},He.useInsertionEffect=function(I,j){return D.H.useInsertionEffect(I,j)},He.useLayoutEffect=function(I,j){return D.H.useLayoutEffect(I,j)},He.useMemo=function(I,j){return D.H.useMemo(I,j)},He.useOptimistic=function(I,j){return D.H.useOptimistic(I,j)},He.useReducer=function(I,j,K){return D.H.useReducer(I,j,K)},He.useRef=function(I){return D.H.useRef(I)},He.useState=function(I){return D.H.useState(I)},He.useSyncExternalStore=function(I,j,K){return D.H.useSyncExternalStore(I,j,K)},He.useTransition=function(){return D.H.useTransition()},He.version="19.1.0",He}var cp;function Tc(){return cp||(cp=1,Ku.exports=Zv()),Ku.exports}var q=Tc();const tl=lg(q);var Ju={exports:{}},Qo={},Xu={exports:{}},Qu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function Kv(){return dp||(dp=1,function(l){function t(O,Q){var Y=O.length;O.push(Q);e:for(;0<Y;){var he=Y-1>>>1,I=O[he];if(0<r(I,Q))O[he]=Q,O[Y]=I,Y=he;else break e}}function n(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var Q=O[0],Y=O.pop();if(Y!==Q){O[0]=Y;e:for(var he=0,I=O.length,j=I>>>1;he<j;){var K=2*(he+1)-1,le=O[K],fe=K+1,ee=O[fe];if(0>r(le,Y))fe<I&&0>r(ee,le)?(O[he]=ee,O[fe]=Y,he=fe):(O[he]=le,O[K]=Y,he=K);else if(fe<I&&0>r(ee,Y))O[he]=ee,O[fe]=Y,he=fe;else break e}}return Q}function r(O,Q){var Y=O.sortIndex-Q.sortIndex;return Y!==0?Y:O.id-Q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;l.unstable_now=function(){return u.now()}}else{var m=Date,g=m.now();l.unstable_now=function(){return m.now()-g}}var y=[],p=[],v=1,E=null,x=3,b=!1,R=!1,L=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function w(O){for(var Q=n(p);Q!==null;){if(Q.callback===null)a(p);else if(Q.startTime<=O)a(p),Q.sortIndex=Q.expirationTime,t(y,Q);else break;Q=n(p)}}function D(O){if(L=!1,w(O),!R)if(n(y)!==null)R=!0,X||(X=!0,Z());else{var Q=n(p);Q!==null&&ue(D,Q.startTime-O)}}var X=!1,W=-1,ne=5,B=-1;function ce(){return N?!0:!(l.unstable_now()-B<ne)}function ie(){if(N=!1,X){var O=l.unstable_now();B=O;var Q=!0;try{e:{R=!1,L&&(L=!1,P(W),W=-1),b=!0;var Y=x;try{t:{for(w(O),E=n(y);E!==null&&!(E.expirationTime>O&&ce());){var he=E.callback;if(typeof he=="function"){E.callback=null,x=E.priorityLevel;var I=he(E.expirationTime<=O);if(O=l.unstable_now(),typeof I=="function"){E.callback=I,w(O),Q=!0;break t}E===n(y)&&a(y),w(O)}else a(y);E=n(y)}if(E!==null)Q=!0;else{var j=n(p);j!==null&&ue(D,j.startTime-O),Q=!1}}break e}finally{E=null,x=Y,b=!1}Q=void 0}}finally{Q?Z():X=!1}}}var Z;if(typeof k=="function")Z=function(){k(ie)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,se=de.port2;de.port1.onmessage=ie,Z=function(){se.postMessage(null)}}else Z=function(){A(ie,0)};function ue(O,Q){W=A(function(){O(l.unstable_now())},Q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(O){O.callback=null},l.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<O?Math.floor(1e3/O):5},l.unstable_getCurrentPriorityLevel=function(){return x},l.unstable_next=function(O){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var Y=x;x=Q;try{return O()}finally{x=Y}},l.unstable_requestPaint=function(){N=!0},l.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=x;x=O;try{return Q()}finally{x=Y}},l.unstable_scheduleCallback=function(O,Q,Y){var he=l.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?he+Y:he):Y=he,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=Y+I,O={id:v++,callback:Q,priorityLevel:O,startTime:Y,expirationTime:I,sortIndex:-1},Y>he?(O.sortIndex=Y,t(p,O),n(y)===null&&O===n(p)&&(L?(P(W),W=-1):L=!0,ue(D,Y-he))):(O.sortIndex=I,t(y,O),R||b||(R=!0,X||(X=!0,Z()))),O},l.unstable_shouldYield=ce,l.unstable_wrapCallback=function(O){var Q=x;return function(){var Y=x;x=Q;try{return O.apply(this,arguments)}finally{x=Y}}}}(Qu)),Qu}var fp;function Jv(){return fp||(fp=1,Xu.exports=Kv()),Xu.exports}var ju={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function Xv(){if(mp)return en;mp=1;var l=Tc();function t(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(y,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:p,implementation:v}}var m=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,en.createPortal=function(y,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(y,p,null,v)},en.flushSync=function(y){var p=m.T,v=a.p;try{if(m.T=null,a.p=2,y)return y()}finally{m.T=p,a.p=v,a.d.f()}},en.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(y,p))},en.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},en.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var v=p.as,E=g(v,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?a.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:b}):v==="script"&&a.d.X(y,{crossOrigin:E,integrity:x,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=g(p.as,p.crossOrigin);a.d.M(y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(y)},en.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=g(v,p.crossOrigin);a.d.L(y,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(y,p){if(typeof y=="string")if(p){var v=g(p.as,p.crossOrigin);a.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(y)},en.requestFormReset=function(y){a.d.r(y)},en.unstable_batchedUpdates=function(y,p){return y(p)},en.useFormState=function(y,p,v){return m.H.useFormState(y,p,v)},en.useFormStatus=function(){return m.H.useHostTransitionStatus()},en.version="19.1.0",en}var pp;function Qv(){if(pp)return ju.exports;pp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),ju.exports=Xv(),ju.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function jv(){if(hp)return Qo;hp=1;var l=Jv(),t=Tc(),n=Qv();function a(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function m(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(a(188))}function y(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(a(188));return i!==e?null:e}for(var o=e,s=i;;){var f=o.return;if(f===null)break;var h=f.alternate;if(h===null){if(s=f.return,s!==null){o=s;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===o)return g(f),e;if(h===s)return g(f),i;h=h.sibling}throw Error(a(188))}if(o.return!==s.return)o=f,s=h;else{for(var C=!1,_=f.child;_;){if(_===o){C=!0,o=f,s=h;break}if(_===s){C=!0,s=f,o=h;break}_=_.sibling}if(!C){for(_=h.child;_;){if(_===o){C=!0,o=h,s=f;break}if(_===s){C=!0,s=h,o=f;break}_=_.sibling}if(!C)throw Error(a(189))}}if(o.alternate!==s)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:i}function p(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=p(e),i!==null)return i;e=e.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),k=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case N:return"Profiler";case L:return"StrictMode";case D:return"Suspense";case X:return"SuspenseList";case B:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case k:return(e.displayName||"Context")+".Provider";case P:return(e._context.displayName||"Context")+".Consumer";case w:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return i=e.displayName||null,i!==null?i:se(e.type)||"Memo";case ne:i=e._payload,e=e._init;try{return se(e(i))}catch{}}return null}var ue=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},he=[],I=-1;function j(e){return{current:e}}function K(e){0>I||(e.current=he[I],he[I]=null,I--)}function le(e,i){I++,he[I]=e.current,e.current=i}var fe=j(null),ee=j(null),J=j(null),ae=j(null);function ge(e,i){switch(le(J,i),le(ee,e),le(fe,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Um(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Um(i),e=Pm(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(fe),le(fe,e)}function F(){K(fe),K(ee),K(J)}function Ne(e){e.memoizedState!==null&&le(ae,e);var i=fe.current,o=Pm(i,e.type);i!==o&&(le(ee,e),le(fe,o))}function ye(e){ee.current===e&&(K(fe),K(ee)),ae.current===e&&(K(ae),Fo._currentValue=Y)}var Pe=Object.prototype.hasOwnProperty,be=l.unstable_scheduleCallback,ft=l.unstable_cancelCallback,kt=l.unstable_shouldYield,mt=l.unstable_requestPaint,pt=l.unstable_now,At=l.unstable_getCurrentPriorityLevel,rn=l.unstable_ImmediatePriority,Mt=l.unstable_UserBlockingPriority,nn=l.unstable_NormalPriority,sn=l.unstable_LowPriority,Hi=l.unstable_IdlePriority,ca=l.log,qi=l.unstable_setDisableYieldValue,$n=null,Bt=null;function pn(e){if(typeof ca=="function"&&qi(e),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode($n,e)}catch{}}var jt=Math.clz32?Math.clz32:$e,Ae=Math.log,Re=Math.LN2;function $e(e){return e>>>=0,e===0?32:31-(Ae(e)/Re|0)|0}var me=256,ke=4194304;function Be(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,i,o){var s=e.pendingLanes;if(s===0)return 0;var f=0,h=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var _=s&134217727;return _!==0?(s=_&~h,s!==0?f=Be(s):(C&=_,C!==0?f=Be(C):o||(o=_&~e,o!==0&&(f=Be(o))))):(_=s&~h,_!==0?f=Be(_):C!==0?f=Be(C):o||(o=s&~e,o!==0&&(f=Be(o)))),f===0?0:i!==0&&i!==f&&(i&h)===0&&(h=f&-f,o=i&-i,h>=o||h===32&&(o&4194048)!==0)?i:f}function ht(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Xe(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var e=me;return me<<=1,(me&4194048)===0&&(me=256),e}function Ut(){var e=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),e}function st(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function we(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zt(e,i,o,s,f,h){var C=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var _=e.entanglements,M=e.expirationTimes,$=e.hiddenUpdates;for(o=C&~o;0<o;){var te=31-jt(o),re=1<<te;_[te]=0,M[te]=-1;var H=$[te];if(H!==null)for($[te]=null,te=0;te<H.length;te++){var z=H[te];z!==null&&(z.lane&=-536870913)}o&=~re}s!==0&&Te(e,s,0),h!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=h&~(C&~i))}function Te(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var s=31-jt(i);e.entangledLanes|=i,e.entanglements[s]=e.entanglements[s]|1073741824|o&4194090}function at(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var s=31-jt(o),f=1<<s;f&i|e[s]&i&&(e[s]|=i),o&=~f}}function Qe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function an(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function hn(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:tp(e.type))}function ot(e,i){var o=Q.p;try{return Q.p=e,i()}finally{Q.p=o}}var gt=Math.random().toString(36).slice(2),nt="__reactFiber$"+gt,lt="__reactProps$"+gt,gn="__reactContainer$"+gt,no="__reactEvents$"+gt,Vr="__reactListeners$"+gt,$r="__reactHandles$"+gt,rl="__reactResources$"+gt,Bi="__reactMarker$"+gt;function We(e){delete e[nt],delete e[lt],delete e[no],delete e[Vr],delete e[$r]}function Ft(e){var i=e[nt];if(i)return i;for(var o=e.parentNode;o;){if(i=o[gn]||o[nt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=$m(e);e!==null;){if(o=e[nt])return o;e=$m(e)}return i}e=o,o=e.parentNode}return null}function Et(e){if(e=e[nt]||e[gn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function It(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(a(33))}function yt(e){var i=e[rl];return i||(i=e[rl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ke(e){e[Bi]=!0}var Ve=new Set,_t={};function rt(e,i){yn(e,i),yn(e+"Capture",i)}function yn(e,i){for(_t[e]=i,e=0;e<i.length;e++)Ve.add(i[e])}var Jn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bc={},Nc={};function Gg(e){return Pe.call(Nc,e)?!0:Pe.call(bc,e)?!1:Jn.test(e)?Nc[e]=!0:(bc[e]=!0,!1)}function sl(e,i,o){if(Gg(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var s=i.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function ul(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Xn(e,i,o,s){if(s===null)e.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+s)}}var Hr,Ac;function da(e){if(Hr===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Hr=i&&i[1]||"",Ac=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hr+e+Ac}var qr=!1;function Br(e,i){if(!e||qr)return"";qr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(z){var H=z}Reflect.construct(e,[],re)}else{try{re.call()}catch(z){H=z}e.call(re.prototype)}}else{try{throw Error()}catch(z){H=z}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(z){if(z&&H&&typeof z.stack=="string")return[z.stack,H.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=s.DetermineComponentFrameRoot(),C=h[0],_=h[1];if(C&&_){var M=C.split(`
`),$=_.split(`
`);for(f=s=0;s<M.length&&!M[s].includes("DetermineComponentFrameRoot");)s++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(s===M.length||f===$.length)for(s=M.length-1,f=$.length-1;1<=s&&0<=f&&M[s]!==$[f];)f--;for(;1<=s&&0<=f;s--,f--)if(M[s]!==$[f]){if(s!==1||f!==1)do if(s--,f--,0>f||M[s]!==$[f]){var te=`
`+M[s].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=s&&0<=f);break}}}finally{qr=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?da(o):""}function Vg(e){switch(e.tag){case 26:case 27:case 5:return da(e.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 15:return Br(e.type,!1);case 11:return Br(e.type.render,!1);case 1:return Br(e.type,!0);case 31:return da("Activity");default:return""}}function wc(e){try{var i="";do i+=Vg(e),e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rc(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $g(e){var i=Rc(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),s=""+e[i];if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(C){s=""+C,h.call(this,C)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(C){s=""+C},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function cl(e){e._valueTracker||(e._valueTracker=$g(e))}function Mc(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),s="";return e&&(s=Rc(e)?e.checked?"true":"false":e.value),e=s,e!==o?(i.setValue(e),!0):!1}function dl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hg=/[\n"\\]/g;function An(e){return e.replace(Hg,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function zr(e,i,o,s,f,h,C,_){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),i!=null?C==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Nn(i)):e.value!==""+Nn(i)&&(e.value=""+Nn(i)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),i!=null?Fr(e,C,Nn(i)):o!=null?Fr(e,C,Nn(o)):s!=null&&e.removeAttribute("value"),f==null&&h!=null&&(e.defaultChecked=!!h),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Nn(_):e.removeAttribute("name")}function Ic(e,i,o,s,f,h,C,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),i!=null||o!=null){if(!(h!=="submit"&&h!=="reset"||i!=null))return;o=o!=null?""+Nn(o):"",i=i!=null?""+Nn(i):o,_||i===e.value||(e.value=i),e.defaultValue=i}s=s??f,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=_?e.checked:!!s,e.defaultChecked=!!s,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C)}function Fr(e,i,o){i==="number"&&dl(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function fa(e,i,o,s){if(e=e.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<e.length;o++)f=i.hasOwnProperty("$"+e[o].value),e[o].selected!==f&&(e[o].selected=f),f&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Nn(o),i=null,f=0;f<e.length;f++){if(e[f].value===o){e[f].selected=!0,s&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Dc(e,i,o){if(i!=null&&(i=""+Nn(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+Nn(o):""}function Lc(e,i,o,s){if(i==null){if(s!=null){if(o!=null)throw Error(a(92));if(ue(s)){if(1<s.length)throw Error(a(93));s=s[0]}o=s}o==null&&(o=""),i=o}o=Nn(i),e.defaultValue=o,s=e.textContent,s===o&&s!==""&&s!==null&&(e.value=s)}function ma(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var qg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kc(e,i,o){var s=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?s?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":s?e.setProperty(i,o):typeof o!="number"||o===0||qg.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function Uc(e,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(e=e.style,o!=null){for(var s in o)!o.hasOwnProperty(s)||i!=null&&i.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var f in i)s=i[f],i.hasOwnProperty(f)&&o[f]!==s&&kc(e,f,s)}else for(var h in i)i.hasOwnProperty(h)&&kc(e,h,i[h])}function Yr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fl(e){return zg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Zr=null;function Kr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pa=null,ha=null;function Pc(e){var i=Et(e);if(i&&(e=i.stateNode)){var o=e[lt]||null;e:switch(e=i.stateNode,i.type){case"input":if(zr(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var s=o[i];if(s!==e&&s.form===e.form){var f=s[lt]||null;if(!f)throw Error(a(90));zr(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)s=o[i],s.form===e.form&&Mc(s)}break e;case"textarea":Dc(e,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&fa(e,!!o.multiple,i,!1)}}}var Jr=!1;function Oc(e,i,o){if(Jr)return e(i,o);Jr=!0;try{var s=e(i);return s}finally{if(Jr=!1,(pa!==null||ha!==null)&&(Ql(),pa&&(i=pa,e=ha,ha=pa=null,Pc(i),e)))for(i=0;i<e.length;i++)Pc(e[i])}}function io(e,i){var o=e.stateNode;if(o===null)return null;var s=o[lt]||null;if(s===null)return null;o=s[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(Qn)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{Xr=!1}var fi=null,Qr=null,ml=null;function Gc(){if(ml)return ml;var e,i=Qr,o=i.length,s,f="value"in fi?fi.value:fi.textContent,h=f.length;for(e=0;e<o&&i[e]===f[e];e++);var C=o-e;for(s=1;s<=C&&i[o-s]===f[h-s];s++);return ml=f.slice(e,1<s?1-s:void 0)}function pl(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function hl(){return!0}function Vc(){return!1}function un(e){function i(o,s,f,h,C){this._reactName=o,this._targetInst=f,this.type=s,this.nativeEvent=h,this.target=C,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(o=e[_],this[_]=o?o(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?hl:Vc,this.isPropagationStopped=Vc,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),i}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=un(zi),oo=v({},zi,{view:0,detail:0}),Fg=un(oo),jr,Wr,lo,yl=v({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lo&&(lo&&e.type==="mousemove"?(jr=e.screenX-lo.screenX,Wr=e.screenY-lo.screenY):Wr=jr=0,lo=e),jr)},movementY:function(e){return"movementY"in e?e.movementY:Wr}}),$c=un(yl),Yg=v({},yl,{dataTransfer:0}),Zg=un(Yg),Kg=v({},oo,{relatedTarget:0}),es=un(Kg),Jg=v({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xg=un(Jg),Qg=v({},zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jg=un(Qg),Wg=v({},zi,{data:0}),Hc=un(Wg),ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ny={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ny[e])?!!i[e]:!1}function ts(){return iy}var ay=v({},oo,{key:function(e){if(e.key){var i=ey[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=pl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ty[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(e){return e.type==="keypress"?pl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oy=un(ay),ly=v({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=un(ly),ry=v({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),sy=un(ry),uy=v({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cy=un(uy),dy=v({},yl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fy=un(dy),my=v({},zi,{newState:0,oldState:0}),py=un(my),hy=[9,13,27,32],ns=Qn&&"CompositionEvent"in window,ro=null;Qn&&"documentMode"in document&&(ro=document.documentMode);var gy=Qn&&"TextEvent"in window&&!ro,Bc=Qn&&(!ns||ro&&8<ro&&11>=ro),zc=" ",Fc=!1;function Yc(e,i){switch(e){case"keyup":return hy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ga=!1;function yy(e,i){switch(e){case"compositionend":return Zc(i);case"keypress":return i.which!==32?null:(Fc=!0,zc);case"textInput":return e=i.data,e===zc&&Fc?null:e;default:return null}}function vy(e,i){if(ga)return e==="compositionend"||!ns&&Yc(e,i)?(e=Gc(),ml=Qr=fi=null,ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Bc&&i.locale!=="ko"?null:i.data;default:return null}}var Ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ty[e.type]:i==="textarea"}function Jc(e,i,o,s){pa?ha?ha.push(s):ha=[s]:pa=s,i=ir(i,"onChange"),0<i.length&&(o=new gl("onChange","change",null,o,s),e.push({event:o,listeners:i}))}var so=null,uo=null;function Cy(e){Mm(e,0)}function vl(e){var i=It(e);if(Mc(i))return e}function Xc(e,i){if(e==="change")return i}var Qc=!1;if(Qn){var is;if(Qn){var as="oninput"in document;if(!as){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),as=typeof jc.oninput=="function"}is=as}else is=!1;Qc=is&&(!document.documentMode||9<document.documentMode)}function Wc(){so&&(so.detachEvent("onpropertychange",ed),uo=so=null)}function ed(e){if(e.propertyName==="value"&&vl(uo)){var i=[];Jc(i,uo,e,Kr(e)),Oc(Cy,i)}}function xy(e,i,o){e==="focusin"?(Wc(),so=i,uo=o,so.attachEvent("onpropertychange",ed)):e==="focusout"&&Wc()}function Ey(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vl(uo)}function _y(e,i){if(e==="click")return vl(i)}function Sy(e,i){if(e==="input"||e==="change")return vl(i)}function by(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var vn=typeof Object.is=="function"?Object.is:by;function co(e,i){if(vn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),s=Object.keys(i);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var f=o[s];if(!Pe.call(i,f)||!vn(e[f],i[f]))return!1}return!0}function td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,i){var o=td(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=i&&s>=i)return{node:o,offset:i-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=td(o)}}function id(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?id(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=dl(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=dl(e.document)}return i}function os(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ny=Qn&&"documentMode"in document&&11>=document.documentMode,ya=null,ls=null,fo=null,rs=!1;function od(e,i,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rs||ya==null||ya!==dl(s)||(s=ya,"selectionStart"in s&&os(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),fo&&co(fo,s)||(fo=s,s=ir(ls,"onSelect"),0<s.length&&(i=new gl("onSelect","select",null,i,o),e.push({event:i,listeners:s}),i.target=ya)))}function Fi(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var va={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionrun:Fi("Transition","TransitionRun"),transitionstart:Fi("Transition","TransitionStart"),transitioncancel:Fi("Transition","TransitionCancel"),transitionend:Fi("Transition","TransitionEnd")},ss={},ld={};Qn&&(ld=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Yi(e){if(ss[e])return ss[e];if(!va[e])return e;var i=va[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in ld)return ss[e]=i[o];return e}var rd=Yi("animationend"),sd=Yi("animationiteration"),ud=Yi("animationstart"),Ay=Yi("transitionrun"),wy=Yi("transitionstart"),Ry=Yi("transitioncancel"),cd=Yi("transitionend"),dd=new Map,us="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");us.push("scrollEnd");function Pn(e,i){dd.set(e,i),rt(i,[e])}var fd=new WeakMap;function wn(e,i){if(typeof e=="object"&&e!==null){var o=fd.get(e);return o!==void 0?o:(i={value:e,source:i,stack:wc(i)},fd.set(e,i),i)}return{value:e,source:i,stack:wc(i)}}var Rn=[],Ta=0,cs=0;function Tl(){for(var e=Ta,i=cs=Ta=0;i<e;){var o=Rn[i];Rn[i++]=null;var s=Rn[i];Rn[i++]=null;var f=Rn[i];Rn[i++]=null;var h=Rn[i];if(Rn[i++]=null,s!==null&&f!==null){var C=s.pending;C===null?f.next=f:(f.next=C.next,C.next=f),s.pending=f}h!==0&&md(o,f,h)}}function Cl(e,i,o,s){Rn[Ta++]=e,Rn[Ta++]=i,Rn[Ta++]=o,Rn[Ta++]=s,cs|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function ds(e,i,o,s){return Cl(e,i,o,s),xl(e)}function Ca(e,i){return Cl(e,null,null,i),xl(e)}function md(e,i,o){e.lanes|=o;var s=e.alternate;s!==null&&(s.lanes|=o);for(var f=!1,h=e.return;h!==null;)h.childLanes|=o,s=h.alternate,s!==null&&(s.childLanes|=o),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(f=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,f&&i!==null&&(f=31-jt(o),e=h.hiddenUpdates,s=e[f],s===null?e[f]=[i]:s.push(i),i.lane=o|536870912),h):null}function xl(e){if(50<Oo)throw Oo=0,yu=null,Error(a(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var xa={};function My(e,i,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(e,i,o,s){return new My(e,i,o,s)}function fs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jn(e,i){var o=e.alternate;return o===null?(o=Tn(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function pd(e,i){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function El(e,i,o,s,f,h){var C=0;if(s=e,typeof e=="function")fs(e)&&(C=1);else if(typeof e=="string")C=Dv(e,o,fe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case B:return e=Tn(31,o,i,f),e.elementType=B,e.lanes=h,e;case R:return Zi(o.children,f,h,i);case L:C=8,f|=24;break;case N:return e=Tn(12,o,i,f|2),e.elementType=N,e.lanes=h,e;case D:return e=Tn(13,o,i,f),e.elementType=D,e.lanes=h,e;case X:return e=Tn(19,o,i,f),e.elementType=X,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:case k:C=10;break e;case P:C=9;break e;case w:C=11;break e;case W:C=14;break e;case ne:C=16,s=null;break e}C=29,o=Error(a(130,e===null?"null":typeof e,"")),s=null}return i=Tn(C,o,i,f),i.elementType=e,i.type=s,i.lanes=h,i}function Zi(e,i,o,s){return e=Tn(7,e,s,i),e.lanes=o,e}function ms(e,i,o){return e=Tn(6,e,null,i),e.lanes=o,e}function ps(e,i,o){return i=Tn(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ea=[],_a=0,_l=null,Sl=0,Mn=[],In=0,Ki=null,Wn=1,ei="";function Ji(e,i){Ea[_a++]=Sl,Ea[_a++]=_l,_l=e,Sl=i}function hd(e,i,o){Mn[In++]=Wn,Mn[In++]=ei,Mn[In++]=Ki,Ki=e;var s=Wn;e=ei;var f=32-jt(s)-1;s&=~(1<<f),o+=1;var h=32-jt(i)+f;if(30<h){var C=f-f%5;h=(s&(1<<C)-1).toString(32),s>>=C,f-=C,Wn=1<<32-jt(i)+f|o<<f|s,ei=h+e}else Wn=1<<h|o<<f|s,ei=e}function hs(e){e.return!==null&&(Ji(e,1),hd(e,1,0))}function gs(e){for(;e===_l;)_l=Ea[--_a],Ea[_a]=null,Sl=Ea[--_a],Ea[_a]=null;for(;e===Ki;)Ki=Mn[--In],Mn[In]=null,ei=Mn[--In],Mn[In]=null,Wn=Mn[--In],Mn[In]=null}var on=null,Dt=null,it=!1,Xi=null,Hn=!1,ys=Error(a(519));function Qi(e){var i=Error(a(418,""));throw ho(wn(i,e)),ys}function gd(e){var i=e.stateNode,o=e.type,s=e.memoizedProps;switch(i[nt]=e,i[lt]=s,o){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(o=0;o<Vo.length;o++)Ze(Vo[o],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Ze("invalid",i),Ic(i,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),cl(i);break;case"select":Ze("invalid",i);break;case"textarea":Ze("invalid",i),Lc(i,s.value,s.defaultValue,s.children),cl(i)}o=s.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||s.suppressHydrationWarning===!0||km(i.textContent,o)?(s.popover!=null&&(Ze("beforetoggle",i),Ze("toggle",i)),s.onScroll!=null&&Ze("scroll",i),s.onScrollEnd!=null&&Ze("scrollend",i),s.onClick!=null&&(i.onclick=ar),i=!0):i=!1,i||Qi(e)}function yd(e){for(on=e.return;on;)switch(on.tag){case 5:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:on=on.return}}function mo(e){if(e!==on)return!1;if(!it)return yd(e),it=!0,!1;var i=e.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Lu(e.type,e.memoizedProps)),o=!o),o&&Dt&&Qi(e),yd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(i===0){Dt=Gn(e.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;e=e.nextSibling}Dt=null}}else i===27?(i=Dt,wi(e.type)?(e=Ou,Ou=null,Dt=e):Dt=i):Dt=on?Gn(e.stateNode.nextSibling):null;return!0}function po(){Dt=on=null,it=!1}function vd(){var e=Xi;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),Xi=null),e}function ho(e){Xi===null?Xi=[e]:Xi.push(e)}var vs=j(null),ji=null,ti=null;function mi(e,i,o){le(vs,i._currentValue),i._currentValue=o}function ni(e){e._currentValue=vs.current,K(vs)}function Ts(e,i,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,s!==null&&(s.childLanes|=i)):s!==null&&(s.childLanes&i)!==i&&(s.childLanes|=i),e===o)break;e=e.return}}function Cs(e,i,o,s){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var h=f.dependencies;if(h!==null){var C=f.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=f;for(var M=0;M<i.length;M++)if(_.context===i[M]){h.lanes|=o,_=h.alternate,_!==null&&(_.lanes|=o),Ts(h.return,o,e),s||(C=null);break e}h=_.next}}else if(f.tag===18){if(C=f.return,C===null)throw Error(a(341));C.lanes|=o,h=C.alternate,h!==null&&(h.lanes|=o),Ts(C,o,e),C=null}else C=f.child;if(C!==null)C.return=f;else for(C=f;C!==null;){if(C===e){C=null;break}if(f=C.sibling,f!==null){f.return=C.return,C=f;break}C=C.return}f=C}}function go(e,i,o,s){e=null;for(var f=i,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var C=f.alternate;if(C===null)throw Error(a(387));if(C=C.memoizedProps,C!==null){var _=f.type;vn(f.pendingProps.value,C.value)||(e!==null?e.push(_):e=[_])}}else if(f===ae.current){if(C=f.alternate,C===null)throw Error(a(387));C.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Fo):e=[Fo])}f=f.return}e!==null&&Cs(i,e,o,s),i.flags|=262144}function bl(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wi(e){ji=e,ti=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Td(ji,e)}function Nl(e,i){return ji===null&&Wi(e),Td(e,i)}function Td(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ti===null){if(e===null)throw Error(a(308));ti=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ti=ti.next=i;return o}var Iy=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,s){e.push(s)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},Dy=l.unstable_scheduleCallback,Ly=l.unstable_NormalPriority,Ht={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xs(){return{controller:new Iy,data:new Map,refCount:0}}function yo(e){e.refCount--,e.refCount===0&&Dy(Ly,function(){e.controller.abort()})}var vo=null,Es=0,Sa=0,ba=null;function ky(e,i){if(vo===null){var o=vo=[];Es=0,Sa=Su(),ba={status:"pending",value:void 0,then:function(s){o.push(s)}}}return Es++,i.then(Cd,Cd),i}function Cd(){if(--Es===0&&vo!==null){ba!==null&&(ba.status="fulfilled");var e=vo;vo=null,Sa=0,ba=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Uy(e,i){var o=[],s={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return e.then(function(){s.status="fulfilled",s.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(s.status="rejected",s.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),s}var xd=O.S;O.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&ky(e,i),xd!==null&&xd(e,i)};var ea=j(null);function _s(){var e=ea.current;return e!==null?e:St.pooledCache}function Al(e,i){i===null?le(ea,ea.current):le(ea,i.pool)}function Ed(){var e=_s();return e===null?null:{parent:Ht._currentValue,pool:e}}var To=Error(a(460)),_d=Error(a(474)),wl=Error(a(542)),Ss={then:function(){}};function Sd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Rl(){}function bd(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(Rl,Rl),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ad(e),e;default:if(typeof i.status=="string")i.then(Rl,Rl);else{if(e=St,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=i,e.status="pending",e.then(function(s){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=s}},function(s){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=s}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ad(e),e}throw Co=i,To}}var Co=null;function Nd(){if(Co===null)throw Error(a(459));var e=Co;return Co=null,e}function Ad(e){if(e===To||e===wl)throw Error(a(483))}var pi=!1;function bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ns(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function hi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gi(e,i,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(ut&2)!==0){var f=s.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),s.pending=i,i=xl(e),md(e,null,o),i}return Cl(e,s,i,o),xl(e)}function xo(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var s=i.lanes;s&=e.pendingLanes,o|=s,i.lanes=o,at(e,o)}}function As(e,i){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var f=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var C={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};h===null?f=h=C:h=h.next=C,o=o.next}while(o!==null);h===null?f=h=i:h=h.next=i}else f=h=i;o={baseState:s.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:s.shared,callbacks:s.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var ws=!1;function Eo(){if(ws){var e=ba;if(e!==null)throw e}}function _o(e,i,o,s){ws=!1;var f=e.updateQueue;pi=!1;var h=f.firstBaseUpdate,C=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var M=_,$=M.next;M.next=null,C===null?h=$:C.next=$,C=M;var te=e.alternate;te!==null&&(te=te.updateQueue,_=te.lastBaseUpdate,_!==C&&(_===null?te.firstBaseUpdate=$:_.next=$,te.lastBaseUpdate=M))}if(h!==null){var re=f.baseState;C=0,te=$=M=null,_=h;do{var H=_.lane&-536870913,z=H!==_.lane;if(z?(je&H)===H:(s&H)===H){H!==0&&H===Sa&&(ws=!0),te!==null&&(te=te.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Le=e,Me=_;H=i;var Ct=o;switch(Me.tag){case 1:if(Le=Me.payload,typeof Le=="function"){re=Le.call(Ct,re,H);break e}re=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Me.payload,H=typeof Le=="function"?Le.call(Ct,re,H):Le,H==null)break e;re=v({},re,H);break e;case 2:pi=!0}}H=_.callback,H!==null&&(e.flags|=64,z&&(e.flags|=8192),z=f.callbacks,z===null?f.callbacks=[H]:z.push(H))}else z={lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},te===null?($=te=z,M=re):te=te.next=z,C|=H;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;z=_,_=z.next,z.next=null,f.lastBaseUpdate=z,f.shared.pending=null}}while(!0);te===null&&(M=re),f.baseState=M,f.firstBaseUpdate=$,f.lastBaseUpdate=te,h===null&&(f.shared.lanes=0),Si|=C,e.lanes=C,e.memoizedState=re}}function wd(e,i){if(typeof e!="function")throw Error(a(191,e));e.call(i)}function Rd(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)wd(o[e],i)}var Na=j(null),Ml=j(0);function Md(e,i){e=ui,le(Ml,e),le(Na,i),ui=e|i.baseLanes}function Rs(){le(Ml,ui),le(Na,Na.current)}function Ms(){ui=Ml.current,K(Na),K(Ml)}var yi=0,ze=null,vt=null,Gt=null,Il=!1,Aa=!1,ta=!1,Dl=0,So=0,wa=null,Py=0;function Pt(){throw Error(a(321))}function Is(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!vn(e[o],i[o]))return!1;return!0}function Ds(e,i,o,s,f,h){return yi=h,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,O.H=e===null||e.memoizedState===null?pf:hf,ta=!1,h=o(s,f),ta=!1,Aa&&(h=Dd(i,o,s,f)),Id(e),h}function Id(e){O.H=Gl;var i=vt!==null&&vt.next!==null;if(yi=0,Gt=vt=ze=null,Il=!1,So=0,wa=null,i)throw Error(a(300));e===null||Yt||(e=e.dependencies,e!==null&&bl(e)&&(Yt=!0))}function Dd(e,i,o,s){ze=e;var f=0;do{if(Aa&&(wa=null),So=0,Aa=!1,25<=f)throw Error(a(301));if(f+=1,Gt=vt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}O.H=By,h=i(o,s)}while(Aa);return h}function Oy(){var e=O.H,i=e.useState()[0];return i=typeof i.then=="function"?bo(i):i,e=e.useState()[0],(vt!==null?vt.memoizedState:null)!==e&&(ze.flags|=1024),i}function Ls(){var e=Dl!==0;return Dl=0,e}function ks(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function Us(e){if(Il){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Il=!1}yi=0,Gt=vt=ze=null,Aa=!1,So=Dl=0,wa=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?ze.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function Vt(){if(vt===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var i=Gt===null?ze.memoizedState:Gt.next;if(i!==null)Gt=i,vt=e;else{if(e===null)throw ze.alternate===null?Error(a(467)):Error(a(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Gt===null?ze.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function Ps(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bo(e){var i=So;return So+=1,wa===null&&(wa=[]),e=bd(wa,e,i),i=ze,(Gt===null?i.memoizedState:Gt.next)===null&&(i=i.alternate,O.H=i===null||i.memoizedState===null?pf:hf),e}function Ll(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return bo(e);if(e.$$typeof===k)return Wt(e)}throw Error(a(438,String(e)))}function Os(e){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var s=ze.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(i={data:s.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Ps(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),s=0;s<e;s++)o[s]=ce;return i.index++,o}function ii(e,i){return typeof i=="function"?i(e):i}function kl(e){var i=Vt();return Gs(i,vt,e)}function Gs(e,i,o){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=o;var f=e.baseQueue,h=s.pending;if(h!==null){if(f!==null){var C=f.next;f.next=h.next,h.next=C}i.baseQueue=f=h,s.pending=null}if(h=e.baseState,f===null)e.memoizedState=h;else{i=f.next;var _=C=null,M=null,$=i,te=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(je&re)===re:(yi&re)===re){var H=$.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===Sa&&(te=!0);else if((yi&H)===H){$=$.next,H===Sa&&(te=!0);continue}else re={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(_=M=re,C=h):M=M.next=re,ze.lanes|=H,Si|=H;re=$.action,ta&&o(h,re),h=$.hasEagerState?$.eagerState:o(h,re)}else H={lane:re,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(_=M=H,C=h):M=M.next=H,ze.lanes|=re,Si|=re;$=$.next}while($!==null&&$!==i);if(M===null?C=h:M.next=_,!vn(h,e.memoizedState)&&(Yt=!0,te&&(o=ba,o!==null)))throw o;e.memoizedState=h,e.baseState=C,e.baseQueue=M,s.lastRenderedState=h}return f===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Vs(e){var i=Vt(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var s=o.dispatch,f=o.pending,h=i.memoizedState;if(f!==null){o.pending=null;var C=f=f.next;do h=e(h,C.action),C=C.next;while(C!==f);vn(h,i.memoizedState)||(Yt=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),o.lastRenderedState=h}return[h,s]}function Ld(e,i,o){var s=ze,f=Vt(),h=it;if(h){if(o===void 0)throw Error(a(407));o=o()}else o=i();var C=!vn((vt||f).memoizedState,o);C&&(f.memoizedState=o,Yt=!0),f=f.queue;var _=Pd.bind(null,s,f,e);if(No(2048,8,_,[e]),f.getSnapshot!==i||C||Gt!==null&&Gt.memoizedState.tag&1){if(s.flags|=2048,Ra(9,Ul(),Ud.bind(null,s,f,o,i),null),St===null)throw Error(a(349));h||(yi&124)!==0||kd(s,i,o)}return o}function kd(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=Ps(),ze.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function Ud(e,i,o,s){i.value=o,i.getSnapshot=s,Od(i)&&Gd(e)}function Pd(e,i,o){return o(function(){Od(i)&&Gd(e)})}function Od(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!vn(e,o)}catch{return!0}}function Gd(e){var i=Ca(e,2);i!==null&&Sn(i,e,2)}function $s(e){var i=cn();if(typeof e=="function"){var o=e;if(e=o(),ta){pn(!0);try{o()}finally{pn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:e},i}function Vd(e,i,o,s){return e.baseState=o,Gs(e,vt,typeof s=="function"?s:ii)}function Gy(e,i,o,s,f){if(Ol(e))throw Error(a(485));if(e=i.action,e!==null){var h={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){h.listeners.push(C)}};O.T!==null?o(!0):h.isTransition=!1,s(h),o=i.pending,o===null?(h.next=i.pending=h,$d(i,h)):(h.next=o.next,i.pending=o.next=h)}}function $d(e,i){var o=i.action,s=i.payload,f=e.state;if(i.isTransition){var h=O.T,C={};O.T=C;try{var _=o(f,s),M=O.S;M!==null&&M(C,_),Hd(e,i,_)}catch($){Hs(e,i,$)}finally{O.T=h}}else try{h=o(f,s),Hd(e,i,h)}catch($){Hs(e,i,$)}}function Hd(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(s){qd(e,i,s)},function(s){return Hs(e,i,s)}):qd(e,i,o)}function qd(e,i,o){i.status="fulfilled",i.value=o,Bd(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,$d(e,o)))}function Hs(e,i,o){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do i.status="rejected",i.reason=o,Bd(i),i=i.next;while(i!==s)}e.action=null}function Bd(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function zd(e,i){return i}function Fd(e,i){if(it){var o=St.formState;if(o!==null){e:{var s=ze;if(it){if(Dt){t:{for(var f=Dt,h=Hn;f.nodeType!==8;){if(!h){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Dt=Gn(f.nextSibling),s=f.data==="F!";break e}}Qi(s)}s=!1}s&&(i=o[0])}}return o=cn(),o.memoizedState=o.baseState=i,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:i},o.queue=s,o=df.bind(null,ze,s),s.dispatch=o,s=$s(!1),h=Ys.bind(null,ze,!1,s.queue),s=cn(),f={state:i,dispatch:null,action:e,pending:null},s.queue=f,o=Gy.bind(null,ze,f,h,o),f.dispatch=o,s.memoizedState=e,[i,o,!1]}function Yd(e){var i=Vt();return Zd(i,vt,e)}function Zd(e,i,o){if(i=Gs(e,i,zd)[0],e=kl(ii)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var s=bo(i)}catch(C){throw C===To?wl:C}else s=i;i=Vt();var f=i.queue,h=f.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,Ra(9,Ul(),Vy.bind(null,f,o),null)),[s,h,e]}function Vy(e,i){e.action=i}function Kd(e){var i=Vt(),o=vt;if(o!==null)return Zd(i,o,e);Vt(),i=i.memoizedState,o=Vt();var s=o.queue.dispatch;return o.memoizedState=e,[i,s,!1]}function Ra(e,i,o,s){return e={tag:e,create:o,deps:s,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Ps(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,i.lastEffect=e),e}function Ul(){return{destroy:void 0,resource:void 0}}function Jd(){return Vt().memoizedState}function Pl(e,i,o,s){var f=cn();s=s===void 0?null:s,ze.flags|=e,f.memoizedState=Ra(1|i,Ul(),o,s)}function No(e,i,o,s){var f=Vt();s=s===void 0?null:s;var h=f.memoizedState.inst;vt!==null&&s!==null&&Is(s,vt.memoizedState.deps)?f.memoizedState=Ra(i,h,o,s):(ze.flags|=e,f.memoizedState=Ra(1|i,h,o,s))}function Xd(e,i){Pl(8390656,8,e,i)}function Qd(e,i){No(2048,8,e,i)}function jd(e,i){return No(4,2,e,i)}function Wd(e,i){return No(4,4,e,i)}function ef(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function tf(e,i,o){o=o!=null?o.concat([e]):null,No(4,4,ef.bind(null,i,e),o)}function qs(){}function nf(e,i){var o=Vt();i=i===void 0?null:i;var s=o.memoizedState;return i!==null&&Is(i,s[1])?s[0]:(o.memoizedState=[e,i],e)}function af(e,i){var o=Vt();i=i===void 0?null:i;var s=o.memoizedState;if(i!==null&&Is(i,s[1]))return s[0];if(s=e(),ta){pn(!0);try{e()}finally{pn(!1)}}return o.memoizedState=[s,i],s}function Bs(e,i,o){return o===void 0||(yi&1073741824)!==0?e.memoizedState=i:(e.memoizedState=o,e=rm(),ze.lanes|=e,Si|=e,o)}function of(e,i,o,s){return vn(o,i)?o:Na.current!==null?(e=Bs(e,o,s),vn(e,i)||(Yt=!0),e):(yi&42)===0?(Yt=!0,e.memoizedState=o):(e=rm(),ze.lanes|=e,Si|=e,i)}function lf(e,i,o,s,f){var h=Q.p;Q.p=h!==0&&8>h?h:8;var C=O.T,_={};O.T=_,Ys(e,!1,i,o);try{var M=f(),$=O.S;if($!==null&&$(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var te=Uy(M,s);Ao(e,i,te,_n(e))}else Ao(e,i,s,_n(e))}catch(re){Ao(e,i,{then:function(){},status:"rejected",reason:re},_n())}finally{Q.p=h,O.T=C}}function $y(){}function zs(e,i,o,s){if(e.tag!==5)throw Error(a(476));var f=rf(e).queue;lf(e,f,i,Y,o===null?$y:function(){return sf(e),o(s)})}function rf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:Y},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function sf(e){var i=rf(e).next.queue;Ao(e,i,{},_n())}function Fs(){return Wt(Fo)}function uf(){return Vt().memoizedState}function cf(){return Vt().memoizedState}function Hy(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=_n();e=hi(o);var s=gi(i,e,o);s!==null&&(Sn(s,i,o),xo(s,i,o)),i={cache:xs()},e.payload=i;return}i=i.return}}function qy(e,i,o){var s=_n();o={lane:s,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ol(e)?ff(i,o):(o=ds(e,i,o,s),o!==null&&(Sn(o,e,s),mf(o,i,s)))}function df(e,i,o){var s=_n();Ao(e,i,o,s)}function Ao(e,i,o,s){var f={lane:s,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ol(e))ff(i,f);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var C=i.lastRenderedState,_=h(C,o);if(f.hasEagerState=!0,f.eagerState=_,vn(_,C))return Cl(e,i,f,0),St===null&&Tl(),!1}catch{}finally{}if(o=ds(e,i,f,s),o!==null)return Sn(o,e,s),mf(o,i,s),!0}return!1}function Ys(e,i,o,s){if(s={lane:2,revertLane:Su(),action:s,hasEagerState:!1,eagerState:null,next:null},Ol(e)){if(i)throw Error(a(479))}else i=ds(e,o,s,2),i!==null&&Sn(i,e,2)}function Ol(e){var i=e.alternate;return e===ze||i!==null&&i===ze}function ff(e,i){Aa=Il=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function mf(e,i,o){if((o&4194048)!==0){var s=i.lanes;s&=e.pendingLanes,o|=s,i.lanes=o,at(e,o)}}var Gl={readContext:Wt,use:Ll,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},pf={readContext:Wt,use:Ll,useCallback:function(e,i){return cn().memoizedState=[e,i===void 0?null:i],e},useContext:Wt,useEffect:Xd,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,Pl(4194308,4,ef.bind(null,i,e),o)},useLayoutEffect:function(e,i){return Pl(4194308,4,e,i)},useInsertionEffect:function(e,i){Pl(4,2,e,i)},useMemo:function(e,i){var o=cn();i=i===void 0?null:i;var s=e();if(ta){pn(!0);try{e()}finally{pn(!1)}}return o.memoizedState=[s,i],s},useReducer:function(e,i,o){var s=cn();if(o!==void 0){var f=o(i);if(ta){pn(!0);try{o(i)}finally{pn(!1)}}}else f=i;return s.memoizedState=s.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},s.queue=e,e=e.dispatch=qy.bind(null,ze,e),[s.memoizedState,e]},useRef:function(e){var i=cn();return e={current:e},i.memoizedState=e},useState:function(e){e=$s(e);var i=e.queue,o=df.bind(null,ze,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:qs,useDeferredValue:function(e,i){var o=cn();return Bs(o,e,i)},useTransition:function(){var e=$s(!1);return e=lf.bind(null,ze,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var s=ze,f=cn();if(it){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),St===null)throw Error(a(349));(je&124)!==0||kd(s,i,o)}f.memoizedState=o;var h={value:o,getSnapshot:i};return f.queue=h,Xd(Pd.bind(null,s,h,e),[e]),s.flags|=2048,Ra(9,Ul(),Ud.bind(null,s,h,o,i),null),o},useId:function(){var e=cn(),i=St.identifierPrefix;if(it){var o=ei,s=Wn;o=(s&~(1<<32-jt(s)-1)).toString(32)+o,i="«"+i+"R"+o,o=Dl++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=Py++,i="«"+i+"r"+o.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Fs,useFormState:Fd,useActionState:Fd,useOptimistic:function(e){var i=cn();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ys.bind(null,ze,!0,o),o.dispatch=i,[e,i]},useMemoCache:Os,useCacheRefresh:function(){return cn().memoizedState=Hy.bind(null,ze)}},hf={readContext:Wt,use:Ll,useCallback:nf,useContext:Wt,useEffect:Qd,useImperativeHandle:tf,useInsertionEffect:jd,useLayoutEffect:Wd,useMemo:af,useReducer:kl,useRef:Jd,useState:function(){return kl(ii)},useDebugValue:qs,useDeferredValue:function(e,i){var o=Vt();return of(o,vt.memoizedState,e,i)},useTransition:function(){var e=kl(ii)[0],i=Vt().memoizedState;return[typeof e=="boolean"?e:bo(e),i]},useSyncExternalStore:Ld,useId:uf,useHostTransitionStatus:Fs,useFormState:Yd,useActionState:Yd,useOptimistic:function(e,i){var o=Vt();return Vd(o,vt,e,i)},useMemoCache:Os,useCacheRefresh:cf},By={readContext:Wt,use:Ll,useCallback:nf,useContext:Wt,useEffect:Qd,useImperativeHandle:tf,useInsertionEffect:jd,useLayoutEffect:Wd,useMemo:af,useReducer:Vs,useRef:Jd,useState:function(){return Vs(ii)},useDebugValue:qs,useDeferredValue:function(e,i){var o=Vt();return vt===null?Bs(o,e,i):of(o,vt.memoizedState,e,i)},useTransition:function(){var e=Vs(ii)[0],i=Vt().memoizedState;return[typeof e=="boolean"?e:bo(e),i]},useSyncExternalStore:Ld,useId:uf,useHostTransitionStatus:Fs,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,i){var o=Vt();return vt!==null?Vd(o,vt,e,i):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Os,useCacheRefresh:cf},Ma=null,wo=0;function Vl(e){var i=wo;return wo+=1,Ma===null&&(Ma=[]),bd(Ma,e,i)}function Ro(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function $l(e,i){throw i.$$typeof===E?Error(a(525)):(e=Object.prototype.toString.call(i),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function gf(e){var i=e._init;return i(e._payload)}function yf(e){function i(G,U){if(e){var V=G.deletions;V===null?(G.deletions=[U],G.flags|=16):V.push(U)}}function o(G,U){if(!e)return null;for(;U!==null;)i(G,U),U=U.sibling;return null}function s(G){for(var U=new Map;G!==null;)G.key!==null?U.set(G.key,G):U.set(G.index,G),G=G.sibling;return U}function f(G,U){return G=jn(G,U),G.index=0,G.sibling=null,G}function h(G,U,V){return G.index=V,e?(V=G.alternate,V!==null?(V=V.index,V<U?(G.flags|=67108866,U):V):(G.flags|=67108866,U)):(G.flags|=1048576,U)}function C(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function _(G,U,V,oe){return U===null||U.tag!==6?(U=ms(V,G.mode,oe),U.return=G,U):(U=f(U,V),U.return=G,U)}function M(G,U,V,oe){var Ce=V.type;return Ce===R?te(G,U,V.props.children,oe,V.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ne&&gf(Ce)===U.type)?(U=f(U,V.props),Ro(U,V),U.return=G,U):(U=El(V.type,V.key,V.props,null,G.mode,oe),Ro(U,V),U.return=G,U)}function $(G,U,V,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==V.containerInfo||U.stateNode.implementation!==V.implementation?(U=ps(V,G.mode,oe),U.return=G,U):(U=f(U,V.children||[]),U.return=G,U)}function te(G,U,V,oe,Ce){return U===null||U.tag!==7?(U=Zi(V,G.mode,oe,Ce),U.return=G,U):(U=f(U,V),U.return=G,U)}function re(G,U,V){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=ms(""+U,G.mode,V),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return V=El(U.type,U.key,U.props,null,G.mode,V),Ro(V,U),V.return=G,V;case b:return U=ps(U,G.mode,V),U.return=G,U;case ne:var oe=U._init;return U=oe(U._payload),re(G,U,V)}if(ue(U)||Z(U))return U=Zi(U,G.mode,V,null),U.return=G,U;if(typeof U.then=="function")return re(G,Vl(U),V);if(U.$$typeof===k)return re(G,Nl(G,U),V);$l(G,U)}return null}function H(G,U,V,oe){var Ce=U!==null?U.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Ce!==null?null:_(G,U,""+V,oe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return V.key===Ce?M(G,U,V,oe):null;case b:return V.key===Ce?$(G,U,V,oe):null;case ne:return Ce=V._init,V=Ce(V._payload),H(G,U,V,oe)}if(ue(V)||Z(V))return Ce!==null?null:te(G,U,V,oe,null);if(typeof V.then=="function")return H(G,U,Vl(V),oe);if(V.$$typeof===k)return H(G,U,Nl(G,V),oe);$l(G,V)}return null}function z(G,U,V,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(V)||null,_(U,G,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return G=G.get(oe.key===null?V:oe.key)||null,M(U,G,oe,Ce);case b:return G=G.get(oe.key===null?V:oe.key)||null,$(U,G,oe,Ce);case ne:var Fe=oe._init;return oe=Fe(oe._payload),z(G,U,V,oe,Ce)}if(ue(oe)||Z(oe))return G=G.get(V)||null,te(U,G,oe,Ce,null);if(typeof oe.then=="function")return z(G,U,V,Vl(oe),Ce);if(oe.$$typeof===k)return z(G,U,V,Nl(U,oe),Ce);$l(U,oe)}return null}function Le(G,U,V,oe){for(var Ce=null,Fe=null,Se=U,De=U=0,Kt=null;Se!==null&&De<V.length;De++){Se.index>De?(Kt=Se,Se=null):Kt=Se.sibling;var et=H(G,Se,V[De],oe);if(et===null){Se===null&&(Se=Kt);break}e&&Se&&et.alternate===null&&i(G,Se),U=h(et,U,De),Fe===null?Ce=et:Fe.sibling=et,Fe=et,Se=Kt}if(De===V.length)return o(G,Se),it&&Ji(G,De),Ce;if(Se===null){for(;De<V.length;De++)Se=re(G,V[De],oe),Se!==null&&(U=h(Se,U,De),Fe===null?Ce=Se:Fe.sibling=Se,Fe=Se);return it&&Ji(G,De),Ce}for(Se=s(Se);De<V.length;De++)Kt=z(Se,G,De,V[De],oe),Kt!==null&&(e&&Kt.alternate!==null&&Se.delete(Kt.key===null?De:Kt.key),U=h(Kt,U,De),Fe===null?Ce=Kt:Fe.sibling=Kt,Fe=Kt);return e&&Se.forEach(function(Li){return i(G,Li)}),it&&Ji(G,De),Ce}function Me(G,U,V,oe){if(V==null)throw Error(a(151));for(var Ce=null,Fe=null,Se=U,De=U=0,Kt=null,et=V.next();Se!==null&&!et.done;De++,et=V.next()){Se.index>De?(Kt=Se,Se=null):Kt=Se.sibling;var Li=H(G,Se,et.value,oe);if(Li===null){Se===null&&(Se=Kt);break}e&&Se&&Li.alternate===null&&i(G,Se),U=h(Li,U,De),Fe===null?Ce=Li:Fe.sibling=Li,Fe=Li,Se=Kt}if(et.done)return o(G,Se),it&&Ji(G,De),Ce;if(Se===null){for(;!et.done;De++,et=V.next())et=re(G,et.value,oe),et!==null&&(U=h(et,U,De),Fe===null?Ce=et:Fe.sibling=et,Fe=et);return it&&Ji(G,De),Ce}for(Se=s(Se);!et.done;De++,et=V.next())et=z(Se,G,De,et.value,oe),et!==null&&(e&&et.alternate!==null&&Se.delete(et.key===null?De:et.key),U=h(et,U,De),Fe===null?Ce=et:Fe.sibling=et,Fe=et);return e&&Se.forEach(function(zv){return i(G,zv)}),it&&Ji(G,De),Ce}function Ct(G,U,V,oe){if(typeof V=="object"&&V!==null&&V.type===R&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case x:e:{for(var Ce=V.key;U!==null;){if(U.key===Ce){if(Ce=V.type,Ce===R){if(U.tag===7){o(G,U.sibling),oe=f(U,V.props.children),oe.return=G,G=oe;break e}}else if(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ne&&gf(Ce)===U.type){o(G,U.sibling),oe=f(U,V.props),Ro(oe,V),oe.return=G,G=oe;break e}o(G,U);break}else i(G,U);U=U.sibling}V.type===R?(oe=Zi(V.props.children,G.mode,oe,V.key),oe.return=G,G=oe):(oe=El(V.type,V.key,V.props,null,G.mode,oe),Ro(oe,V),oe.return=G,G=oe)}return C(G);case b:e:{for(Ce=V.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===V.containerInfo&&U.stateNode.implementation===V.implementation){o(G,U.sibling),oe=f(U,V.children||[]),oe.return=G,G=oe;break e}else{o(G,U);break}else i(G,U);U=U.sibling}oe=ps(V,G.mode,oe),oe.return=G,G=oe}return C(G);case ne:return Ce=V._init,V=Ce(V._payload),Ct(G,U,V,oe)}if(ue(V))return Le(G,U,V,oe);if(Z(V)){if(Ce=Z(V),typeof Ce!="function")throw Error(a(150));return V=Ce.call(V),Me(G,U,V,oe)}if(typeof V.then=="function")return Ct(G,U,Vl(V),oe);if(V.$$typeof===k)return Ct(G,U,Nl(G,V),oe);$l(G,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,U!==null&&U.tag===6?(o(G,U.sibling),oe=f(U,V),oe.return=G,G=oe):(o(G,U),oe=ms(V,G.mode,oe),oe.return=G,G=oe),C(G)):o(G,U)}return function(G,U,V,oe){try{wo=0;var Ce=Ct(G,U,V,oe);return Ma=null,Ce}catch(Se){if(Se===To||Se===wl)throw Se;var Fe=Tn(29,Se,null,G.mode);return Fe.lanes=oe,Fe.return=G,Fe}finally{}}}var Ia=yf(!0),vf=yf(!1),Dn=j(null),qn=null;function vi(e){var i=e.alternate;le(qt,qt.current&1),le(Dn,e),qn===null&&(i===null||Na.current!==null||i.memoizedState!==null)&&(qn=e)}function Tf(e){if(e.tag===22){if(le(qt,qt.current),le(Dn,e),qn===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(qn=e)}}else Ti()}function Ti(){le(qt,qt.current),le(Dn,Dn.current)}function ai(e){K(Dn),qn===e&&(qn=null),K(qt)}var qt=j(0);function Hl(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Pu(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Zs(e,i,o,s){i=e.memoizedState,o=o(s,i),o=o==null?i:v({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ks={enqueueSetState:function(e,i,o){e=e._reactInternals;var s=_n(),f=hi(s);f.payload=i,o!=null&&(f.callback=o),i=gi(e,f,s),i!==null&&(Sn(i,e,s),xo(i,e,s))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var s=_n(),f=hi(s);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=gi(e,f,s),i!==null&&(Sn(i,e,s),xo(i,e,s))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=_n(),s=hi(o);s.tag=2,i!=null&&(s.callback=i),i=gi(e,s,o),i!==null&&(Sn(i,e,o),xo(i,e,o))}};function Cf(e,i,o,s,f,h,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,C):i.prototype&&i.prototype.isPureReactComponent?!co(o,s)||!co(f,h):!0}function xf(e,i,o,s){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,s),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,s),i.state!==e&&Ks.enqueueReplaceState(i,i.state,null)}function na(e,i){var o=i;if("ref"in i){o={};for(var s in i)s!=="ref"&&(o[s]=i[s])}if(e=e.defaultProps){o===i&&(o=v({},o));for(var f in e)o[f]===void 0&&(o[f]=e[f])}return o}var ql=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Ef(e){ql(e)}function _f(e){console.error(e)}function Sf(e){ql(e)}function Bl(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(s){setTimeout(function(){throw s})}}function bf(e,i,o){try{var s=e.onCaughtError;s(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Js(e,i,o){return o=hi(o),o.tag=3,o.payload={element:null},o.callback=function(){Bl(e,i)},o}function Nf(e){return e=hi(e),e.tag=3,e}function Af(e,i,o,s){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var h=s.value;e.payload=function(){return f(h)},e.callback=function(){bf(i,o,s)}}var C=o.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){bf(i,o,s),typeof f!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})})}function zy(e,i,o,s,f){if(o.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(i=o.alternate,i!==null&&go(i,o,f,!0),o=Dn.current,o!==null){switch(o.tag){case 13:return qn===null?Tu():o.alternate===null&&Lt===0&&(Lt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,s===Ss?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([s]):i.add(s),xu(e,s,f)),!1;case 22:return o.flags|=65536,s===Ss?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([s])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([s]):o.add(s)),xu(e,s,f)),!1}throw Error(a(435,o.tag))}return xu(e,s,f),Tu(),!1}if(it)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,s!==ys&&(e=Error(a(422),{cause:s}),ho(wn(e,o)))):(s!==ys&&(i=Error(a(423),{cause:s}),ho(wn(i,o))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,s=wn(s,o),f=Js(e.stateNode,s,f),As(e,f),Lt!==4&&(Lt=2)),!1;var h=Error(a(520),{cause:s});if(h=wn(h,o),Po===null?Po=[h]:Po.push(h),Lt!==4&&(Lt=2),i===null)return!0;s=wn(s,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=f&-f,o.lanes|=e,e=Js(o.stateNode,s,e),As(o,e),!1;case 1:if(i=o.type,h=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(bi===null||!bi.has(h))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Nf(f),Af(f,e,o,s),As(o,f),!1}o=o.return}while(o!==null);return!1}var wf=Error(a(461)),Yt=!1;function Jt(e,i,o,s){i.child=e===null?vf(i,null,o,s):Ia(i,e.child,o,s)}function Rf(e,i,o,s,f){o=o.render;var h=i.ref;if("ref"in s){var C={};for(var _ in s)_!=="ref"&&(C[_]=s[_])}else C=s;return Wi(i),s=Ds(e,i,o,C,h,f),_=Ls(),e!==null&&!Yt?(ks(e,i,f),oi(e,i,f)):(it&&_&&hs(i),i.flags|=1,Jt(e,i,s,f),i.child)}function Mf(e,i,o,s,f){if(e===null){var h=o.type;return typeof h=="function"&&!fs(h)&&h.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=h,If(e,i,h,s,f)):(e=El(o.type,null,s,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(h=e.child,!iu(e,f)){var C=h.memoizedProps;if(o=o.compare,o=o!==null?o:co,o(C,s)&&e.ref===i.ref)return oi(e,i,f)}return i.flags|=1,e=jn(h,s),e.ref=i.ref,e.return=i,i.child=e}function If(e,i,o,s,f){if(e!==null){var h=e.memoizedProps;if(co(h,s)&&e.ref===i.ref)if(Yt=!1,i.pendingProps=s=h,iu(e,f))(e.flags&131072)!==0&&(Yt=!0);else return i.lanes=e.lanes,oi(e,i,f)}return Xs(e,i,o,s,f)}function Df(e,i,o){var s=i.pendingProps,f=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((i.flags&128)!==0){if(s=h!==null?h.baseLanes|o:o,e!==null){for(f=i.child=e.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;i.childLanes=h&~s}else i.childLanes=0,i.child=null;return Lf(e,i,s,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Al(i,h!==null?h.cachePool:null),h!==null?Md(i,h):Rs(),Tf(i);else return i.lanes=i.childLanes=536870912,Lf(e,i,h!==null?h.baseLanes|o:o,o)}else h!==null?(Al(i,h.cachePool),Md(i,h),Ti(),i.memoizedState=null):(e!==null&&Al(i,null),Rs(),Ti());return Jt(e,i,f,o),i.child}function Lf(e,i,o,s){var f=_s();return f=f===null?null:{parent:Ht._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},e!==null&&Al(i,null),Rs(),Tf(i),e!==null&&go(e,i,s,!0),null}function zl(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(i.flags|=4194816)}}function Xs(e,i,o,s,f){return Wi(i),o=Ds(e,i,o,s,void 0,f),s=Ls(),e!==null&&!Yt?(ks(e,i,f),oi(e,i,f)):(it&&s&&hs(i),i.flags|=1,Jt(e,i,o,f),i.child)}function kf(e,i,o,s,f,h){return Wi(i),i.updateQueue=null,o=Dd(i,s,o,f),Id(e),s=Ls(),e!==null&&!Yt?(ks(e,i,h),oi(e,i,h)):(it&&s&&hs(i),i.flags|=1,Jt(e,i,o,h),i.child)}function Uf(e,i,o,s,f){if(Wi(i),i.stateNode===null){var h=xa,C=o.contextType;typeof C=="object"&&C!==null&&(h=Wt(C)),h=new o(s,h),i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Ks,i.stateNode=h,h._reactInternals=i,h=i.stateNode,h.props=s,h.state=i.memoizedState,h.refs={},bs(i),C=o.contextType,h.context=typeof C=="object"&&C!==null?Wt(C):xa,h.state=i.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(Zs(i,o,C,s),h.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(C=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),C!==h.state&&Ks.enqueueReplaceState(h,h.state,null),_o(i,s,h,f),Eo(),h.state=i.memoizedState),typeof h.componentDidMount=="function"&&(i.flags|=4194308),s=!0}else if(e===null){h=i.stateNode;var _=i.memoizedProps,M=na(o,_);h.props=M;var $=h.context,te=o.contextType;C=xa,typeof te=="object"&&te!==null&&(C=Wt(te));var re=o.getDerivedStateFromProps;te=typeof re=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,te||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||$!==C)&&xf(i,h,s,C),pi=!1;var H=i.memoizedState;h.state=H,_o(i,s,h,f),Eo(),$=i.memoizedState,_||H!==$||pi?(typeof re=="function"&&(Zs(i,o,re,s),$=i.memoizedState),(M=pi||Cf(i,o,M,s,H,$,C))?(te||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(i.flags|=4194308)):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=s,i.memoizedState=$),h.props=s,h.state=$,h.context=C,s=M):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),s=!1)}else{h=i.stateNode,Ns(e,i),C=i.memoizedProps,te=na(o,C),h.props=te,re=i.pendingProps,H=h.context,$=o.contextType,M=xa,typeof $=="object"&&$!==null&&(M=Wt($)),_=o.getDerivedStateFromProps,($=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(C!==re||H!==M)&&xf(i,h,s,M),pi=!1,H=i.memoizedState,h.state=H,_o(i,s,h,f),Eo();var z=i.memoizedState;C!==re||H!==z||pi||e!==null&&e.dependencies!==null&&bl(e.dependencies)?(typeof _=="function"&&(Zs(i,o,_,s),z=i.memoizedState),(te=pi||Cf(i,o,te,s,H,z,M)||e!==null&&e.dependencies!==null&&bl(e.dependencies))?($||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,z,M),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,z,M)),typeof h.componentDidUpdate=="function"&&(i.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof h.componentDidUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=s,i.memoizedState=z),h.props=s,h.state=z,h.context=M,s=te):(typeof h.componentDidUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),s=!1)}return h=s,zl(e,i),s=(i.flags&128)!==0,h||s?(h=i.stateNode,o=s&&typeof o.getDerivedStateFromError!="function"?null:h.render(),i.flags|=1,e!==null&&s?(i.child=Ia(i,e.child,null,f),i.child=Ia(i,null,o,f)):Jt(e,i,o,f),i.memoizedState=h.state,e=i.child):e=oi(e,i,f),e}function Pf(e,i,o,s){return po(),i.flags|=256,Jt(e,i,o,s),i.child}var Qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function js(e){return{baseLanes:e,cachePool:Ed()}}function Ws(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Ln),e}function Of(e,i,o){var s=i.pendingProps,f=!1,h=(i.flags&128)!==0,C;if((C=h)||(C=e!==null&&e.memoizedState===null?!1:(qt.current&2)!==0),C&&(f=!0,i.flags&=-129),C=(i.flags&32)!==0,i.flags&=-33,e===null){if(it){if(f?vi(i):Ti(),it){var _=Dt,M;if(M=_){e:{for(M=_,_=Hn;M.nodeType!==8;){if(!_){_=null;break e}if(M=Gn(M.nextSibling),M===null){_=null;break e}}_=M}_!==null?(i.memoizedState={dehydrated:_,treeContext:Ki!==null?{id:Wn,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},M=Tn(18,null,null,0),M.stateNode=_,M.return=i,i.child=M,on=i,Dt=null,M=!0):M=!1}M||Qi(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Pu(_)?i.lanes=32:i.lanes=536870912,null;ai(i)}return _=s.children,s=s.fallback,f?(Ti(),f=i.mode,_=Fl({mode:"hidden",children:_},f),s=Zi(s,f,o,null),_.return=i,s.return=i,_.sibling=s,i.child=_,f=i.child,f.memoizedState=js(o),f.childLanes=Ws(e,C,o),i.memoizedState=Qs,s):(vi(i),eu(i,_))}if(M=e.memoizedState,M!==null&&(_=M.dehydrated,_!==null)){if(h)i.flags&256?(vi(i),i.flags&=-257,i=tu(e,i,o)):i.memoizedState!==null?(Ti(),i.child=e.child,i.flags|=128,i=null):(Ti(),f=s.fallback,_=i.mode,s=Fl({mode:"visible",children:s.children},_),f=Zi(f,_,o,null),f.flags|=2,s.return=i,f.return=i,s.sibling=f,i.child=s,Ia(i,e.child,null,o),s=i.child,s.memoizedState=js(o),s.childLanes=Ws(e,C,o),i.memoizedState=Qs,i=f);else if(vi(i),Pu(_)){if(C=_.nextSibling&&_.nextSibling.dataset,C)var $=C.dgst;C=$,s=Error(a(419)),s.stack="",s.digest=C,ho({value:s,source:null,stack:null}),i=tu(e,i,o)}else if(Yt||go(e,i,o,!1),C=(o&e.childLanes)!==0,Yt||C){if(C=St,C!==null&&(s=o&-o,s=(s&42)!==0?1:Qe(s),s=(s&(C.suspendedLanes|o))!==0?0:s,s!==0&&s!==M.retryLane))throw M.retryLane=s,Ca(e,s),Sn(C,e,s),wf;_.data==="$?"||Tu(),i=tu(e,i,o)}else _.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=M.treeContext,Dt=Gn(_.nextSibling),on=i,it=!0,Xi=null,Hn=!1,e!==null&&(Mn[In++]=Wn,Mn[In++]=ei,Mn[In++]=Ki,Wn=e.id,ei=e.overflow,Ki=i),i=eu(i,s.children),i.flags|=4096);return i}return f?(Ti(),f=s.fallback,_=i.mode,M=e.child,$=M.sibling,s=jn(M,{mode:"hidden",children:s.children}),s.subtreeFlags=M.subtreeFlags&65011712,$!==null?f=jn($,f):(f=Zi(f,_,o,null),f.flags|=2),f.return=i,s.return=i,s.sibling=f,i.child=s,s=f,f=i.child,_=e.child.memoizedState,_===null?_=js(o):(M=_.cachePool,M!==null?($=Ht._currentValue,M=M.parent!==$?{parent:$,pool:$}:M):M=Ed(),_={baseLanes:_.baseLanes|o,cachePool:M}),f.memoizedState=_,f.childLanes=Ws(e,C,o),i.memoizedState=Qs,s):(vi(i),o=e.child,e=o.sibling,o=jn(o,{mode:"visible",children:s.children}),o.return=i,o.sibling=null,e!==null&&(C=i.deletions,C===null?(i.deletions=[e],i.flags|=16):C.push(e)),i.child=o,i.memoizedState=null,o)}function eu(e,i){return i=Fl({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Fl(e,i){return e=Tn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function tu(e,i,o){return Ia(i,e.child,null,o),e=eu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Gf(e,i,o){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i),Ts(e.return,i,o)}function nu(e,i,o,s,f){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:f}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=o,h.tailMode=f)}function Vf(e,i,o){var s=i.pendingProps,f=s.revealOrder,h=s.tail;if(Jt(e,i,s.children,o),s=qt.current,(s&2)!==0)s=s&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gf(e,o,i);else if(e.tag===19)Gf(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(le(qt,s),f){case"forwards":for(o=i.child,f=null;o!==null;)e=o.alternate,e!==null&&Hl(e)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),nu(i,!1,f,o,h);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Hl(e)===null){i.child=f;break}e=f.sibling,f.sibling=o,o=f,f=e}nu(i,!0,o,null,h);break;case"together":nu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function oi(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),Si|=i.lanes,(o&i.childLanes)===0)if(e!==null){if(go(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(a(153));if(i.child!==null){for(e=i.child,o=jn(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=jn(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function iu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&bl(e)))}function Fy(e,i,o){switch(i.tag){case 3:ge(i,i.stateNode.containerInfo),mi(i,Ht,e.memoizedState.cache),po();break;case 27:case 5:Ne(i);break;case 4:ge(i,i.stateNode.containerInfo);break;case 10:mi(i,i.type,i.memoizedProps.value);break;case 13:var s=i.memoizedState;if(s!==null)return s.dehydrated!==null?(vi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Of(e,i,o):(vi(i),e=oi(e,i,o),e!==null?e.sibling:null);vi(i);break;case 19:var f=(e.flags&128)!==0;if(s=(o&i.childLanes)!==0,s||(go(e,i,o,!1),s=(o&i.childLanes)!==0),f){if(s)return Vf(e,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(qt,qt.current),s)break;return null;case 22:case 23:return i.lanes=0,Df(e,i,o);case 24:mi(i,Ht,e.memoizedState.cache)}return oi(e,i,o)}function $f(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)Yt=!0;else{if(!iu(e,o)&&(i.flags&128)===0)return Yt=!1,Fy(e,i,o);Yt=(e.flags&131072)!==0}else Yt=!1,it&&(i.flags&1048576)!==0&&hd(i,Sl,i.index);switch(i.lanes=0,i.tag){case 16:e:{e=i.pendingProps;var s=i.elementType,f=s._init;if(s=f(s._payload),i.type=s,typeof s=="function")fs(s)?(e=na(s,e),i.tag=1,i=Uf(null,i,s,e,o)):(i.tag=0,i=Xs(null,i,s,e,o));else{if(s!=null){if(f=s.$$typeof,f===w){i.tag=11,i=Rf(null,i,s,e,o);break e}else if(f===W){i.tag=14,i=Mf(null,i,s,e,o);break e}}throw i=se(s)||s,Error(a(306,i,""))}}return i;case 0:return Xs(e,i,i.type,i.pendingProps,o);case 1:return s=i.type,f=na(s,i.pendingProps),Uf(e,i,s,f,o);case 3:e:{if(ge(i,i.stateNode.containerInfo),e===null)throw Error(a(387));s=i.pendingProps;var h=i.memoizedState;f=h.element,Ns(e,i),_o(i,s,null,o);var C=i.memoizedState;if(s=C.cache,mi(i,Ht,s),s!==h.cache&&Cs(i,[Ht],o,!0),Eo(),s=C.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:C.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=Pf(e,i,s,o);break e}else if(s!==f){f=wn(Error(a(424)),i),ho(f),i=Pf(e,i,s,o);break e}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Dt=Gn(e.firstChild),on=i,it=!0,Xi=null,Hn=!0,o=vf(i,null,s,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(po(),s===f){i=oi(e,i,o);break e}Jt(e,i,s,o)}i=i.child}return i;case 26:return zl(e,i),e===null?(o=zm(i.type,null,i.pendingProps,null))?i.memoizedState=o:it||(o=i.type,e=i.pendingProps,s=or(J.current).createElement(o),s[nt]=i,s[lt]=e,Qt(s,o,e),Ke(s),i.stateNode=s):i.memoizedState=zm(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Ne(i),e===null&&it&&(s=i.stateNode=Hm(i.type,i.pendingProps,J.current),on=i,Hn=!0,f=Dt,wi(i.type)?(Ou=f,Dt=Gn(s.firstChild)):Dt=f),Jt(e,i,i.pendingProps.children,o),zl(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&it&&((f=s=Dt)&&(s=Tv(s,i.type,i.pendingProps,Hn),s!==null?(i.stateNode=s,on=i,Dt=Gn(s.firstChild),Hn=!1,f=!0):f=!1),f||Qi(i)),Ne(i),f=i.type,h=i.pendingProps,C=e!==null?e.memoizedProps:null,s=h.children,Lu(f,h)?s=null:C!==null&&Lu(f,C)&&(i.flags|=32),i.memoizedState!==null&&(f=Ds(e,i,Oy,null,null,o),Fo._currentValue=f),zl(e,i),Jt(e,i,s,o),i.child;case 6:return e===null&&it&&((e=o=Dt)&&(o=Cv(o,i.pendingProps,Hn),o!==null?(i.stateNode=o,on=i,Dt=null,e=!0):e=!1),e||Qi(i)),null;case 13:return Of(e,i,o);case 4:return ge(i,i.stateNode.containerInfo),s=i.pendingProps,e===null?i.child=Ia(i,null,s,o):Jt(e,i,s,o),i.child;case 11:return Rf(e,i,i.type,i.pendingProps,o);case 7:return Jt(e,i,i.pendingProps,o),i.child;case 8:return Jt(e,i,i.pendingProps.children,o),i.child;case 12:return Jt(e,i,i.pendingProps.children,o),i.child;case 10:return s=i.pendingProps,mi(i,i.type,s.value),Jt(e,i,s.children,o),i.child;case 9:return f=i.type._context,s=i.pendingProps.children,Wi(i),f=Wt(f),s=s(f),i.flags|=1,Jt(e,i,s,o),i.child;case 14:return Mf(e,i,i.type,i.pendingProps,o);case 15:return If(e,i,i.type,i.pendingProps,o);case 19:return Vf(e,i,o);case 31:return s=i.pendingProps,o=i.mode,s={mode:s.mode,children:s.children},e===null?(o=Fl(s,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=jn(e.child,s),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Df(e,i,o);case 24:return Wi(i),s=Wt(Ht),e===null?(f=_s(),f===null&&(f=St,h=xs(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=o),f=h),i.memoizedState={parent:s,cache:f},bs(i),mi(i,Ht,f)):((e.lanes&o)!==0&&(Ns(e,i),_o(i,null,null,o),Eo()),f=e.memoizedState,h=i.memoizedState,f.parent!==s?(f={parent:s,cache:s},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),mi(i,Ht,s)):(s=h.cache,mi(i,Ht,s),s!==f.cache&&Cs(i,[Ht],o,!0))),Jt(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function li(e){e.flags|=4}function Hf(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jm(i)){if(i=Dn.current,i!==null&&((je&4194048)===je?qn!==null:(je&62914560)!==je&&(je&536870912)===0||i!==qn))throw Co=Ss,_d;e.flags|=8192}}function Yl(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ut():536870912,e.lanes|=i,Ua|=i)}function Mo(e,i){if(!it)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function wt(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(i)for(var f=e.child;f!==null;)o|=f.lanes|f.childLanes,s|=f.subtreeFlags&65011712,s|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)o|=f.lanes|f.childLanes,s|=f.subtreeFlags,s|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=s,e.childLanes=o,i}function Yy(e,i,o){var s=i.pendingProps;switch(gs(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(i),null;case 1:return wt(i),null;case 3:return o=i.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),ni(Ht),F(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(mo(i)?li(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,vd())),wt(i),null;case 26:return o=i.memoizedState,e===null?(li(i),o!==null?(wt(i),Hf(i,o)):(wt(i),i.flags&=-16777217)):o?o!==e.memoizedState?(li(i),wt(i),Hf(i,o)):(wt(i),i.flags&=-16777217):(e.memoizedProps!==s&&li(i),wt(i),i.flags&=-16777217),null;case 27:ye(i),o=J.current;var f=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==s&&li(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return wt(i),null}e=fe.current,mo(i)?gd(i):(e=Hm(f,s,o),i.stateNode=e,li(i))}return wt(i),null;case 5:if(ye(i),o=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==s&&li(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return wt(i),null}if(e=fe.current,mo(i))gd(i);else{switch(f=or(J.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?f.createElement("select",{is:s.is}):f.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?f.createElement(o,{is:s.is}):f.createElement(o)}}e[nt]=i,e[lt]=s;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=e;e:switch(Qt(e,o,s),o){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&li(i)}}return wt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==s&&li(i);else{if(typeof s!="string"&&i.stateNode===null)throw Error(a(166));if(e=J.current,mo(i)){if(e=i.stateNode,o=i.memoizedProps,s=null,f=on,f!==null)switch(f.tag){case 27:case 5:s=f.memoizedProps}e[nt]=i,e=!!(e.nodeValue===o||s!==null&&s.suppressHydrationWarning===!0||km(e.nodeValue,o)),e||Qi(i)}else e=or(e).createTextNode(s),e[nt]=i,i.stateNode=e}return wt(i),null;case 13:if(s=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=mo(i),s!==null&&s.dehydrated!==null){if(e===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[nt]=i}else po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),f=!1}else f=vd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ai(i),i):(ai(i),null)}if(ai(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=s!==null,e=e!==null&&e.memoizedState!==null,o){s=i.child,f=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(f=s.alternate.memoizedState.cachePool.pool);var h=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==f&&(s.flags|=2048)}return o!==e&&o&&(i.child.flags|=8192),Yl(i,i.updateQueue),wt(i),null;case 4:return F(),e===null&&wu(i.stateNode.containerInfo),wt(i),null;case 10:return ni(i.type),wt(i),null;case 19:if(K(qt),f=i.memoizedState,f===null)return wt(i),null;if(s=(i.flags&128)!==0,h=f.rendering,h===null)if(s)Mo(f,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(h=Hl(e),h!==null){for(i.flags|=128,Mo(f,!1),e=h.updateQueue,i.updateQueue=e,Yl(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)pd(o,e),o=o.sibling;return le(qt,qt.current&1|2),i.child}e=e.sibling}f.tail!==null&&pt()>Jl&&(i.flags|=128,s=!0,Mo(f,!1),i.lanes=4194304)}else{if(!s)if(e=Hl(h),e!==null){if(i.flags|=128,s=!0,e=e.updateQueue,i.updateQueue=e,Yl(i,e),Mo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!h.alternate&&!it)return wt(i),null}else 2*pt()-f.renderingStartTime>Jl&&o!==536870912&&(i.flags|=128,s=!0,Mo(f,!1),i.lanes=4194304);f.isBackwards?(h.sibling=i.child,i.child=h):(e=f.last,e!==null?e.sibling=h:i.child=h,f.last=h)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=pt(),i.sibling=null,e=qt.current,le(qt,s?e&1|2:e&1),i):(wt(i),null);case 22:case 23:return ai(i),Ms(),s=i.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(i.flags|=8192):s&&(i.flags|=8192),s?(o&536870912)!==0&&(i.flags&128)===0&&(wt(i),i.subtreeFlags&6&&(i.flags|=8192)):wt(i),o=i.updateQueue,o!==null&&Yl(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048),e!==null&&K(ea),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ni(Ht),wt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Zy(e,i){switch(gs(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ni(Ht),F(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return ye(i),null;case 13:if(ai(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(a(340));po()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return K(qt),null;case 4:return F(),null;case 10:return ni(i.type),null;case 22:case 23:return ai(i),Ms(),e!==null&&K(ea),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ni(Ht),null;case 25:return null;default:return null}}function qf(e,i){switch(gs(i),i.tag){case 3:ni(Ht),F();break;case 26:case 27:case 5:ye(i);break;case 4:F();break;case 13:ai(i);break;case 19:K(qt);break;case 10:ni(i.type);break;case 22:case 23:ai(i),Ms(),e!==null&&K(ea);break;case 24:ni(Ht)}}function Io(e,i){try{var o=i.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var f=s.next;o=f;do{if((o.tag&e)===e){s=void 0;var h=o.create,C=o.inst;s=h(),C.destroy=s}o=o.next}while(o!==f)}}catch(_){xt(i,i.return,_)}}function Ci(e,i,o){try{var s=i.updateQueue,f=s!==null?s.lastEffect:null;if(f!==null){var h=f.next;s=h;do{if((s.tag&e)===e){var C=s.inst,_=C.destroy;if(_!==void 0){C.destroy=void 0,f=i;var M=o,$=_;try{$()}catch(te){xt(f,M,te)}}}s=s.next}while(s!==h)}}catch(te){xt(i,i.return,te)}}function Bf(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{Rd(i,o)}catch(s){xt(e,e.return,s)}}}function zf(e,i,o){o.props=na(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(s){xt(e,i,s)}}function Do(e,i){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof o=="function"?e.refCleanup=o(s):o.current=s}}catch(f){xt(e,i,f)}}function Bn(e,i){var o=e.ref,s=e.refCleanup;if(o!==null)if(typeof s=="function")try{s()}catch(f){xt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){xt(e,i,f)}else o.current=null}function Ff(e){var i=e.type,o=e.memoizedProps,s=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break e;case"img":o.src?s.src=o.src:o.srcSet&&(s.srcset=o.srcSet)}}catch(f){xt(e,e.return,f)}}function au(e,i,o){try{var s=e.stateNode;pv(s,e.type,o,i),s[lt]=i}catch(f){xt(e,e.return,f)}}function Yf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wi(e.type)||e.tag===4}function ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lu(e,i,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(e),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ar));else if(s!==4&&(s===27&&wi(e.type)&&(o=e.stateNode,i=null),e=e.child,e!==null))for(lu(e,i,o),e=e.sibling;e!==null;)lu(e,i,o),e=e.sibling}function Zl(e,i,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(s!==4&&(s===27&&wi(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Zl(e,i,o),e=e.sibling;e!==null;)Zl(e,i,o),e=e.sibling}function Zf(e){var i=e.stateNode,o=e.memoizedProps;try{for(var s=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Qt(i,s,o),i[nt]=e,i[lt]=o}catch(h){xt(e,e.return,h)}}var ri=!1,Ot=!1,ru=!1,Kf=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Ky(e,i){if(e=e.containerInfo,Iu=dr,e=ad(e),os(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var f=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var C=0,_=-1,M=-1,$=0,te=0,re=e,H=null;t:for(;;){for(var z;re!==o||f!==0&&re.nodeType!==3||(_=C+f),re!==h||s!==0&&re.nodeType!==3||(M=C+s),re.nodeType===3&&(C+=re.nodeValue.length),(z=re.firstChild)!==null;)H=re,re=z;for(;;){if(re===e)break t;if(H===o&&++$===f&&(_=C),H===h&&++te===s&&(M=C),(z=re.nextSibling)!==null)break;re=H,H=re.parentNode}re=z}o=_===-1||M===-1?null:{start:_,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(Du={focusedElem:e,selectionRange:o},dr=!1,Zt=i;Zt!==null;)if(i=Zt,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Zt=e;else for(;Zt!==null;){switch(i=Zt,h=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,o=i,f=h.memoizedProps,h=h.memoizedState,s=o.stateNode;try{var Le=na(o.type,f,o.elementType===o.type);e=s.getSnapshotBeforeUpdate(Le,h),s.__reactInternalSnapshotBeforeUpdate=e}catch(Me){xt(o,o.return,Me)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)Uu(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=i.sibling,e!==null){e.return=i.return,Zt=e;break}Zt=i.return}}function Jf(e,i,o){var s=o.flags;switch(o.tag){case 0:case 11:case 15:xi(e,o),s&4&&Io(5,o);break;case 1:if(xi(e,o),s&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(C){xt(o,o.return,C)}else{var f=na(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(C){xt(o,o.return,C)}}s&64&&Bf(o),s&512&&Do(o,o.return);break;case 3:if(xi(e,o),s&64&&(e=o.updateQueue,e!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Rd(e,i)}catch(C){xt(o,o.return,C)}}break;case 27:i===null&&s&4&&Zf(o);case 26:case 5:xi(e,o),i===null&&s&4&&Ff(o),s&512&&Do(o,o.return);break;case 12:xi(e,o);break;case 13:xi(e,o),s&4&&jf(e,o),s&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=iv.bind(null,o),xv(e,o))));break;case 22:if(s=o.memoizedState!==null||ri,!s){i=i!==null&&i.memoizedState!==null||Ot,f=ri;var h=Ot;ri=s,(Ot=i)&&!h?Ei(e,o,(o.subtreeFlags&8772)!==0):xi(e,o),ri=f,Ot=h}break;case 30:break;default:xi(e,o)}}function Xf(e){var i=e.alternate;i!==null&&(e.alternate=null,Xf(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&We(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nt=null,dn=!1;function si(e,i,o){for(o=o.child;o!==null;)Qf(e,i,o),o=o.sibling}function Qf(e,i,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount($n,o)}catch{}switch(o.tag){case 26:Ot||Bn(o,i),si(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ot||Bn(o,i);var s=Nt,f=dn;wi(o.type)&&(Nt=o.stateNode,dn=!1),si(e,i,o),Ho(o.stateNode),Nt=s,dn=f;break;case 5:Ot||Bn(o,i);case 6:if(s=Nt,f=dn,Nt=null,si(e,i,o),Nt=s,dn=f,Nt!==null)if(dn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(o.stateNode)}catch(h){xt(o,i,h)}else try{Nt.removeChild(o.stateNode)}catch(h){xt(o,i,h)}break;case 18:Nt!==null&&(dn?(e=Nt,Vm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),Jo(e)):Vm(Nt,o.stateNode));break;case 4:s=Nt,f=dn,Nt=o.stateNode.containerInfo,dn=!0,si(e,i,o),Nt=s,dn=f;break;case 0:case 11:case 14:case 15:Ot||Ci(2,o,i),Ot||Ci(4,o,i),si(e,i,o);break;case 1:Ot||(Bn(o,i),s=o.stateNode,typeof s.componentWillUnmount=="function"&&zf(o,i,s)),si(e,i,o);break;case 21:si(e,i,o);break;case 22:Ot=(s=Ot)||o.memoizedState!==null,si(e,i,o),Ot=s;break;default:si(e,i,o)}}function jf(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Jo(e)}catch(o){xt(i,i.return,o)}}function Jy(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Kf),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Kf),i;default:throw Error(a(435,e.tag))}}function su(e,i){var o=Jy(e);i.forEach(function(s){var f=av.bind(null,e,s);o.has(s)||(o.add(s),s.then(f,f))})}function Cn(e,i){var o=i.deletions;if(o!==null)for(var s=0;s<o.length;s++){var f=o[s],h=e,C=i,_=C;e:for(;_!==null;){switch(_.tag){case 27:if(wi(_.type)){Nt=_.stateNode,dn=!1;break e}break;case 5:Nt=_.stateNode,dn=!1;break e;case 3:case 4:Nt=_.stateNode.containerInfo,dn=!0;break e}_=_.return}if(Nt===null)throw Error(a(160));Qf(h,C,f),Nt=null,dn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Wf(i,e),i=i.sibling}var On=null;function Wf(e,i){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Cn(i,e),xn(e),s&4&&(Ci(3,e,e.return),Io(3,e),Ci(5,e,e.return));break;case 1:Cn(i,e),xn(e),s&512&&(Ot||o===null||Bn(o,o.return)),s&64&&ri&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?s:o.concat(s))));break;case 26:var f=On;if(Cn(i,e),xn(e),s&512&&(Ot||o===null||Bn(o,o.return)),s&4){var h=o!==null?o.memoizedState:null;if(s=e.memoizedState,o===null)if(s===null)if(e.stateNode===null){e:{s=e.type,o=e.memoizedProps,f=f.ownerDocument||f;t:switch(s){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Bi]||h[nt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(s),f.head.insertBefore(h,f.querySelector("head > title"))),Qt(h,s,o),h[nt]=e,Ke(h),s=h;break e;case"link":var C=Zm("link","href",f).get(s+(o.href||""));if(C){for(var _=0;_<C.length;_++)if(h=C[_],h.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&h.getAttribute("rel")===(o.rel==null?null:o.rel)&&h.getAttribute("title")===(o.title==null?null:o.title)&&h.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){C.splice(_,1);break t}}h=f.createElement(s),Qt(h,s,o),f.head.appendChild(h);break;case"meta":if(C=Zm("meta","content",f).get(s+(o.content||""))){for(_=0;_<C.length;_++)if(h=C[_],h.getAttribute("content")===(o.content==null?null:""+o.content)&&h.getAttribute("name")===(o.name==null?null:o.name)&&h.getAttribute("property")===(o.property==null?null:o.property)&&h.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&h.getAttribute("charset")===(o.charSet==null?null:o.charSet)){C.splice(_,1);break t}}h=f.createElement(s),Qt(h,s,o),f.head.appendChild(h);break;default:throw Error(a(468,s))}h[nt]=e,Ke(h),s=h}e.stateNode=s}else Km(f,e.type,e.stateNode);else e.stateNode=Ym(f,s,e.memoizedProps);else h!==s?(h===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):h.count--,s===null?Km(f,e.type,e.stateNode):Ym(f,s,e.memoizedProps)):s===null&&e.stateNode!==null&&au(e,e.memoizedProps,o.memoizedProps)}break;case 27:Cn(i,e),xn(e),s&512&&(Ot||o===null||Bn(o,o.return)),o!==null&&s&4&&au(e,e.memoizedProps,o.memoizedProps);break;case 5:if(Cn(i,e),xn(e),s&512&&(Ot||o===null||Bn(o,o.return)),e.flags&32){f=e.stateNode;try{ma(f,"")}catch(z){xt(e,e.return,z)}}s&4&&e.stateNode!=null&&(f=e.memoizedProps,au(e,f,o!==null?o.memoizedProps:f)),s&1024&&(ru=!0);break;case 6:if(Cn(i,e),xn(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,o=e.stateNode;try{o.nodeValue=s}catch(z){xt(e,e.return,z)}}break;case 3:if(sr=null,f=On,On=lr(i.containerInfo),Cn(i,e),On=f,xn(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{Jo(i.containerInfo)}catch(z){xt(e,e.return,z)}ru&&(ru=!1,em(e));break;case 4:s=On,On=lr(e.stateNode.containerInfo),Cn(i,e),xn(e),On=s;break;case 12:Cn(i,e),xn(e);break;case 13:Cn(i,e),xn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(pu=pt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,su(e,s)));break;case 22:f=e.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,$=ri,te=Ot;if(ri=$||f,Ot=te||M,Cn(i,e),Ot=te,ri=$,xn(e),s&8192)e:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||M||ri||Ot||ia(e)),o=null,i=e;;){if(i.tag===5||i.tag===26){if(o===null){M=o=i;try{if(h=M.stateNode,f)C=h.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{_=M.stateNode;var re=M.memoizedProps.style,H=re!=null&&re.hasOwnProperty("display")?re.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(z){xt(M,M.return,z)}}}else if(i.tag===6){if(o===null){M=i;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(z){xt(M,M.return,z)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}s&4&&(s=e.updateQueue,s!==null&&(o=s.retryQueue,o!==null&&(s.retryQueue=null,su(e,o))));break;case 19:Cn(i,e),xn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,su(e,s)));break;case 30:break;case 21:break;default:Cn(i,e),xn(e)}}function xn(e){var i=e.flags;if(i&2){try{for(var o,s=e.return;s!==null;){if(Yf(s)){o=s;break}s=s.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,h=ou(e);Zl(e,h,f);break;case 5:var C=o.stateNode;o.flags&32&&(ma(C,""),o.flags&=-33);var _=ou(e);Zl(e,_,C);break;case 3:case 4:var M=o.stateNode.containerInfo,$=ou(e);lu(e,$,M);break;default:throw Error(a(161))}}catch(te){xt(e,e.return,te)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function em(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;em(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function xi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jf(e,i.alternate,i),i=i.sibling}function ia(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ci(4,i,i.return),ia(i);break;case 1:Bn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&zf(i,i.return,o),ia(i);break;case 27:Ho(i.stateNode);case 26:case 5:Bn(i,i.return),ia(i);break;case 22:i.memoizedState===null&&ia(i);break;case 30:ia(i);break;default:ia(i)}e=e.sibling}}function Ei(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var s=i.alternate,f=e,h=i,C=h.flags;switch(h.tag){case 0:case 11:case 15:Ei(f,h,o),Io(4,h);break;case 1:if(Ei(f,h,o),s=h,f=s.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){xt(s,s.return,$)}if(s=h,f=s.updateQueue,f!==null){var _=s.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)wd(M[f],_)}catch($){xt(s,s.return,$)}}o&&C&64&&Bf(h),Do(h,h.return);break;case 27:Zf(h);case 26:case 5:Ei(f,h,o),o&&s===null&&C&4&&Ff(h),Do(h,h.return);break;case 12:Ei(f,h,o);break;case 13:Ei(f,h,o),o&&C&4&&jf(f,h);break;case 22:h.memoizedState===null&&Ei(f,h,o),Do(h,h.return);break;case 30:break;default:Ei(f,h,o)}i=i.sibling}}function uu(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&yo(o))}function cu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&yo(e))}function zn(e,i,o,s){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)tm(e,i,o,s),i=i.sibling}function tm(e,i,o,s){var f=i.flags;switch(i.tag){case 0:case 11:case 15:zn(e,i,o,s),f&2048&&Io(9,i);break;case 1:zn(e,i,o,s);break;case 3:zn(e,i,o,s),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&yo(e)));break;case 12:if(f&2048){zn(e,i,o,s),e=i.stateNode;try{var h=i.memoizedProps,C=h.id,_=h.onPostCommit;typeof _=="function"&&_(C,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){xt(i,i.return,M)}}else zn(e,i,o,s);break;case 13:zn(e,i,o,s);break;case 23:break;case 22:h=i.stateNode,C=i.alternate,i.memoizedState!==null?h._visibility&2?zn(e,i,o,s):Lo(e,i):h._visibility&2?zn(e,i,o,s):(h._visibility|=2,Da(e,i,o,s,(i.subtreeFlags&10256)!==0)),f&2048&&uu(C,i);break;case 24:zn(e,i,o,s),f&2048&&cu(i.alternate,i);break;default:zn(e,i,o,s)}}function Da(e,i,o,s,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var h=e,C=i,_=o,M=s,$=C.flags;switch(C.tag){case 0:case 11:case 15:Da(h,C,_,M,f),Io(8,C);break;case 23:break;case 22:var te=C.stateNode;C.memoizedState!==null?te._visibility&2?Da(h,C,_,M,f):Lo(h,C):(te._visibility|=2,Da(h,C,_,M,f)),f&&$&2048&&uu(C.alternate,C);break;case 24:Da(h,C,_,M,f),f&&$&2048&&cu(C.alternate,C);break;default:Da(h,C,_,M,f)}i=i.sibling}}function Lo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,s=i,f=s.flags;switch(s.tag){case 22:Lo(o,s),f&2048&&uu(s.alternate,s);break;case 24:Lo(o,s),f&2048&&cu(s.alternate,s);break;default:Lo(o,s)}i=i.sibling}}var ko=8192;function La(e){if(e.subtreeFlags&ko)for(e=e.child;e!==null;)nm(e),e=e.sibling}function nm(e){switch(e.tag){case 26:La(e),e.flags&ko&&e.memoizedState!==null&&kv(On,e.memoizedState,e.memoizedProps);break;case 5:La(e);break;case 3:case 4:var i=On;On=lr(e.stateNode.containerInfo),La(e),On=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ko,ko=16777216,La(e),ko=i):La(e));break;default:La(e)}}function im(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Uo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var s=i[o];Zt=s,om(s,e)}im(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)am(e),e=e.sibling}function am(e){switch(e.tag){case 0:case 11:case 15:Uo(e),e.flags&2048&&Ci(9,e,e.return);break;case 3:Uo(e);break;case 12:Uo(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Kl(e)):Uo(e);break;default:Uo(e)}}function Kl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var s=i[o];Zt=s,om(s,e)}im(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ci(8,i,i.return),Kl(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Kl(i));break;default:Kl(i)}e=e.sibling}}function om(e,i){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:Ci(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var s=o.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:yo(o.memoizedState.cache)}if(s=o.child,s!==null)s.return=o,Zt=s;else e:for(o=e;Zt!==null;){s=Zt;var f=s.sibling,h=s.return;if(Xf(s),s===o){Zt=null;break e}if(f!==null){f.return=h,Zt=f;break e}Zt=h}}}var Xy={getCacheForType:function(e){var i=Wt(Ht),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o}},Qy=typeof WeakMap=="function"?WeakMap:Map,ut=0,St=null,Ye=null,je=0,ct=0,En=null,_i=!1,ka=!1,du=!1,ui=0,Lt=0,Si=0,aa=0,fu=0,Ln=0,Ua=0,Po=null,fn=null,mu=!1,pu=0,Jl=1/0,Xl=null,bi=null,Xt=0,Ni=null,Pa=null,Oa=0,hu=0,gu=null,lm=null,Oo=0,yu=null;function _n(){if((ut&2)!==0&&je!==0)return je&-je;if(O.T!==null){var e=Sa;return e!==0?e:Su()}return hn()}function rm(){Ln===0&&(Ln=(je&536870912)===0||it?Ie():536870912);var e=Dn.current;return e!==null&&(e.flags|=32),Ln}function Sn(e,i,o){(e===St&&(ct===2||ct===9)||e.cancelPendingCommit!==null)&&(Ga(e,0),Ai(e,je,Ln,!1)),we(e,o),((ut&2)===0||e!==St)&&(e===St&&((ut&2)===0&&(aa|=o),Lt===4&&Ai(e,je,Ln,!1)),Fn(e))}function sm(e,i,o){if((ut&6)!==0)throw Error(a(327));var s=!o&&(i&124)===0&&(i&e.expiredLanes)===0||ht(e,i),f=s?ev(e,i):Cu(e,i,!0),h=s;do{if(f===0){ka&&!s&&Ai(e,i,0,!1);break}else{if(o=e.current.alternate,h&&!jy(o)){f=Cu(e,i,!1),h=!1;continue}if(f===2){if(h=i,e.errorRecoveryDisabledLanes&h)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){i=C;e:{var _=e;f=Po;var M=_.current.memoizedState.isDehydrated;if(M&&(Ga(_,C).flags|=256),C=Cu(_,C,!1),C!==2){if(du&&!M){_.errorRecoveryDisabledLanes|=h,aa|=h,f=4;break e}h=fn,fn=f,h!==null&&(fn===null?fn=h:fn.push.apply(fn,h))}f=C}if(h=!1,f!==2)continue}}if(f===1){Ga(e,0),Ai(e,i,0,!0);break}e:{switch(s=e,h=f,h){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ai(s,i,Ln,!_i);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=pu+300-pt(),10<f)){if(Ai(s,i,Ln,!_i),_e(s,0,!0)!==0)break e;s.timeoutHandle=Om(um.bind(null,s,o,fn,Xl,mu,i,Ln,aa,Ua,_i,h,2,-0,0),f);break e}um(s,o,fn,Xl,mu,i,Ln,aa,Ua,_i,h,0,-0,0)}}break}while(!0);Fn(e)}function um(e,i,o,s,f,h,C,_,M,$,te,re,H,z){if(e.timeoutHandle=-1,re=i.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(zo={stylesheets:null,count:0,unsuspend:Lv},nm(i),re=Uv(),re!==null)){e.cancelPendingCommit=re(gm.bind(null,e,i,h,o,s,f,C,_,M,te,1,H,z)),Ai(e,h,C,!$);return}gm(e,i,h,o,s,f,C,_,M)}function jy(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var s=0;s<o.length;s++){var f=o[s],h=f.getSnapshot;f=f.value;try{if(!vn(h(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ai(e,i,o,s){i&=~fu,i&=~aa,e.suspendedLanes|=i,e.pingedLanes&=~i,s&&(e.warmLanes|=i),s=e.expirationTimes;for(var f=i;0<f;){var h=31-jt(f),C=1<<h;s[h]=-1,f&=~C}o!==0&&Te(e,o,i)}function Ql(){return(ut&6)===0?(Go(0),!1):!0}function vu(){if(Ye!==null){if(ct===0)var e=Ye.return;else e=Ye,ti=ji=null,Us(e),Ma=null,wo=0,e=Ye;for(;e!==null;)qf(e.alternate,e),e=e.return;Ye=null}}function Ga(e,i){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,gv(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),vu(),St=e,Ye=o=jn(e.current,null),je=i,ct=0,En=null,_i=!1,ka=ht(e,i),du=!1,Ua=Ln=fu=aa=Si=Lt=0,fn=Po=null,mu=!1,(i&8)!==0&&(i|=i&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=i;0<s;){var f=31-jt(s),h=1<<f;i|=e[f],s&=~h}return ui=i,Tl(),o}function cm(e,i){ze=null,O.H=Gl,i===To||i===wl?(i=Nd(),ct=3):i===_d?(i=Nd(),ct=4):ct=i===wf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,En=i,Ye===null&&(Lt=1,Bl(e,wn(i,e.current)))}function dm(){var e=O.H;return O.H=Gl,e===null?Gl:e}function fm(){var e=O.A;return O.A=Xy,e}function Tu(){Lt=4,_i||(je&4194048)!==je&&Dn.current!==null||(ka=!0),(Si&134217727)===0&&(aa&134217727)===0||St===null||Ai(St,je,Ln,!1)}function Cu(e,i,o){var s=ut;ut|=2;var f=dm(),h=fm();(St!==e||je!==i)&&(Xl=null,Ga(e,i)),i=!1;var C=Lt;e:do try{if(ct!==0&&Ye!==null){var _=Ye,M=En;switch(ct){case 8:vu(),C=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var $=ct;if(ct=0,En=null,Va(e,_,M,$),o&&ka){C=0;break e}break;default:$=ct,ct=0,En=null,Va(e,_,M,$)}}Wy(),C=Lt;break}catch(te){cm(e,te)}while(!0);return i&&e.shellSuspendCounter++,ti=ji=null,ut=s,O.H=f,O.A=h,Ye===null&&(St=null,je=0,Tl()),C}function Wy(){for(;Ye!==null;)mm(Ye)}function ev(e,i){var o=ut;ut|=2;var s=dm(),f=fm();St!==e||je!==i?(Xl=null,Jl=pt()+500,Ga(e,i)):ka=ht(e,i);e:do try{if(ct!==0&&Ye!==null){i=Ye;var h=En;t:switch(ct){case 1:ct=0,En=null,Va(e,i,h,1);break;case 2:case 9:if(Sd(h)){ct=0,En=null,pm(i);break}i=function(){ct!==2&&ct!==9||St!==e||(ct=7),Fn(e)},h.then(i,i);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Sd(h)?(ct=0,En=null,pm(i)):(ct=0,En=null,Va(e,i,h,7));break;case 5:var C=null;switch(Ye.tag){case 26:C=Ye.memoizedState;case 5:case 27:var _=Ye;if(!C||Jm(C)){ct=0,En=null;var M=_.sibling;if(M!==null)Ye=M;else{var $=_.return;$!==null?(Ye=$,jl($)):Ye=null}break t}}ct=0,En=null,Va(e,i,h,5);break;case 6:ct=0,En=null,Va(e,i,h,6);break;case 8:vu(),Lt=6;break e;default:throw Error(a(462))}}tv();break}catch(te){cm(e,te)}while(!0);return ti=ji=null,O.H=s,O.A=f,ut=o,Ye!==null?0:(St=null,je=0,Tl(),Lt)}function tv(){for(;Ye!==null&&!kt();)mm(Ye)}function mm(e){var i=$f(e.alternate,e,ui);e.memoizedProps=e.pendingProps,i===null?jl(e):Ye=i}function pm(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=kf(o,i,i.pendingProps,i.type,void 0,je);break;case 11:i=kf(o,i,i.pendingProps,i.type.render,i.ref,je);break;case 5:Us(i);default:qf(o,i),i=Ye=pd(i,ui),i=$f(o,i,ui)}e.memoizedProps=e.pendingProps,i===null?jl(e):Ye=i}function Va(e,i,o,s){ti=ji=null,Us(i),Ma=null,wo=0;var f=i.return;try{if(zy(e,f,i,o,je)){Lt=1,Bl(e,wn(o,e.current)),Ye=null;return}}catch(h){if(f!==null)throw Ye=f,h;Lt=1,Bl(e,wn(o,e.current)),Ye=null;return}i.flags&32768?(it||s===1?e=!0:ka||(je&536870912)!==0?e=!1:(_i=e=!0,(s===2||s===9||s===3||s===6)&&(s=Dn.current,s!==null&&s.tag===13&&(s.flags|=16384))),hm(i,e)):jl(i)}function jl(e){var i=e;do{if((i.flags&32768)!==0){hm(i,_i);return}e=i.return;var o=Yy(i.alternate,i,ui);if(o!==null){Ye=o;return}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=e}while(i!==null);Lt===0&&(Lt=5)}function hm(e,i){do{var o=Zy(e.alternate,e);if(o!==null){o.flags&=32767,Ye=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){Ye=e;return}Ye=e=o}while(e!==null);Lt=6,Ye=null}function gm(e,i,o,s,f,h,C,_,M){e.cancelPendingCommit=null;do Wl();while(Xt!==0);if((ut&6)!==0)throw Error(a(327));if(i!==null){if(i===e.current)throw Error(a(177));if(h=i.lanes|i.childLanes,h|=cs,zt(e,o,h,C,_,M),e===St&&(Ye=St=null,je=0),Pa=i,Ni=e,Oa=o,hu=h,gu=f,lm=s,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ov(nn,function(){return xm(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||s){s=O.T,O.T=null,f=Q.p,Q.p=2,C=ut,ut|=4;try{Ky(e,i,o)}finally{ut=C,Q.p=f,O.T=s}}Xt=1,ym(),vm(),Tm()}}function ym(){if(Xt===1){Xt=0;var e=Ni,i=Pa,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var s=Q.p;Q.p=2;var f=ut;ut|=4;try{Wf(i,e);var h=Du,C=ad(e.containerInfo),_=h.focusedElem,M=h.selectionRange;if(C!==_&&_&&_.ownerDocument&&id(_.ownerDocument.documentElement,_)){if(M!==null&&os(_)){var $=M.start,te=M.end;if(te===void 0&&(te=$),"selectionStart"in _)_.selectionStart=$,_.selectionEnd=Math.min(te,_.value.length);else{var re=_.ownerDocument||document,H=re&&re.defaultView||window;if(H.getSelection){var z=H.getSelection(),Le=_.textContent.length,Me=Math.min(M.start,Le),Ct=M.end===void 0?Me:Math.min(M.end,Le);!z.extend&&Me>Ct&&(C=Ct,Ct=Me,Me=C);var G=nd(_,Me),U=nd(_,Ct);if(G&&U&&(z.rangeCount!==1||z.anchorNode!==G.node||z.anchorOffset!==G.offset||z.focusNode!==U.node||z.focusOffset!==U.offset)){var V=re.createRange();V.setStart(G.node,G.offset),z.removeAllRanges(),Me>Ct?(z.addRange(V),z.extend(U.node,U.offset)):(V.setEnd(U.node,U.offset),z.addRange(V))}}}}for(re=[],z=_;z=z.parentNode;)z.nodeType===1&&re.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<re.length;_++){var oe=re[_];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}dr=!!Iu,Du=Iu=null}finally{ut=f,Q.p=s,O.T=o}}e.current=i,Xt=2}}function vm(){if(Xt===2){Xt=0;var e=Ni,i=Pa,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var s=Q.p;Q.p=2;var f=ut;ut|=4;try{Jf(e,i.alternate,i)}finally{ut=f,Q.p=s,O.T=o}}Xt=3}}function Tm(){if(Xt===4||Xt===3){Xt=0,mt();var e=Ni,i=Pa,o=Oa,s=lm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xt=5:(Xt=0,Pa=Ni=null,Cm(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(bi=null),an(o),i=i.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot($n,i,void 0,(i.current.flags&128)===128)}catch{}if(s!==null){i=O.T,f=Q.p,Q.p=2,O.T=null;try{for(var h=e.onRecoverableError,C=0;C<s.length;C++){var _=s[C];h(_.value,{componentStack:_.stack})}}finally{O.T=i,Q.p=f}}(Oa&3)!==0&&Wl(),Fn(e),f=e.pendingLanes,(o&4194090)!==0&&(f&42)!==0?e===yu?Oo++:(Oo=0,yu=e):Oo=0,Go(0)}}function Cm(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,yo(i)))}function Wl(e){return ym(),vm(),Tm(),xm()}function xm(){if(Xt!==5)return!1;var e=Ni,i=hu;hu=0;var o=an(Oa),s=O.T,f=Q.p;try{Q.p=32>o?32:o,O.T=null,o=gu,gu=null;var h=Ni,C=Oa;if(Xt=0,Pa=Ni=null,Oa=0,(ut&6)!==0)throw Error(a(331));var _=ut;if(ut|=4,am(h.current),tm(h,h.current,C,o),ut=_,Go(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot($n,h)}catch{}return!0}finally{Q.p=f,O.T=s,Cm(e,i)}}function Em(e,i,o){i=wn(o,i),i=Js(e.stateNode,i,2),e=gi(e,i,2),e!==null&&(we(e,2),Fn(e))}function xt(e,i,o){if(e.tag===3)Em(e,e,o);else for(;i!==null;){if(i.tag===3){Em(i,e,o);break}else if(i.tag===1){var s=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(bi===null||!bi.has(s))){e=wn(o,e),o=Nf(2),s=gi(i,o,2),s!==null&&(Af(o,s,i,e),we(s,2),Fn(s));break}}i=i.return}}function xu(e,i,o){var s=e.pingCache;if(s===null){s=e.pingCache=new Qy;var f=new Set;s.set(i,f)}else f=s.get(i),f===void 0&&(f=new Set,s.set(i,f));f.has(o)||(du=!0,f.add(o),e=nv.bind(null,e,i,o),i.then(e,e))}function nv(e,i,o){var s=e.pingCache;s!==null&&s.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,St===e&&(je&o)===o&&(Lt===4||Lt===3&&(je&62914560)===je&&300>pt()-pu?(ut&2)===0&&Ga(e,0):fu|=o,Ua===je&&(Ua=0)),Fn(e)}function _m(e,i){i===0&&(i=Ut()),e=Ca(e,i),e!==null&&(we(e,i),Fn(e))}function iv(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),_m(e,o)}function av(e,i){var o=0;switch(e.tag){case 13:var s=e.stateNode,f=e.memoizedState;f!==null&&(o=f.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(i),_m(e,o)}function ov(e,i){return be(e,i)}var er=null,$a=null,Eu=!1,tr=!1,_u=!1,oa=0;function Fn(e){e!==$a&&e.next===null&&($a===null?er=$a=e:$a=$a.next=e),tr=!0,Eu||(Eu=!0,rv())}function Go(e,i){if(!_u&&tr){_u=!0;do for(var o=!1,s=er;s!==null;){if(e!==0){var f=s.pendingLanes;if(f===0)var h=0;else{var C=s.suspendedLanes,_=s.pingedLanes;h=(1<<31-jt(42|e)+1)-1,h&=f&~(C&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(o=!0,Am(s,h))}else h=je,h=_e(s,s===St?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(h&3)===0||ht(s,h)||(o=!0,Am(s,h));s=s.next}while(o);_u=!1}}function lv(){Sm()}function Sm(){tr=Eu=!1;var e=0;oa!==0&&(hv()&&(e=oa),oa=0);for(var i=pt(),o=null,s=er;s!==null;){var f=s.next,h=bm(s,i);h===0?(s.next=null,o===null?er=f:o.next=f,f===null&&($a=o)):(o=s,(e!==0||(h&3)!==0)&&(tr=!0)),s=f}Go(e)}function bm(e,i){for(var o=e.suspendedLanes,s=e.pingedLanes,f=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var C=31-jt(h),_=1<<C,M=f[C];M===-1?((_&o)===0||(_&s)!==0)&&(f[C]=Xe(_,i)):M<=i&&(e.expiredLanes|=_),h&=~_}if(i=St,o=je,o=_e(e,e===i?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,o===0||e===i&&(ct===2||ct===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&ft(s),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||ht(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(s!==null&&ft(s),an(o)){case 2:case 8:o=Mt;break;case 32:o=nn;break;case 268435456:o=Hi;break;default:o=nn}return s=Nm.bind(null,e),o=be(o,s),e.callbackPriority=i,e.callbackNode=o,i}return s!==null&&s!==null&&ft(s),e.callbackPriority=2,e.callbackNode=null,2}function Nm(e,i){if(Xt!==0&&Xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Wl()&&e.callbackNode!==o)return null;var s=je;return s=_e(e,e===St?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(sm(e,s,i),bm(e,pt()),e.callbackNode!=null&&e.callbackNode===o?Nm.bind(null,e):null)}function Am(e,i){if(Wl())return null;sm(e,i,!0)}function rv(){yv(function(){(ut&6)!==0?be(rn,lv):Sm()})}function Su(){return oa===0&&(oa=Ie()),oa}function wm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fl(""+e)}function Rm(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function sv(e,i,o,s,f){if(i==="submit"&&o&&o.stateNode===f){var h=wm((f[lt]||null).action),C=s.submitter;C&&(i=(i=C[lt]||null)?wm(i.formAction):C.getAttribute("formAction"),i!==null&&(h=i,C=null));var _=new gl("action","action",null,s,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(oa!==0){var M=C?Rm(f,C):new FormData(f);zs(o,{pending:!0,data:M,method:f.method,action:h},null,M)}}else typeof h=="function"&&(_.preventDefault(),M=C?Rm(f,C):new FormData(f),zs(o,{pending:!0,data:M,method:f.method,action:h},h,M))},currentTarget:f}]})}}for(var bu=0;bu<us.length;bu++){var Nu=us[bu],uv=Nu.toLowerCase(),cv=Nu[0].toUpperCase()+Nu.slice(1);Pn(uv,"on"+cv)}Pn(rd,"onAnimationEnd"),Pn(sd,"onAnimationIteration"),Pn(ud,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(Ay,"onTransitionRun"),Pn(wy,"onTransitionStart"),Pn(Ry,"onTransitionCancel"),Pn(cd,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function Mm(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],f=s.event;s=s.listeners;e:{var h=void 0;if(i)for(var C=s.length-1;0<=C;C--){var _=s[C],M=_.instance,$=_.currentTarget;if(_=_.listener,M!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=$;try{h(f)}catch(te){ql(te)}f.currentTarget=null,h=M}else for(C=0;C<s.length;C++){if(_=s[C],M=_.instance,$=_.currentTarget,_=_.listener,M!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=$;try{h(f)}catch(te){ql(te)}f.currentTarget=null,h=M}}}}function Ze(e,i){var o=i[no];o===void 0&&(o=i[no]=new Set);var s=e+"__bubble";o.has(s)||(Im(i,e,2,!1),o.add(s))}function Au(e,i,o){var s=0;i&&(s|=4),Im(o,e,s,i)}var nr="_reactListening"+Math.random().toString(36).slice(2);function wu(e){if(!e[nr]){e[nr]=!0,Ve.forEach(function(o){o!=="selectionchange"&&(dv.has(o)||Au(o,!1,e),Au(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[nr]||(i[nr]=!0,Au("selectionchange",!1,i))}}function Im(e,i,o,s){switch(tp(i)){case 2:var f=Gv;break;case 8:f=Vv;break;default:f=qu}o=f.bind(null,i,o,e),f=void 0,!Xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),s?f!==void 0?e.addEventListener(i,o,{capture:!0,passive:f}):e.addEventListener(i,o,!0):f!==void 0?e.addEventListener(i,o,{passive:f}):e.addEventListener(i,o,!1)}function Ru(e,i,o,s,f){var h=s;if((i&1)===0&&(i&2)===0&&s!==null)e:for(;;){if(s===null)return;var C=s.tag;if(C===3||C===4){var _=s.stateNode.containerInfo;if(_===f)break;if(C===4)for(C=s.return;C!==null;){var M=C.tag;if((M===3||M===4)&&C.stateNode.containerInfo===f)return;C=C.return}for(;_!==null;){if(C=Ft(_),C===null)return;if(M=C.tag,M===5||M===6||M===26||M===27){s=h=C;continue e}_=_.parentNode}}s=s.return}Oc(function(){var $=h,te=Kr(o),re=[];e:{var H=dd.get(e);if(H!==void 0){var z=gl,Le=e;switch(e){case"keypress":if(pl(o)===0)break e;case"keydown":case"keyup":z=oy;break;case"focusin":Le="focus",z=es;break;case"focusout":Le="blur",z=es;break;case"beforeblur":case"afterblur":z=es;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Zg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=sy;break;case rd:case sd:case ud:z=Xg;break;case cd:z=cy;break;case"scroll":case"scrollend":z=Fg;break;case"wheel":z=fy;break;case"copy":case"cut":case"paste":z=jg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=qc;break;case"toggle":case"beforetoggle":z=py}var Me=(i&4)!==0,Ct=!Me&&(e==="scroll"||e==="scrollend"),G=Me?H!==null?H+"Capture":null:H;Me=[];for(var U=$,V;U!==null;){var oe=U;if(V=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||V===null||G===null||(oe=io(U,G),oe!=null&&Me.push($o(U,oe,V))),Ct)break;U=U.return}0<Me.length&&(H=new z(H,Le,null,o,te),re.push({event:H,listeners:Me}))}}if((i&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",H&&o!==Zr&&(Le=o.relatedTarget||o.fromElement)&&(Ft(Le)||Le[gn]))break e;if((z||H)&&(H=te.window===te?te:(H=te.ownerDocument)?H.defaultView||H.parentWindow:window,z?(Le=o.relatedTarget||o.toElement,z=$,Le=Le?Ft(Le):null,Le!==null&&(Ct=u(Le),Me=Le.tag,Le!==Ct||Me!==5&&Me!==27&&Me!==6)&&(Le=null)):(z=null,Le=$),z!==Le)){if(Me=$c,oe="onMouseLeave",G="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Me=qc,oe="onPointerLeave",G="onPointerEnter",U="pointer"),Ct=z==null?H:It(z),V=Le==null?H:It(Le),H=new Me(oe,U+"leave",z,o,te),H.target=Ct,H.relatedTarget=V,oe=null,Ft(te)===$&&(Me=new Me(G,U+"enter",Le,o,te),Me.target=V,Me.relatedTarget=Ct,oe=Me),Ct=oe,z&&Le)t:{for(Me=z,G=Le,U=0,V=Me;V;V=Ha(V))U++;for(V=0,oe=G;oe;oe=Ha(oe))V++;for(;0<U-V;)Me=Ha(Me),U--;for(;0<V-U;)G=Ha(G),V--;for(;U--;){if(Me===G||G!==null&&Me===G.alternate)break t;Me=Ha(Me),G=Ha(G)}Me=null}else Me=null;z!==null&&Dm(re,H,z,Me,!1),Le!==null&&Ct!==null&&Dm(re,Ct,Le,Me,!0)}}e:{if(H=$?It($):window,z=H.nodeName&&H.nodeName.toLowerCase(),z==="select"||z==="input"&&H.type==="file")var Ce=Xc;else if(Kc(H))if(Qc)Ce=Sy;else{Ce=Ey;var Fe=xy}else z=H.nodeName,!z||z.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?$&&Yr($.elementType)&&(Ce=Xc):Ce=_y;if(Ce&&(Ce=Ce(e,$))){Jc(re,Ce,o,te);break e}Fe&&Fe(e,H,$),e==="focusout"&&$&&H.type==="number"&&$.memoizedProps.value!=null&&Fr(H,"number",H.value)}switch(Fe=$?It($):window,e){case"focusin":(Kc(Fe)||Fe.contentEditable==="true")&&(ya=Fe,ls=$,fo=null);break;case"focusout":fo=ls=ya=null;break;case"mousedown":rs=!0;break;case"contextmenu":case"mouseup":case"dragend":rs=!1,od(re,o,te);break;case"selectionchange":if(Ny)break;case"keydown":case"keyup":od(re,o,te)}var Se;if(ns)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ga?Yc(e,o)&&(De="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(De="onCompositionStart");De&&(Bc&&o.locale!=="ko"&&(ga||De!=="onCompositionStart"?De==="onCompositionEnd"&&ga&&(Se=Gc()):(fi=te,Qr="value"in fi?fi.value:fi.textContent,ga=!0)),Fe=ir($,De),0<Fe.length&&(De=new Hc(De,e,null,o,te),re.push({event:De,listeners:Fe}),Se?De.data=Se:(Se=Zc(o),Se!==null&&(De.data=Se)))),(Se=gy?yy(e,o):vy(e,o))&&(De=ir($,"onBeforeInput"),0<De.length&&(Fe=new Hc("onBeforeInput","beforeinput",null,o,te),re.push({event:Fe,listeners:De}),Fe.data=Se)),sv(re,e,$,o,te)}Mm(re,i)})}function $o(e,i,o){return{instance:e,listener:i,currentTarget:o}}function ir(e,i){for(var o=i+"Capture",s=[];e!==null;){var f=e,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=io(e,o),f!=null&&s.unshift($o(e,f,h)),f=io(e,i),f!=null&&s.push($o(e,f,h))),e.tag===3)return s;e=e.return}return[]}function Ha(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dm(e,i,o,s,f){for(var h=i._reactName,C=[];o!==null&&o!==s;){var _=o,M=_.alternate,$=_.stateNode;if(_=_.tag,M!==null&&M===s)break;_!==5&&_!==26&&_!==27||$===null||(M=$,f?($=io(o,h),$!=null&&C.unshift($o(o,$,M))):f||($=io(o,h),$!=null&&C.push($o(o,$,M)))),o=o.return}C.length!==0&&e.push({event:i,listeners:C})}var fv=/\r\n?/g,mv=/\u0000|\uFFFD/g;function Lm(e){return(typeof e=="string"?e:""+e).replace(fv,`
`).replace(mv,"")}function km(e,i){return i=Lm(i),Lm(e)===i}function ar(){}function Tt(e,i,o,s,f,h){switch(o){case"children":typeof s=="string"?i==="body"||i==="textarea"&&s===""||ma(e,s):(typeof s=="number"||typeof s=="bigint")&&i!=="body"&&ma(e,""+s);break;case"className":ul(e,"class",s);break;case"tabIndex":ul(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ul(e,o,s);break;case"style":Uc(e,s,h);break;case"data":if(i!=="object"){ul(e,"data",s);break}case"src":case"href":if(s===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=fl(""+s),e.setAttribute(o,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(o==="formAction"?(i!=="input"&&Tt(e,i,"name",f.name,f,null),Tt(e,i,"formEncType",f.formEncType,f,null),Tt(e,i,"formMethod",f.formMethod,f,null),Tt(e,i,"formTarget",f.formTarget,f,null)):(Tt(e,i,"encType",f.encType,f,null),Tt(e,i,"method",f.method,f,null),Tt(e,i,"target",f.target,f,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=fl(""+s),e.setAttribute(o,s);break;case"onClick":s!=null&&(e.onclick=ar);break;case"onScroll":s!=null&&Ze("scroll",e);break;case"onScrollEnd":s!=null&&Ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}o=fl(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""+s):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":s===!0?e.setAttribute(o,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,s):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(o,s):e.removeAttribute(o);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(o):e.setAttribute(o,s);break;case"popover":Ze("beforetoggle",e),Ze("toggle",e),sl(e,"popover",s);break;case"xlinkActuate":Xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Xn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Xn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Xn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Xn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":sl(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Bg.get(o)||o,sl(e,o,s))}}function Mu(e,i,o,s,f,h){switch(o){case"style":Uc(e,s,h);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof s=="string"?ma(e,s):(typeof s=="number"||typeof s=="bigint")&&ma(e,""+s);break;case"onScroll":s!=null&&Ze("scroll",e);break;case"onScrollEnd":s!=null&&Ze("scrollend",e);break;case"onClick":s!=null&&(e.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_t.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),h=e[lt]||null,h=h!=null?h[o]:null,typeof h=="function"&&e.removeEventListener(i,h,f),typeof s=="function")){typeof h!="function"&&h!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,s,f);break e}o in e?e[o]=s:s===!0?e.setAttribute(o,""):sl(e,o,s)}}}function Qt(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",e),Ze("load",e);var s=!1,f=!1,h;for(h in o)if(o.hasOwnProperty(h)){var C=o[h];if(C!=null)switch(h){case"src":s=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Tt(e,i,h,C,o,null)}}f&&Tt(e,i,"srcSet",o.srcSet,o,null),s&&Tt(e,i,"src",o.src,o,null);return;case"input":Ze("invalid",e);var _=h=C=f=null,M=null,$=null;for(s in o)if(o.hasOwnProperty(s)){var te=o[s];if(te!=null)switch(s){case"name":f=te;break;case"type":C=te;break;case"checked":M=te;break;case"defaultChecked":$=te;break;case"value":h=te;break;case"defaultValue":_=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Tt(e,i,s,te,o,null)}}Ic(e,h,_,M,$,C,f,!1),cl(e);return;case"select":Ze("invalid",e),s=C=h=null;for(f in o)if(o.hasOwnProperty(f)&&(_=o[f],_!=null))switch(f){case"value":h=_;break;case"defaultValue":C=_;break;case"multiple":s=_;default:Tt(e,i,f,_,o,null)}i=h,o=C,e.multiple=!!s,i!=null?fa(e,!!s,i,!1):o!=null&&fa(e,!!s,o,!0);return;case"textarea":Ze("invalid",e),h=f=s=null;for(C in o)if(o.hasOwnProperty(C)&&(_=o[C],_!=null))switch(C){case"value":s=_;break;case"defaultValue":f=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:Tt(e,i,C,_,o,null)}Lc(e,s,f,h),cl(e);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(s=o[M],s!=null))switch(M){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Tt(e,i,M,s,o,null)}return;case"dialog":Ze("beforetoggle",e),Ze("toggle",e),Ze("cancel",e),Ze("close",e);break;case"iframe":case"object":Ze("load",e);break;case"video":case"audio":for(s=0;s<Vo.length;s++)Ze(Vo[s],e);break;case"image":Ze("error",e),Ze("load",e);break;case"details":Ze("toggle",e);break;case"embed":case"source":case"link":Ze("error",e),Ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(s=o[$],s!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Tt(e,i,$,s,o,null)}return;default:if(Yr(i)){for(te in o)o.hasOwnProperty(te)&&(s=o[te],s!==void 0&&Mu(e,i,te,s,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(s=o[_],s!=null&&Tt(e,i,_,s,o,null))}function pv(e,i,o,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,C=null,_=null,M=null,$=null,te=null;for(z in o){var re=o[z];if(o.hasOwnProperty(z)&&re!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":M=re;default:s.hasOwnProperty(z)||Tt(e,i,z,null,s,re)}}for(var H in s){var z=s[H];if(re=o[H],s.hasOwnProperty(H)&&(z!=null||re!=null))switch(H){case"type":h=z;break;case"name":f=z;break;case"checked":$=z;break;case"defaultChecked":te=z;break;case"value":C=z;break;case"defaultValue":_=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,i));break;default:z!==re&&Tt(e,i,H,z,s,re)}}zr(e,C,_,M,$,te,h,f);return;case"select":z=C=_=H=null;for(h in o)if(M=o[h],o.hasOwnProperty(h)&&M!=null)switch(h){case"value":break;case"multiple":z=M;default:s.hasOwnProperty(h)||Tt(e,i,h,null,s,M)}for(f in s)if(h=s[f],M=o[f],s.hasOwnProperty(f)&&(h!=null||M!=null))switch(f){case"value":H=h;break;case"defaultValue":_=h;break;case"multiple":C=h;default:h!==M&&Tt(e,i,f,h,s,M)}i=_,o=C,s=z,H!=null?fa(e,!!o,H,!1):!!s!=!!o&&(i!=null?fa(e,!!o,i,!0):fa(e,!!o,o?[]:"",!1));return;case"textarea":z=H=null;for(_ in o)if(f=o[_],o.hasOwnProperty(_)&&f!=null&&!s.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Tt(e,i,_,null,s,f)}for(C in s)if(f=s[C],h=o[C],s.hasOwnProperty(C)&&(f!=null||h!=null))switch(C){case"value":H=f;break;case"defaultValue":z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==h&&Tt(e,i,C,f,s,h)}Dc(e,H,z);return;case"option":for(var Le in o)if(H=o[Le],o.hasOwnProperty(Le)&&H!=null&&!s.hasOwnProperty(Le))switch(Le){case"selected":e.selected=!1;break;default:Tt(e,i,Le,null,s,H)}for(M in s)if(H=s[M],z=o[M],s.hasOwnProperty(M)&&H!==z&&(H!=null||z!=null))switch(M){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Tt(e,i,M,H,s,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)H=o[Me],o.hasOwnProperty(Me)&&H!=null&&!s.hasOwnProperty(Me)&&Tt(e,i,Me,null,s,H);for($ in s)if(H=s[$],z=o[$],s.hasOwnProperty($)&&H!==z&&(H!=null||z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,i));break;default:Tt(e,i,$,H,s,z)}return;default:if(Yr(i)){for(var Ct in o)H=o[Ct],o.hasOwnProperty(Ct)&&H!==void 0&&!s.hasOwnProperty(Ct)&&Mu(e,i,Ct,void 0,s,H);for(te in s)H=s[te],z=o[te],!s.hasOwnProperty(te)||H===z||H===void 0&&z===void 0||Mu(e,i,te,H,s,z);return}}for(var G in o)H=o[G],o.hasOwnProperty(G)&&H!=null&&!s.hasOwnProperty(G)&&Tt(e,i,G,null,s,H);for(re in s)H=s[re],z=o[re],!s.hasOwnProperty(re)||H===z||H==null&&z==null||Tt(e,i,re,H,s,z)}var Iu=null,Du=null;function or(e){return e.nodeType===9?e:e.ownerDocument}function Um(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pm(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Lu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ku=null;function hv(){var e=window.event;return e&&e.type==="popstate"?e===ku?!1:(ku=e,!0):(ku=null,!1)}var Om=typeof setTimeout=="function"?setTimeout:void 0,gv=typeof clearTimeout=="function"?clearTimeout:void 0,Gm=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gm<"u"?function(e){return Gm.resolve(null).then(e).catch(vv)}:Om;function vv(e){setTimeout(function(){throw e})}function wi(e){return e==="head"}function Vm(e,i){var o=i,s=0,f=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(0<s&&8>s){o=s;var C=e.ownerDocument;if(o&1&&Ho(C.documentElement),o&2&&Ho(C.body),o&4)for(o=C.head,Ho(o),C=o.firstChild;C;){var _=C.nextSibling,M=C.nodeName;C[Bi]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&C.rel.toLowerCase()==="stylesheet"||o.removeChild(C),C=_}}if(f===0){e.removeChild(h),Jo(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:s=o.charCodeAt(0)-48;else s=0;o=h}while(o);Jo(i)}function Uu(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Uu(o),We(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function Tv(e,i,o,s){for(;e.nodeType===1;){var f=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Bi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function Cv(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Gn(e.nextSibling),e===null))return null;return e}function Pu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function xv(e,i){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")i();else{var s=function(){i(),o.removeEventListener("DOMContentLoaded",s)};o.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Gn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Ou=null;function $m(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return e;i--}else o==="/$"&&i++}e=e.previousSibling}return null}function Hm(e,i,o){switch(i=or(o),e){case"html":if(e=i.documentElement,!e)throw Error(a(452));return e;case"head":if(e=i.head,!e)throw Error(a(453));return e;case"body":if(e=i.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Ho(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);We(e)}var kn=new Map,qm=new Set;function lr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ci=Q.d;Q.d={f:Ev,r:_v,D:Sv,C:bv,L:Nv,m:Av,X:Rv,S:wv,M:Mv};function Ev(){var e=ci.f(),i=Ql();return e||i}function _v(e){var i=Et(e);i!==null&&i.tag===5&&i.type==="form"?sf(i):ci.r(e)}var qa=typeof document>"u"?null:document;function Bm(e,i,o){var s=qa;if(s&&typeof i=="string"&&i){var f=An(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),qm.has(f)||(qm.add(f),e={rel:e,crossOrigin:o,href:i},s.querySelector(f)===null&&(i=s.createElement("link"),Qt(i,"link",e),Ke(i),s.head.appendChild(i)))}}function Sv(e){ci.D(e),Bm("dns-prefetch",e,null)}function bv(e,i){ci.C(e,i),Bm("preconnect",e,i)}function Nv(e,i,o){ci.L(e,i,o);var s=qa;if(s&&e&&i){var f='link[rel="preload"][as="'+An(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+An(o.imageSizes)+'"]')):f+='[href="'+An(e)+'"]';var h=f;switch(i){case"style":h=Ba(e);break;case"script":h=za(e)}kn.has(h)||(e=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),kn.set(h,e),s.querySelector(f)!==null||i==="style"&&s.querySelector(qo(h))||i==="script"&&s.querySelector(Bo(h))||(i=s.createElement("link"),Qt(i,"link",e),Ke(i),s.head.appendChild(i)))}}function Av(e,i){ci.m(e,i);var o=qa;if(o&&e){var s=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+An(s)+'"][href="'+An(e)+'"]',h=f;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=za(e)}if(!kn.has(h)&&(e=v({rel:"modulepreload",href:e},i),kn.set(h,e),o.querySelector(f)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Bo(h)))return}s=o.createElement("link"),Qt(s,"link",e),Ke(s),o.head.appendChild(s)}}}function wv(e,i,o){ci.S(e,i,o);var s=qa;if(s&&e){var f=yt(s).hoistableStyles,h=Ba(e);i=i||"default";var C=f.get(h);if(!C){var _={loading:0,preload:null};if(C=s.querySelector(qo(h)))_.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":i},o),(o=kn.get(h))&&Gu(e,o);var M=C=s.createElement("link");Ke(M),Qt(M,"link",e),M._p=new Promise(function($,te){M.onload=$,M.onerror=te}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,rr(C,i,s)}C={type:"stylesheet",instance:C,count:1,state:_},f.set(h,C)}}}function Rv(e,i){ci.X(e,i);var o=qa;if(o&&e){var s=yt(o).hoistableScripts,f=za(e),h=s.get(f);h||(h=o.querySelector(Bo(f)),h||(e=v({src:e,async:!0},i),(i=kn.get(f))&&Vu(e,i),h=o.createElement("script"),Ke(h),Qt(h,"link",e),o.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(f,h))}}function Mv(e,i){ci.M(e,i);var o=qa;if(o&&e){var s=yt(o).hoistableScripts,f=za(e),h=s.get(f);h||(h=o.querySelector(Bo(f)),h||(e=v({src:e,async:!0,type:"module"},i),(i=kn.get(f))&&Vu(e,i),h=o.createElement("script"),Ke(h),Qt(h,"link",e),o.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(f,h))}}function zm(e,i,o,s){var f=(f=J.current)?lr(f):null;if(!f)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ba(o.href),o=yt(f).hoistableStyles,s=o.get(i),s||(s={type:"style",instance:null,count:0,state:null},o.set(i,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Ba(o.href);var h=yt(f).hoistableStyles,C=h.get(e);if(C||(f=f.ownerDocument||f,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,C),(h=f.querySelector(qo(e)))&&!h._p&&(C.instance=h,C.state.loading=5),kn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},kn.set(e,o),h||Iv(f,e,o,C.state))),i&&s===null)throw Error(a(528,""));return C}if(i&&s!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=za(o),o=yt(f).hoistableScripts,s=o.get(i),s||(s={type:"script",instance:null,count:0,state:null},o.set(i,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ba(e){return'href="'+An(e)+'"'}function qo(e){return'link[rel="stylesheet"]['+e+"]"}function Fm(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Iv(e,i,o,s){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=e.createElement("link"),s.preload=i,i.addEventListener("load",function(){return s.loading|=1}),i.addEventListener("error",function(){return s.loading|=2}),Qt(i,"link",o),Ke(i),e.head.appendChild(i))}function za(e){return'[src="'+An(e)+'"]'}function Bo(e){return"script[async]"+e}function Ym(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var s=e.querySelector('style[data-href~="'+An(o.href)+'"]');if(s)return i.instance=s,Ke(s),s;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ke(s),Qt(s,"style",f),rr(s,o.precedence,e),i.instance=s;case"stylesheet":f=Ba(o.href);var h=e.querySelector(qo(f));if(h)return i.state.loading|=4,i.instance=h,Ke(h),h;s=Fm(o),(f=kn.get(f))&&Gu(s,f),h=(e.ownerDocument||e).createElement("link"),Ke(h);var C=h;return C._p=new Promise(function(_,M){C.onload=_,C.onerror=M}),Qt(h,"link",s),i.state.loading|=4,rr(h,o.precedence,e),i.instance=h;case"script":return h=za(o.src),(f=e.querySelector(Bo(h)))?(i.instance=f,Ke(f),f):(s=o,(f=kn.get(h))&&(s=v({},o),Vu(s,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ke(f),Qt(f,"link",s),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(s=i.instance,i.state.loading|=4,rr(s,o.precedence,e));return i.instance}function rr(e,i,o){for(var s=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=s.length?s[s.length-1]:null,h=f,C=0;C<s.length;C++){var _=s[C];if(_.dataset.precedence===i)h=_;else if(h!==f)break}h?h.parentNode.insertBefore(e,h.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function Gu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Vu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var sr=null;function Zm(e,i,o){if(sr===null){var s=new Map,f=sr=new Map;f.set(o,s)}else f=sr,s=f.get(o),s||(s=new Map,f.set(o,s));if(s.has(e))return s;for(s.set(e,null),o=o.getElementsByTagName(e),f=0;f<o.length;f++){var h=o[f];if(!(h[Bi]||h[nt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var C=h.getAttribute(i)||"";C=e+C;var _=s.get(C);_?_.push(h):s.set(C,[h])}}return s}function Km(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function Dv(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Jm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var zo=null;function Lv(){}function kv(e,i,o){if(zo===null)throw Error(a(475));var s=zo;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ba(o.href),h=e.querySelector(qo(f));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=ur.bind(s),e.then(s,s)),i.state.loading|=4,i.instance=h,Ke(h);return}h=e.ownerDocument||e,o=Fm(o),(f=kn.get(f))&&Gu(o,f),h=h.createElement("link"),Ke(h);var C=h;C._p=new Promise(function(_,M){C.onload=_,C.onerror=M}),Qt(h,"link",o),i.instance=h}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(s.count++,i=ur.bind(s),e.addEventListener("load",i),e.addEventListener("error",i))}}function Uv(){if(zo===null)throw Error(a(475));var e=zo;return e.stylesheets&&e.count===0&&$u(e,e.stylesheets),0<e.count?function(i){var o=setTimeout(function(){if(e.stylesheets&&$u(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o)}}:null}function ur(){if(this.count--,this.count===0){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var cr=null;function $u(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,cr=new Map,i.forEach(Pv,e),cr=null,ur.call(e))}function Pv(e,i){if(!(i.state.loading&4)){var o=cr.get(e);if(o)var s=o.get(null);else{o=new Map,cr.set(e,o);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var C=f[h];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(o.set(C.dataset.precedence,C),s=C)}s&&o.set(null,s)}f=i.instance,C=f.getAttribute("data-precedence"),h=o.get(C)||s,h===s&&o.set(null,f),o.set(C,f),this.count++,s=ur.bind(this),f.addEventListener("load",s),f.addEventListener("error",s),h?h.parentNode.insertBefore(f,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Fo={$$typeof:k,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Ov(e,i,o,s,f,h,C,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=st(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.hiddenUpdates=st(null),this.identifierPrefix=s,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Xm(e,i,o,s,f,h,C,_,M,$,te,re){return e=new Ov(e,i,o,C,_,M,$,re),i=1,h===!0&&(i|=24),h=Tn(3,null,null,i),e.current=h,h.stateNode=e,i=xs(),i.refCount++,e.pooledCache=i,i.refCount++,h.memoizedState={element:s,isDehydrated:o,cache:i},bs(h),e}function Qm(e){return e?(e=xa,e):xa}function jm(e,i,o,s,f,h){f=Qm(f),s.context===null?s.context=f:s.pendingContext=f,s=hi(i),s.payload={element:o},h=h===void 0?null:h,h!==null&&(s.callback=h),o=gi(e,s,i),o!==null&&(Sn(o,e,i),xo(o,e,i))}function Wm(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function Hu(e,i){Wm(e,i),(e=e.alternate)&&Wm(e,i)}function ep(e){if(e.tag===13){var i=Ca(e,67108864);i!==null&&Sn(i,e,67108864),Hu(e,67108864)}}var dr=!0;function Gv(e,i,o,s){var f=O.T;O.T=null;var h=Q.p;try{Q.p=2,qu(e,i,o,s)}finally{Q.p=h,O.T=f}}function Vv(e,i,o,s){var f=O.T;O.T=null;var h=Q.p;try{Q.p=8,qu(e,i,o,s)}finally{Q.p=h,O.T=f}}function qu(e,i,o,s){if(dr){var f=Bu(s);if(f===null)Ru(e,i,s,fr,o),np(e,s);else if(Hv(f,e,i,o,s))s.stopPropagation();else if(np(e,s),i&4&&-1<$v.indexOf(e)){for(;f!==null;){var h=Et(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var C=Be(h.pendingLanes);if(C!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;C;){var M=1<<31-jt(C);_.entanglements[1]|=M,C&=~M}Fn(h),(ut&6)===0&&(Jl=pt()+500,Go(0))}}break;case 13:_=Ca(h,2),_!==null&&Sn(_,h,2),Ql(),Hu(h,2)}if(h=Bu(s),h===null&&Ru(e,i,s,fr,o),h===f)break;f=h}f!==null&&s.stopPropagation()}else Ru(e,i,s,null,o)}}function Bu(e){return e=Kr(e),zu(e)}var fr=null;function zu(e){if(fr=null,e=Ft(e),e!==null){var i=u(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=m(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return fr=e,null}function tp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(At()){case rn:return 2;case Mt:return 8;case nn:case sn:return 32;case Hi:return 268435456;default:return 32}default:return 32}}var Fu=!1,Ri=null,Mi=null,Ii=null,Yo=new Map,Zo=new Map,Di=[],$v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function np(e,i){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Yo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(i.pointerId)}}function Ko(e,i,o,s,f,h){return e===null||e.nativeEvent!==h?(e={blockedOn:i,domEventName:o,eventSystemFlags:s,nativeEvent:h,targetContainers:[f]},i!==null&&(i=Et(i),i!==null&&ep(i)),e):(e.eventSystemFlags|=s,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Hv(e,i,o,s,f){switch(i){case"focusin":return Ri=Ko(Ri,e,i,o,s,f),!0;case"dragenter":return Mi=Ko(Mi,e,i,o,s,f),!0;case"mouseover":return Ii=Ko(Ii,e,i,o,s,f),!0;case"pointerover":var h=f.pointerId;return Yo.set(h,Ko(Yo.get(h)||null,e,i,o,s,f)),!0;case"gotpointercapture":return h=f.pointerId,Zo.set(h,Ko(Zo.get(h)||null,e,i,o,s,f)),!0}return!1}function ip(e){var i=Ft(e.target);if(i!==null){var o=u(i);if(o!==null){if(i=o.tag,i===13){if(i=m(o),i!==null){e.blockedOn=i,ot(e.priority,function(){if(o.tag===13){var s=_n();s=Qe(s);var f=Ca(o,s);f!==null&&Sn(f,o,s),Hu(o,s)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mr(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=Bu(e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);Zr=s,o.target.dispatchEvent(s),Zr=null}else return i=Et(o),i!==null&&ep(i),e.blockedOn=o,!1;i.shift()}return!0}function ap(e,i,o){mr(e)&&o.delete(i)}function qv(){Fu=!1,Ri!==null&&mr(Ri)&&(Ri=null),Mi!==null&&mr(Mi)&&(Mi=null),Ii!==null&&mr(Ii)&&(Ii=null),Yo.forEach(ap),Zo.forEach(ap)}function pr(e,i){e.blockedOn===i&&(e.blockedOn=null,Fu||(Fu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,qv)))}var hr=null;function op(e){hr!==e&&(hr=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){hr===e&&(hr=null);for(var i=0;i<e.length;i+=3){var o=e[i],s=e[i+1],f=e[i+2];if(typeof s!="function"){if(zu(s||o)===null)continue;break}var h=Et(o);h!==null&&(e.splice(i,3),i-=3,zs(h,{pending:!0,data:f,method:o.method,action:s},s,f))}}))}function Jo(e){function i(M){return pr(M,e)}Ri!==null&&pr(Ri,e),Mi!==null&&pr(Mi,e),Ii!==null&&pr(Ii,e),Yo.forEach(i),Zo.forEach(i);for(var o=0;o<Di.length;o++){var s=Di[o];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Di.length&&(o=Di[0],o.blockedOn===null);)ip(o),o.blockedOn===null&&Di.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(s=0;s<o.length;s+=3){var f=o[s],h=o[s+1],C=f[lt]||null;if(typeof h=="function")C||op(o);else if(C){var _=null;if(h&&h.hasAttribute("formAction")){if(f=h,C=h[lt]||null)_=C.formAction;else if(zu(f)!==null)continue}else _=C.action;typeof _=="function"?o[s+1]=_:(o.splice(s,3),s-=3),op(o)}}}function Yu(e){this._internalRoot=e}gr.prototype.render=Yu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,s=_n();jm(o,s,e,i,null,null)},gr.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;jm(e.current,2,null,e,null,null),Ql(),i[gn]=null}};function gr(e){this._internalRoot=e}gr.prototype.unstable_scheduleHydration=function(e){if(e){var i=hn();e={blockedOn:null,target:e,priority:i};for(var o=0;o<Di.length&&i!==0&&i<Di[o].priority;o++);Di.splice(o,0,e),o===0&&ip(e)}};var lp=t.version;if(lp!=="19.1.0")throw Error(a(527,lp,"19.1.0"));Q.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=y(i),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Bv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yr.isDisabled&&yr.supportsFiber)try{$n=yr.inject(Bv),Bt=yr}catch{}}return Qo.createRoot=function(e,i){if(!r(e))throw Error(a(299));var o=!1,s="",f=Ef,h=_f,C=Sf,_=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(h=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=Xm(e,1,!1,null,null,o,s,f,h,C,_,null),e[gn]=i.current,wu(e),new Yu(i)},Qo.hydrateRoot=function(e,i,o){if(!r(e))throw Error(a(299));var s=!1,f="",h=Ef,C=_f,_=Sf,M=null,$=null;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(h=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&($=o.formState)),i=Xm(e,1,!0,i,o??null,s,f,h,C,_,M,$),i.context=Qm(null),o=i.current,s=_n(),s=Qe(s),f=hi(s),f.callback=null,gi(o,f,s),o=s,i.current.lanes=o,we(i,o),Fn(i),e[gn]=i.current,wu(e),new gr(i)},Qo.version="19.1.0",Qo}var gp;function Wv(){if(gp)return Ju.exports;gp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Ju.exports=jv(),Ju.exports}var e0=Wv();const t0=lg(e0),n0=()=>{const[l,t]=q.useState([]),n=q.useCallback((a,r,u)=>{t(m=>[...m,{id:crypto.randomUUID(),type:a,text:r,processedText:u,timestamp:new Date}])},[]);return{gameLog:l,addLogEntry:n,setGameLog:t}};var tt;(function(l){l.assertEqual=r=>{};function t(r){}l.assertIs=t;function n(r){throw new Error}l.assertNever=n,l.arrayToEnum=r=>{const u={};for(const m of r)u[m]=m;return u},l.getValidEnumValues=r=>{const u=l.objectKeys(r).filter(g=>typeof r[r[g]]!="number"),m={};for(const g of u)m[g]=r[g];return l.objectValues(m)},l.objectValues=r=>l.objectKeys(r).map(function(u){return r[u]}),l.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const u=[];for(const m in r)Object.prototype.hasOwnProperty.call(r,m)&&u.push(m);return u},l.find=(r,u)=>{for(const m of r)if(u(m))return m},l.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function a(r,u=" | "){return r.map(m=>typeof m=="string"?`'${m}'`:m).join(u)}l.joinValues=a,l.jsonStringifyReplacer=(r,u)=>typeof u=="bigint"?u.toString():u})(tt||(tt={}));var yp;(function(l){l.mergeShapes=(t,n)=>({...t,...n})})(yp||(yp={}));const xe=tt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ui=l=>{switch(typeof l){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return Number.isNaN(l)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(l)?xe.array:l===null?xe.null:l.then&&typeof l.then=="function"&&l.catch&&typeof l.catch=="function"?xe.promise:typeof Map<"u"&&l instanceof Map?xe.map:typeof Set<"u"&&l instanceof Set?xe.set:typeof Date<"u"&&l instanceof Date?xe.date:xe.object;default:return xe.unknown}},pe=tt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class di extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(u){return u.message},a={_errors:[]},r=u=>{for(const m of u.issues)if(m.code==="invalid_union")m.unionErrors.map(r);else if(m.code==="invalid_return_type")r(m.returnTypeError);else if(m.code==="invalid_arguments")r(m.argumentsError);else if(m.path.length===0)a._errors.push(n(m));else{let g=a,y=0;for(;y<m.path.length;){const p=m.path[y];y===m.path.length-1?(g[p]=g[p]||{_errors:[]},g[p]._errors.push(n(m))):g[p]=g[p]||{_errors:[]},g=g[p],y++}}};return r(this),a}static assert(t){if(!(t instanceof di))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},a=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):a.push(t(r));return{formErrors:a,fieldErrors:n}}get formErrors(){return this.flatten()}}di.create=l=>new di(l);const tc=(l,t)=>{let n;switch(l.code){case pe.invalid_type:l.received===xe.undefined?n="Required":n=`Expected ${l.expected}, received ${l.received}`;break;case pe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(l.expected,tt.jsonStringifyReplacer)}`;break;case pe.unrecognized_keys:n=`Unrecognized key(s) in object: ${tt.joinValues(l.keys,", ")}`;break;case pe.invalid_union:n="Invalid input";break;case pe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${tt.joinValues(l.options)}`;break;case pe.invalid_enum_value:n=`Invalid enum value. Expected ${tt.joinValues(l.options)}, received '${l.received}'`;break;case pe.invalid_arguments:n="Invalid function arguments";break;case pe.invalid_return_type:n="Invalid function return type";break;case pe.invalid_date:n="Invalid date";break;case pe.invalid_string:typeof l.validation=="object"?"includes"in l.validation?(n=`Invalid input: must include "${l.validation.includes}"`,typeof l.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${l.validation.position}`)):"startsWith"in l.validation?n=`Invalid input: must start with "${l.validation.startsWith}"`:"endsWith"in l.validation?n=`Invalid input: must end with "${l.validation.endsWith}"`:tt.assertNever(l.validation):l.validation!=="regex"?n=`Invalid ${l.validation}`:n="Invalid";break;case pe.too_small:l.type==="array"?n=`Array must contain ${l.exact?"exactly":l.inclusive?"at least":"more than"} ${l.minimum} element(s)`:l.type==="string"?n=`String must contain ${l.exact?"exactly":l.inclusive?"at least":"over"} ${l.minimum} character(s)`:l.type==="number"?n=`Number must be ${l.exact?"exactly equal to ":l.inclusive?"greater than or equal to ":"greater than "}${l.minimum}`:l.type==="date"?n=`Date must be ${l.exact?"exactly equal to ":l.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(l.minimum))}`:n="Invalid input";break;case pe.too_big:l.type==="array"?n=`Array must contain ${l.exact?"exactly":l.inclusive?"at most":"less than"} ${l.maximum} element(s)`:l.type==="string"?n=`String must contain ${l.exact?"exactly":l.inclusive?"at most":"under"} ${l.maximum} character(s)`:l.type==="number"?n=`Number must be ${l.exact?"exactly":l.inclusive?"less than or equal to":"less than"} ${l.maximum}`:l.type==="bigint"?n=`BigInt must be ${l.exact?"exactly":l.inclusive?"less than or equal to":"less than"} ${l.maximum}`:l.type==="date"?n=`Date must be ${l.exact?"exactly":l.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(l.maximum))}`:n="Invalid input";break;case pe.custom:n="Invalid input";break;case pe.invalid_intersection_types:n="Intersection results could not be merged";break;case pe.not_multiple_of:n=`Number must be a multiple of ${l.multipleOf}`;break;case pe.not_finite:n="Number must be finite";break;default:n=t.defaultError,tt.assertNever(l)}return{message:n}};let i0=tc;function a0(){return i0}const o0=l=>{const{data:t,path:n,errorMaps:a,issueData:r}=l,u=[...n,...r.path||[]],m={...r,path:u};if(r.message!==void 0)return{...r,path:u,message:r.message};let g="";const y=a.filter(p=>!!p).slice().reverse();for(const p of y)g=p(m,{data:t,defaultError:g}).message;return{...r,path:u,message:g}};function ve(l,t){const n=a0(),a=o0({issueData:t,data:l.data,path:l.path,errorMaps:[l.common.contextualErrorMap,l.schemaErrorMap,n,n===tc?void 0:tc].filter(r=>!!r)});l.common.issues.push(a)}class ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const a=[];for(const r of n){if(r.status==="aborted")return Ge;r.status==="dirty"&&t.dirty(),a.push(r.value)}return{status:t.value,value:a}}static async mergeObjectAsync(t,n){const a=[];for(const r of n){const u=await r.key,m=await r.value;a.push({key:u,value:m})}return ln.mergeObjectSync(t,a)}static mergeObjectSync(t,n){const a={};for(const r of n){const{key:u,value:m}=r;if(u.status==="aborted"||m.status==="aborted")return Ge;u.status==="dirty"&&t.dirty(),m.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof m.value<"u"||r.alwaysSet)&&(a[u.value]=m.value)}return{status:t.value,value:a}}}const Ge=Object.freeze({status:"aborted"}),Wo=l=>({status:"dirty",value:l}),Un=l=>({status:"valid",value:l}),vp=l=>l.status==="aborted",Tp=l=>l.status==="dirty",Ja=l=>l.status==="valid",Nr=l=>typeof Promise<"u"&&l instanceof Promise;var Ee;(function(l){l.errToObj=t=>typeof t=="string"?{message:t}:t||{},l.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ee||(Ee={}));class Kn{constructor(t,n,a,r){this._cachedPath=[],this.parent=t,this.data=n,this._path=a,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Cp=(l,t)=>{if(Ja(t))return{success:!0,data:t.value};if(!l.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new di(l.common.issues);return this._error=n,this._error}}};function qe(l){if(!l)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:r}=l;if(t&&(n||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:r}:{errorMap:(m,g)=>{const{message:y}=l;return m.code==="invalid_enum_value"?{message:y??g.defaultError}:typeof g.data>"u"?{message:y??a??g.defaultError}:m.code!=="invalid_type"?{message:g.defaultError}:{message:y??n??g.defaultError}},description:r}}class Je{get description(){return this._def.description}_getType(t){return Ui(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Ui(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ln,ctx:{common:t.parent.common,data:t.data,parsedType:Ui(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Nr(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const a=this.safeParse(t,n);if(a.success)return a.data;throw a.error}safeParse(t,n){const a={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ui(t)},r=this._parseSync({data:t,path:a.path,parent:a});return Cp(a,r)}"~validate"(t){var a,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ui(t)};if(!this["~standard"].async)try{const u=this._parseSync({data:t,path:[],parent:n});return Ja(u)?{value:u.value}:{issues:n.common.issues}}catch(u){(r=(a=u==null?void 0:u.message)==null?void 0:a.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(u=>Ja(u)?{value:u.value}:{issues:n.common.issues})}async parseAsync(t,n){const a=await this.safeParseAsync(t,n);if(a.success)return a.data;throw a.error}async safeParseAsync(t,n){const a={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ui(t)},r=this._parse({data:t,path:a.path,parent:a}),u=await(Nr(r)?r:Promise.resolve(r));return Cp(a,u)}refine(t,n){const a=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,u)=>{const m=t(r),g=()=>u.addIssue({code:pe.custom,...a(r)});return typeof Promise<"u"&&m instanceof Promise?m.then(y=>y?!0:(g(),!1)):m?!0:(g(),!1)})}refinement(t,n){return this._refinement((a,r)=>t(a)?!0:(r.addIssue(typeof n=="function"?n(a,r):n),!1))}_refinement(t){return new ja({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Pi.create(this,this._def)}nullable(){return Wa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zn.create(this)}promise(){return Ir.create(this,this._def)}or(t){return wr.create([this,t],this._def)}and(t){return Rr.create(this,t,this._def)}transform(t){return new ja({...qe(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new oc({...qe(this._def),innerType:this,defaultValue:n,typeName:Oe.ZodDefault})}brand(){return new w0({typeName:Oe.ZodBranded,type:this,...qe(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new lc({...qe(this._def),innerType:this,catchValue:n,typeName:Oe.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Cc.create(this,t)}readonly(){return rc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const l0=/^c[^\s-]{8,}$/i,r0=/^[0-9a-z]+$/,s0=/^[0-9A-HJKMNP-TV-Z]{26}$/i,u0=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,c0=/^[a-z0-9_-]{21}$/i,d0=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,f0=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,m0=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,p0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wu;const h0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,g0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,y0=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,v0=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,T0=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,C0=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,rg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",x0=new RegExp(`^${rg}$`);function sg(l){let t="[0-5]\\d";l.precision?t=`${t}\\.\\d{${l.precision}}`:l.precision==null&&(t=`${t}(\\.\\d+)?`);const n=l.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function E0(l){return new RegExp(`^${sg(l)}$`)}function _0(l){let t=`${rg}T${sg(l)}`;const n=[];return n.push(l.local?"Z?":"Z"),l.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function S0(l,t){return!!((t==="v4"||!t)&&h0.test(l)||(t==="v6"||!t)&&y0.test(l))}function b0(l,t){if(!d0.test(l))return!1;try{const[n]=l.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(a));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&r.alg!==t)}catch{return!1}}function N0(l,t){return!!((t==="v4"||!t)&&g0.test(l)||(t==="v6"||!t)&&v0.test(l))}class Yn extends Je{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==xe.string){const u=this._getOrReturnCtx(t);return ve(u,{code:pe.invalid_type,expected:xe.string,received:u.parsedType}),Ge}const a=new ln;let r;for(const u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),a.dirty());else if(u.kind==="max")t.data.length>u.value&&(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),a.dirty());else if(u.kind==="length"){const m=t.data.length>u.value,g=t.data.length<u.value;(m||g)&&(r=this._getOrReturnCtx(t,r),m?ve(r,{code:pe.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):g&&ve(r,{code:pe.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),a.dirty())}else if(u.kind==="email")m0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"email",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="emoji")Wu||(Wu=new RegExp(p0,"u")),Wu.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"emoji",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="uuid")u0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"uuid",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="nanoid")c0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"nanoid",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="cuid")l0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"cuid",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="cuid2")r0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"cuid2",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="ulid")s0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"ulid",code:pe.invalid_string,message:u.message}),a.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{r=this._getOrReturnCtx(t,r),ve(r,{validation:"url",code:pe.invalid_string,message:u.message}),a.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"regex",code:pe.invalid_string,message:u.message}),a.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),a.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.invalid_string,validation:{startsWith:u.value},message:u.message}),a.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.invalid_string,validation:{endsWith:u.value},message:u.message}),a.dirty()):u.kind==="datetime"?_0(u).test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.invalid_string,validation:"datetime",message:u.message}),a.dirty()):u.kind==="date"?x0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.invalid_string,validation:"date",message:u.message}),a.dirty()):u.kind==="time"?E0(u).test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.invalid_string,validation:"time",message:u.message}),a.dirty()):u.kind==="duration"?f0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"duration",code:pe.invalid_string,message:u.message}),a.dirty()):u.kind==="ip"?S0(t.data,u.version)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"ip",code:pe.invalid_string,message:u.message}),a.dirty()):u.kind==="jwt"?b0(t.data,u.alg)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"jwt",code:pe.invalid_string,message:u.message}),a.dirty()):u.kind==="cidr"?N0(t.data,u.version)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"cidr",code:pe.invalid_string,message:u.message}),a.dirty()):u.kind==="base64"?T0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"base64",code:pe.invalid_string,message:u.message}),a.dirty()):u.kind==="base64url"?C0.test(t.data)||(r=this._getOrReturnCtx(t,r),ve(r,{validation:"base64url",code:pe.invalid_string,message:u.message}),a.dirty()):tt.assertNever(u);return{status:a.value,value:t.data}}_regex(t,n,a){return this.refinement(r=>t.test(r),{validation:n,code:pe.invalid_string,...Ee.errToObj(a)})}_addCheck(t){return new Yn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ee.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ee.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ee.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ee.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ee.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ee.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ee.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ee.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ee.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ee.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ee.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ee.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ee.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ee.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ee.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ee.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Ee.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Ee.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Ee.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Ee.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Ee.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Ee.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Ee.errToObj(n)})}nonempty(t){return this.min(1,Ee.errToObj(t))}trim(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Yn.create=l=>new Yn({checks:[],typeName:Oe.ZodString,coerce:(l==null?void 0:l.coerce)??!1,...qe(l)});function A0(l,t){const n=(l.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,r=n>a?n:a,u=Number.parseInt(l.toFixed(r).replace(".","")),m=Number.parseInt(t.toFixed(r).replace(".",""));return u%m/10**r}class ra extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==xe.number){const u=this._getOrReturnCtx(t);return ve(u,{code:pe.invalid_type,expected:xe.number,received:u.parsedType}),Ge}let a;const r=new ln;for(const u of this._def.checks)u.kind==="int"?tt.isInteger(t.data)||(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.invalid_type,expected:"integer",received:"float",message:u.message}),r.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),r.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),r.dirty()):u.kind==="multipleOf"?A0(t.data,u.value)!==0&&(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.not_multiple_of,multipleOf:u.value,message:u.message}),r.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.not_finite,message:u.message}),r.dirty()):tt.assertNever(u);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Ee.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ee.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ee.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ee.toString(n))}setLimit(t,n,a,r){return new ra({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:a,message:Ee.toString(r)}]})}_addCheck(t){return new ra({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ee.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Ee.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&tt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(n===null||a.value>n)&&(n=a.value):a.kind==="max"&&(t===null||a.value<t)&&(t=a.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ra.create=l=>new ra({checks:[],typeName:Oe.ZodNumber,coerce:(l==null?void 0:l.coerce)||!1,...qe(l)});class sa extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==xe.bigint)return this._getInvalidInput(t);let a;const r=new ln;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),r.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),r.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(a=this._getOrReturnCtx(t,a),ve(a,{code:pe.not_multiple_of,multipleOf:u.value,message:u.message}),r.dirty()):tt.assertNever(u);return{status:r.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return ve(n,{code:pe.invalid_type,expected:xe.bigint,received:n.parsedType}),Ge}gte(t,n){return this.setLimit("min",t,!0,Ee.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ee.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ee.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ee.toString(n))}setLimit(t,n,a,r){return new sa({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:a,message:Ee.toString(r)}]})}_addCheck(t){return new sa({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}sa.create=l=>new sa({checks:[],typeName:Oe.ZodBigInt,coerce:(l==null?void 0:l.coerce)??!1,...qe(l)});class Ar extends Je{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==xe.boolean){const a=this._getOrReturnCtx(t);return ve(a,{code:pe.invalid_type,expected:xe.boolean,received:a.parsedType}),Ge}return Un(t.data)}}Ar.create=l=>new Ar({typeName:Oe.ZodBoolean,coerce:(l==null?void 0:l.coerce)||!1,...qe(l)});class Xa extends Je{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==xe.date){const u=this._getOrReturnCtx(t);return ve(u,{code:pe.invalid_type,expected:xe.date,received:u.parsedType}),Ge}if(Number.isNaN(t.data.getTime())){const u=this._getOrReturnCtx(t);return ve(u,{code:pe.invalid_date}),Ge}const a=new ln;let r;for(const u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),a.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(r=this._getOrReturnCtx(t,r),ve(r,{code:pe.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),a.dirty()):tt.assertNever(u);return{status:a.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Xa({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Ee.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Ee.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Xa.create=l=>new Xa({checks:[],coerce:(l==null?void 0:l.coerce)||!1,typeName:Oe.ZodDate,...qe(l)});class xp extends Je{_parse(t){if(this._getType(t)!==xe.symbol){const a=this._getOrReturnCtx(t);return ve(a,{code:pe.invalid_type,expected:xe.symbol,received:a.parsedType}),Ge}return Un(t.data)}}xp.create=l=>new xp({typeName:Oe.ZodSymbol,...qe(l)});class Ep extends Je{_parse(t){if(this._getType(t)!==xe.undefined){const a=this._getOrReturnCtx(t);return ve(a,{code:pe.invalid_type,expected:xe.undefined,received:a.parsedType}),Ge}return Un(t.data)}}Ep.create=l=>new Ep({typeName:Oe.ZodUndefined,...qe(l)});class _p extends Je{_parse(t){if(this._getType(t)!==xe.null){const a=this._getOrReturnCtx(t);return ve(a,{code:pe.invalid_type,expected:xe.null,received:a.parsedType}),Ge}return Un(t.data)}}_p.create=l=>new _p({typeName:Oe.ZodNull,...qe(l)});class Sp extends Je{constructor(){super(...arguments),this._any=!0}_parse(t){return Un(t.data)}}Sp.create=l=>new Sp({typeName:Oe.ZodAny,...qe(l)});class nc extends Je{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Un(t.data)}}nc.create=l=>new nc({typeName:Oe.ZodUnknown,...qe(l)});class Gi extends Je{_parse(t){const n=this._getOrReturnCtx(t);return ve(n,{code:pe.invalid_type,expected:xe.never,received:n.parsedType}),Ge}}Gi.create=l=>new Gi({typeName:Oe.ZodNever,...qe(l)});class bp extends Je{_parse(t){if(this._getType(t)!==xe.undefined){const a=this._getOrReturnCtx(t);return ve(a,{code:pe.invalid_type,expected:xe.void,received:a.parsedType}),Ge}return Un(t.data)}}bp.create=l=>new bp({typeName:Oe.ZodVoid,...qe(l)});class Zn extends Je{_parse(t){const{ctx:n,status:a}=this._processInputParams(t),r=this._def;if(n.parsedType!==xe.array)return ve(n,{code:pe.invalid_type,expected:xe.array,received:n.parsedType}),Ge;if(r.exactLength!==null){const m=n.data.length>r.exactLength.value,g=n.data.length<r.exactLength.value;(m||g)&&(ve(n,{code:m?pe.too_big:pe.too_small,minimum:g?r.exactLength.value:void 0,maximum:m?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),a.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ve(n,{code:pe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),a.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ve(n,{code:pe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),a.dirty()),n.common.async)return Promise.all([...n.data].map((m,g)=>r.type._parseAsync(new Kn(n,m,n.path,g)))).then(m=>ln.mergeArray(a,m));const u=[...n.data].map((m,g)=>r.type._parseSync(new Kn(n,m,n.path,g)));return ln.mergeArray(a,u)}get element(){return this._def.type}min(t,n){return new Zn({...this._def,minLength:{value:t,message:Ee.toString(n)}})}max(t,n){return new Zn({...this._def,maxLength:{value:t,message:Ee.toString(n)}})}length(t,n){return new Zn({...this._def,exactLength:{value:t,message:Ee.toString(n)}})}nonempty(t){return this.min(1,t)}}Zn.create=(l,t)=>new Zn({type:l,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...qe(t)});function Ya(l){if(l instanceof $t){const t={};for(const n in l.shape){const a=l.shape[n];t[n]=Pi.create(Ya(a))}return new $t({...l._def,shape:()=>t})}else return l instanceof Zn?new Zn({...l._def,type:Ya(l.element)}):l instanceof Pi?Pi.create(Ya(l.unwrap())):l instanceof Wa?Wa.create(Ya(l.unwrap())):l instanceof ua?ua.create(l.items.map(t=>Ya(t))):l}class $t extends Je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=tt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==xe.object){const p=this._getOrReturnCtx(t);return ve(p,{code:pe.invalid_type,expected:xe.object,received:p.parsedType}),Ge}const{status:a,ctx:r}=this._processInputParams(t),{shape:u,keys:m}=this._getCached(),g=[];if(!(this._def.catchall instanceof Gi&&this._def.unknownKeys==="strip"))for(const p in r.data)m.includes(p)||g.push(p);const y=[];for(const p of m){const v=u[p],E=r.data[p];y.push({key:{status:"valid",value:p},value:v._parse(new Kn(r,E,r.path,p)),alwaysSet:p in r.data})}if(this._def.catchall instanceof Gi){const p=this._def.unknownKeys;if(p==="passthrough")for(const v of g)y.push({key:{status:"valid",value:v},value:{status:"valid",value:r.data[v]}});else if(p==="strict")g.length>0&&(ve(r,{code:pe.unrecognized_keys,keys:g}),a.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const v of g){const E=r.data[v];y.push({key:{status:"valid",value:v},value:p._parse(new Kn(r,E,r.path,v)),alwaysSet:v in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const p=[];for(const v of y){const E=await v.key,x=await v.value;p.push({key:E,value:x,alwaysSet:v.alwaysSet})}return p}).then(p=>ln.mergeObjectSync(a,p)):ln.mergeObjectSync(a,y)}get shape(){return this._def.shape()}strict(t){return Ee.errToObj,new $t({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,a)=>{var u,m;const r=((m=(u=this._def).errorMap)==null?void 0:m.call(u,n,a).message)??a.defaultError;return n.code==="unrecognized_keys"?{message:Ee.errToObj(t).message??r}:{message:r}}}:{}})}strip(){return new $t({...this._def,unknownKeys:"strip"})}passthrough(){return new $t({...this._def,unknownKeys:"passthrough"})}extend(t){return new $t({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new $t({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Oe.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new $t({...this._def,catchall:t})}pick(t){const n={};for(const a of tt.objectKeys(t))t[a]&&this.shape[a]&&(n[a]=this.shape[a]);return new $t({...this._def,shape:()=>n})}omit(t){const n={};for(const a of tt.objectKeys(this.shape))t[a]||(n[a]=this.shape[a]);return new $t({...this._def,shape:()=>n})}deepPartial(){return Ya(this)}partial(t){const n={};for(const a of tt.objectKeys(this.shape)){const r=this.shape[a];t&&!t[a]?n[a]=r:n[a]=r.optional()}return new $t({...this._def,shape:()=>n})}required(t){const n={};for(const a of tt.objectKeys(this.shape))if(t&&!t[a])n[a]=this.shape[a];else{let u=this.shape[a];for(;u instanceof Pi;)u=u._def.innerType;n[a]=u}return new $t({...this._def,shape:()=>n})}keyof(){return ug(tt.objectKeys(this.shape))}}$t.create=(l,t)=>new $t({shape:()=>l,unknownKeys:"strip",catchall:Gi.create(),typeName:Oe.ZodObject,...qe(t)});$t.strictCreate=(l,t)=>new $t({shape:()=>l,unknownKeys:"strict",catchall:Gi.create(),typeName:Oe.ZodObject,...qe(t)});$t.lazycreate=(l,t)=>new $t({shape:l,unknownKeys:"strip",catchall:Gi.create(),typeName:Oe.ZodObject,...qe(t)});class wr extends Je{_parse(t){const{ctx:n}=this._processInputParams(t),a=this._def.options;function r(u){for(const g of u)if(g.result.status==="valid")return g.result;for(const g of u)if(g.result.status==="dirty")return n.common.issues.push(...g.ctx.common.issues),g.result;const m=u.map(g=>new di(g.ctx.common.issues));return ve(n,{code:pe.invalid_union,unionErrors:m}),Ge}if(n.common.async)return Promise.all(a.map(async u=>{const m={...n,common:{...n.common,issues:[]},parent:null};return{result:await u._parseAsync({data:n.data,path:n.path,parent:m}),ctx:m}})).then(r);{let u;const m=[];for(const y of a){const p={...n,common:{...n.common,issues:[]},parent:null},v=y._parseSync({data:n.data,path:n.path,parent:p});if(v.status==="valid")return v;v.status==="dirty"&&!u&&(u={result:v,ctx:p}),p.common.issues.length&&m.push(p.common.issues)}if(u)return n.common.issues.push(...u.ctx.common.issues),u.result;const g=m.map(y=>new di(y));return ve(n,{code:pe.invalid_union,unionErrors:g}),Ge}}get options(){return this._def.options}}wr.create=(l,t)=>new wr({options:l,typeName:Oe.ZodUnion,...qe(t)});function ic(l,t){const n=Ui(l),a=Ui(t);if(l===t)return{valid:!0,data:l};if(n===xe.object&&a===xe.object){const r=tt.objectKeys(t),u=tt.objectKeys(l).filter(g=>r.indexOf(g)!==-1),m={...l,...t};for(const g of u){const y=ic(l[g],t[g]);if(!y.valid)return{valid:!1};m[g]=y.data}return{valid:!0,data:m}}else if(n===xe.array&&a===xe.array){if(l.length!==t.length)return{valid:!1};const r=[];for(let u=0;u<l.length;u++){const m=l[u],g=t[u],y=ic(m,g);if(!y.valid)return{valid:!1};r.push(y.data)}return{valid:!0,data:r}}else return n===xe.date&&a===xe.date&&+l==+t?{valid:!0,data:l}:{valid:!1}}class Rr extends Je{_parse(t){const{status:n,ctx:a}=this._processInputParams(t),r=(u,m)=>{if(vp(u)||vp(m))return Ge;const g=ic(u.value,m.value);return g.valid?((Tp(u)||Tp(m))&&n.dirty(),{status:n.value,value:g.data}):(ve(a,{code:pe.invalid_intersection_types}),Ge)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([u,m])=>r(u,m)):r(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Rr.create=(l,t,n)=>new Rr({left:l,right:t,typeName:Oe.ZodIntersection,...qe(n)});class ua extends Je{_parse(t){const{status:n,ctx:a}=this._processInputParams(t);if(a.parsedType!==xe.array)return ve(a,{code:pe.invalid_type,expected:xe.array,received:a.parsedType}),Ge;if(a.data.length<this._def.items.length)return ve(a,{code:pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ge;!this._def.rest&&a.data.length>this._def.items.length&&(ve(a,{code:pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const u=[...a.data].map((m,g)=>{const y=this._def.items[g]||this._def.rest;return y?y._parse(new Kn(a,m,a.path,g)):null}).filter(m=>!!m);return a.common.async?Promise.all(u).then(m=>ln.mergeArray(n,m)):ln.mergeArray(n,u)}get items(){return this._def.items}rest(t){return new ua({...this._def,rest:t})}}ua.create=(l,t)=>{if(!Array.isArray(l))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ua({items:l,typeName:Oe.ZodTuple,rest:null,...qe(t)})};class Mr extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:a}=this._processInputParams(t);if(a.parsedType!==xe.object)return ve(a,{code:pe.invalid_type,expected:xe.object,received:a.parsedType}),Ge;const r=[],u=this._def.keyType,m=this._def.valueType;for(const g in a.data)r.push({key:u._parse(new Kn(a,g,a.path,g)),value:m._parse(new Kn(a,a.data[g],a.path,g)),alwaysSet:g in a.data});return a.common.async?ln.mergeObjectAsync(n,r):ln.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(t,n,a){return n instanceof Je?new Mr({keyType:t,valueType:n,typeName:Oe.ZodRecord,...qe(a)}):new Mr({keyType:Yn.create(),valueType:t,typeName:Oe.ZodRecord,...qe(n)})}}class Np extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:a}=this._processInputParams(t);if(a.parsedType!==xe.map)return ve(a,{code:pe.invalid_type,expected:xe.map,received:a.parsedType}),Ge;const r=this._def.keyType,u=this._def.valueType,m=[...a.data.entries()].map(([g,y],p)=>({key:r._parse(new Kn(a,g,a.path,[p,"key"])),value:u._parse(new Kn(a,y,a.path,[p,"value"]))}));if(a.common.async){const g=new Map;return Promise.resolve().then(async()=>{for(const y of m){const p=await y.key,v=await y.value;if(p.status==="aborted"||v.status==="aborted")return Ge;(p.status==="dirty"||v.status==="dirty")&&n.dirty(),g.set(p.value,v.value)}return{status:n.value,value:g}})}else{const g=new Map;for(const y of m){const p=y.key,v=y.value;if(p.status==="aborted"||v.status==="aborted")return Ge;(p.status==="dirty"||v.status==="dirty")&&n.dirty(),g.set(p.value,v.value)}return{status:n.value,value:g}}}}Np.create=(l,t,n)=>new Np({valueType:t,keyType:l,typeName:Oe.ZodMap,...qe(n)});class al extends Je{_parse(t){const{status:n,ctx:a}=this._processInputParams(t);if(a.parsedType!==xe.set)return ve(a,{code:pe.invalid_type,expected:xe.set,received:a.parsedType}),Ge;const r=this._def;r.minSize!==null&&a.data.size<r.minSize.value&&(ve(a,{code:pe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&a.data.size>r.maxSize.value&&(ve(a,{code:pe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const u=this._def.valueType;function m(y){const p=new Set;for(const v of y){if(v.status==="aborted")return Ge;v.status==="dirty"&&n.dirty(),p.add(v.value)}return{status:n.value,value:p}}const g=[...a.data.values()].map((y,p)=>u._parse(new Kn(a,y,a.path,p)));return a.common.async?Promise.all(g).then(y=>m(y)):m(g)}min(t,n){return new al({...this._def,minSize:{value:t,message:Ee.toString(n)}})}max(t,n){return new al({...this._def,maxSize:{value:t,message:Ee.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}al.create=(l,t)=>new al({valueType:l,minSize:null,maxSize:null,typeName:Oe.ZodSet,...qe(t)});class ac extends Je{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ac.create=(l,t)=>new ac({getter:l,typeName:Oe.ZodLazy,...qe(t)});class Ap extends Je{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return ve(n,{received:n.data,code:pe.invalid_literal,expected:this._def.value}),Ge}return{status:"valid",value:t.data}}get value(){return this._def.value}}Ap.create=(l,t)=>new Ap({value:l,typeName:Oe.ZodLiteral,...qe(t)});function ug(l,t){return new Qa({values:l,typeName:Oe.ZodEnum,...qe(t)})}class Qa extends Je{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),a=this._def.values;return ve(n,{expected:tt.joinValues(a),received:n.parsedType,code:pe.invalid_type}),Ge}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),a=this._def.values;return ve(n,{received:n.data,code:pe.invalid_enum_value,options:a}),Ge}return Un(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Qa.create(t,{...this._def,...n})}exclude(t,n=this._def){return Qa.create(this.options.filter(a=>!t.includes(a)),{...this._def,...n})}}Qa.create=ug;class wp extends Je{_parse(t){const n=tt.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==xe.string&&a.parsedType!==xe.number){const r=tt.objectValues(n);return ve(a,{expected:tt.joinValues(r),received:a.parsedType,code:pe.invalid_type}),Ge}if(this._cache||(this._cache=new Set(tt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const r=tt.objectValues(n);return ve(a,{received:a.data,code:pe.invalid_enum_value,options:r}),Ge}return Un(t.data)}get enum(){return this._def.values}}wp.create=(l,t)=>new wp({values:l,typeName:Oe.ZodNativeEnum,...qe(t)});class Ir extends Je{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==xe.promise&&n.common.async===!1)return ve(n,{code:pe.invalid_type,expected:xe.promise,received:n.parsedType}),Ge;const a=n.parsedType===xe.promise?n.data:Promise.resolve(n.data);return Un(a.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ir.create=(l,t)=>new Ir({type:l,typeName:Oe.ZodPromise,...qe(t)});class ja extends Je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:a}=this._processInputParams(t),r=this._def.effect||null,u={addIssue:m=>{ve(a,m),m.fatal?n.abort():n.dirty()},get path(){return a.path}};if(u.addIssue=u.addIssue.bind(u),r.type==="preprocess"){const m=r.transform(a.data,u);if(a.common.async)return Promise.resolve(m).then(async g=>{if(n.value==="aborted")return Ge;const y=await this._def.schema._parseAsync({data:g,path:a.path,parent:a});return y.status==="aborted"?Ge:y.status==="dirty"||n.value==="dirty"?Wo(y.value):y});{if(n.value==="aborted")return Ge;const g=this._def.schema._parseSync({data:m,path:a.path,parent:a});return g.status==="aborted"?Ge:g.status==="dirty"||n.value==="dirty"?Wo(g.value):g}}if(r.type==="refinement"){const m=g=>{const y=r.refinement(g,u);if(a.common.async)return Promise.resolve(y);if(y instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return g};if(a.common.async===!1){const g=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return g.status==="aborted"?Ge:(g.status==="dirty"&&n.dirty(),m(g.value),{status:n.value,value:g.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(g=>g.status==="aborted"?Ge:(g.status==="dirty"&&n.dirty(),m(g.value).then(()=>({status:n.value,value:g.value}))))}if(r.type==="transform")if(a.common.async===!1){const m=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Ja(m))return Ge;const g=r.transform(m.value,u);if(g instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:g}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(m=>Ja(m)?Promise.resolve(r.transform(m.value,u)).then(g=>({status:n.value,value:g})):Ge);tt.assertNever(r)}}ja.create=(l,t,n)=>new ja({schema:l,typeName:Oe.ZodEffects,effect:t,...qe(n)});ja.createWithPreprocess=(l,t,n)=>new ja({schema:t,effect:{type:"preprocess",transform:l},typeName:Oe.ZodEffects,...qe(n)});class Pi extends Je{_parse(t){return this._getType(t)===xe.undefined?Un(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Pi.create=(l,t)=>new Pi({innerType:l,typeName:Oe.ZodOptional,...qe(t)});class Wa extends Je{_parse(t){return this._getType(t)===xe.null?Un(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wa.create=(l,t)=>new Wa({innerType:l,typeName:Oe.ZodNullable,...qe(t)});class oc extends Je{_parse(t){const{ctx:n}=this._processInputParams(t);let a=n.data;return n.parsedType===xe.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}oc.create=(l,t)=>new oc({innerType:l,typeName:Oe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...qe(t)});class lc extends Je{_parse(t){const{ctx:n}=this._processInputParams(t),a={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Nr(r)?r.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new di(a.common.issues)},input:a.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new di(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}lc.create=(l,t)=>new lc({innerType:l,typeName:Oe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...qe(t)});class Rp extends Je{_parse(t){if(this._getType(t)!==xe.nan){const a=this._getOrReturnCtx(t);return ve(a,{code:pe.invalid_type,expected:xe.nan,received:a.parsedType}),Ge}return{status:"valid",value:t.data}}}Rp.create=l=>new Rp({typeName:Oe.ZodNaN,...qe(l)});class w0 extends Je{_parse(t){const{ctx:n}=this._processInputParams(t),a=n.data;return this._def.type._parse({data:a,path:n.path,parent:n})}unwrap(){return this._def.type}}class Cc extends Je{_parse(t){const{status:n,ctx:a}=this._processInputParams(t);if(a.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return u.status==="aborted"?Ge:u.status==="dirty"?(n.dirty(),Wo(u.value)):this._def.out._parseAsync({data:u.value,path:a.path,parent:a})})();{const r=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return r.status==="aborted"?Ge:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:a.path,parent:a})}}static create(t,n){return new Cc({in:t,out:n,typeName:Oe.ZodPipeline})}}class rc extends Je{_parse(t){const n=this._def.innerType._parse(t),a=r=>(Ja(r)&&(r.value=Object.freeze(r.value)),r);return Nr(n)?n.then(r=>a(r)):a(n)}unwrap(){return this._def.innerType}}rc.create=(l,t)=>new rc({innerType:l,typeName:Oe.ZodReadonly,...qe(t)});var Oe;(function(l){l.ZodString="ZodString",l.ZodNumber="ZodNumber",l.ZodNaN="ZodNaN",l.ZodBigInt="ZodBigInt",l.ZodBoolean="ZodBoolean",l.ZodDate="ZodDate",l.ZodSymbol="ZodSymbol",l.ZodUndefined="ZodUndefined",l.ZodNull="ZodNull",l.ZodAny="ZodAny",l.ZodUnknown="ZodUnknown",l.ZodNever="ZodNever",l.ZodVoid="ZodVoid",l.ZodArray="ZodArray",l.ZodObject="ZodObject",l.ZodUnion="ZodUnion",l.ZodDiscriminatedUnion="ZodDiscriminatedUnion",l.ZodIntersection="ZodIntersection",l.ZodTuple="ZodTuple",l.ZodRecord="ZodRecord",l.ZodMap="ZodMap",l.ZodSet="ZodSet",l.ZodFunction="ZodFunction",l.ZodLazy="ZodLazy",l.ZodLiteral="ZodLiteral",l.ZodEnum="ZodEnum",l.ZodEffects="ZodEffects",l.ZodNativeEnum="ZodNativeEnum",l.ZodOptional="ZodOptional",l.ZodNullable="ZodNullable",l.ZodDefault="ZodDefault",l.ZodCatch="ZodCatch",l.ZodPromise="ZodPromise",l.ZodBranded="ZodBranded",l.ZodPipeline="ZodPipeline",l.ZodReadonly="ZodReadonly"})(Oe||(Oe={}));const la=Yn.create,Mp=ra.create;sa.create;const R0=Ar.create;Xa.create;const Ip=nc.create;Gi.create;const el=Zn.create,M0=$t.create,I0=wr.create;Rr.create;ua.create;const D0=Mr.create,L0=ac.create,k0=Qa.create;Ir.create;Pi.create;Wa.create;const Fa={string:l=>Yn.create({...l,coerce:!0}),number:l=>ra.create({...l,coerce:!0}),boolean:l=>Ar.create({...l,coerce:!0}),bigint:l=>sa.create({...l,coerce:!0}),date:l=>Xa.create({...l,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let U0,P0;function O0(){return{geminiUrl:U0,vertexUrl:P0}}function G0(l,t,n){var a,r,u;if(!(!((a=l.httpOptions)===null||a===void 0)&&a.baseUrl)){const m=O0();return l.vertexai?(r=m.vertexUrl)!==null&&r!==void 0?r:t:(u=m.geminiUrl)!==null&&u!==void 0?u:n}return l.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ll{}function Ue(l,t){const n=/\{([^}]+)\}/g;return l.replace(n,(a,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(l,t,n){for(let u=0;u<t.length-1;u++){const m=t[u];if(m.endsWith("[]")){const g=m.slice(0,-2);if(!(g in l))if(Array.isArray(n))l[g]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(l[g])){const y=l[g];if(Array.isArray(n))for(let p=0;p<y.length;p++){const v=y[p];d(v,t.slice(u+1),n[p])}else for(const p of y)d(p,t.slice(u+1),n)}return}else if(m.endsWith("[0]")){const g=m.slice(0,-3);g in l||(l[g]=[{}]);const y=l[g];d(y[0],t.slice(u+1),n);return}(!l[m]||typeof l[m]!="object")&&(l[m]={}),l=l[m]}const a=t[t.length-1],r=l[a];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else l[a]=n}function c(l,t){try{if(t.length===1&&t[0]==="_self")return l;for(let n=0;n<t.length;n++){if(typeof l!="object"||l===null)return;const a=t[n];if(a.endsWith("[]")){const r=a.slice(0,-2);if(r in l){const u=l[r];return Array.isArray(u)?u.map(m=>c(m,t.slice(n+1))):void 0}else return}else l=l[a]}return l}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dp;(function(l){l.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",l.OUTCOME_OK="OUTCOME_OK",l.OUTCOME_FAILED="OUTCOME_FAILED",l.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dp||(Dp={}));var Lp;(function(l){l.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",l.PYTHON="PYTHON"})(Lp||(Lp={}));var S;(function(l){l.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",l.STRING="STRING",l.NUMBER="NUMBER",l.INTEGER="INTEGER",l.BOOLEAN="BOOLEAN",l.ARRAY="ARRAY",l.OBJECT="OBJECT",l.NULL="NULL"})(S||(S={}));var kp;(function(l){l.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",l.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",l.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",l.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",l.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(kp||(kp={}));var Up;(function(l){l.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",l.SEVERITY="SEVERITY",l.PROBABILITY="PROBABILITY"})(Up||(Up={}));var Pp;(function(l){l.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE",l.OFF="OFF"})(Pp||(Pp={}));var Op;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(Op||(Op={}));var Gp;(function(l){l.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",l.NO_AUTH="NO_AUTH",l.API_KEY_AUTH="API_KEY_AUTH",l.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",l.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",l.OAUTH="OAUTH",l.OIDC_AUTH="OIDC_AUTH"})(Gp||(Gp={}));var Vp;(function(l){l.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.OTHER="OTHER",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.IMAGE_SAFETY="IMAGE_SAFETY"})(Vp||(Vp={}));var $p;(function(l){l.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH"})($p||($p={}));var Hp;(function(l){l.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",l.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",l.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",l.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",l.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Hp||(Hp={}));var qp;(function(l){l.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(qp||(qp={}));var Bp;(function(l){l.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",l.ON_DEMAND="ON_DEMAND",l.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Bp||(Bp={}));var Dr;(function(l){l.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",l.TEXT="TEXT",l.IMAGE="IMAGE",l.AUDIO="AUDIO"})(Dr||(Dr={}));var zp;(function(l){l.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",l.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",l.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",l.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(zp||(zp={}));var sc;(function(l){l.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",l.JOB_STATE_QUEUED="JOB_STATE_QUEUED",l.JOB_STATE_PENDING="JOB_STATE_PENDING",l.JOB_STATE_RUNNING="JOB_STATE_RUNNING",l.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",l.JOB_STATE_FAILED="JOB_STATE_FAILED",l.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",l.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",l.JOB_STATE_PAUSED="JOB_STATE_PAUSED",l.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",l.JOB_STATE_UPDATING="JOB_STATE_UPDATING",l.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sc||(sc={}));var Fp;(function(l){l.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",l.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",l.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",l.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",l.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",l.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",l.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Fp||(Fp={}));var Yp;(function(l){l.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",l.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",l.BALANCED="BALANCED",l.PRIORITIZE_COST="PRIORITIZE_COST"})(Yp||(Yp={}));var Zp;(function(l){l.UNSPECIFIED="UNSPECIFIED",l.BLOCKING="BLOCKING",l.NON_BLOCKING="NON_BLOCKING"})(Zp||(Zp={}));var Kp;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(Kp||(Kp={}));var Jp;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.AUTO="AUTO",l.ANY="ANY",l.NONE="NONE"})(Jp||(Jp={}));var Xp;(function(l){l.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",l.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",l.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Xp||(Xp={}));var Qp;(function(l){l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE"})(Qp||(Qp={}));var jp;(function(l){l.DONT_ALLOW="DONT_ALLOW",l.ALLOW_ADULT="ALLOW_ADULT",l.ALLOW_ALL="ALLOW_ALL"})(jp||(jp={}));var Wp;(function(l){l.auto="auto",l.en="en",l.ja="ja",l.ko="ko",l.hi="hi"})(Wp||(Wp={}));var eh;(function(l){l.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",l.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",l.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",l.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",l.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(eh||(eh={}));var th;(function(l){l.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",l.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",l.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",l.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(th||(th={}));var nh;(function(l){l.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",l.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",l.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",l.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nh||(nh={}));var ih;(function(l){l.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",l.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",l.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",l.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",l.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",l.EDIT_MODE_STYLE="EDIT_MODE_STYLE",l.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",l.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ih||(ih={}));var ah;(function(l){l.STATE_UNSPECIFIED="STATE_UNSPECIFIED",l.PROCESSING="PROCESSING",l.ACTIVE="ACTIVE",l.FAILED="FAILED"})(ah||(ah={}));var oh;(function(l){l.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",l.UPLOADED="UPLOADED",l.GENERATED="GENERATED"})(oh||(oh={}));var lh;(function(l){l.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",l.TEXT="TEXT",l.IMAGE="IMAGE",l.VIDEO="VIDEO",l.AUDIO="AUDIO",l.DOCUMENT="DOCUMENT"})(lh||(lh={}));var rh;(function(l){l.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",l.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",l.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rh||(rh={}));var sh;(function(l){l.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",l.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",l.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sh||(sh={}));var uh;(function(l){l.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",l.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",l.NO_INTERRUPTION="NO_INTERRUPTION"})(uh||(uh={}));var ch;(function(l){l.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",l.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",l.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ch||(ch={}));var dh;(function(l){l.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",l.SILENT="SILENT",l.WHEN_IDLE="WHEN_IDLE",l.INTERRUPT="INTERRUPT"})(dh||(dh={}));var fh;(function(l){l.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",l.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",l.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",l.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",l.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",l.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",l.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",l.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",l.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",l.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",l.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",l.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",l.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fh||(fh={}));var Za;(function(l){l.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",l.PLAY="PLAY",l.PAUSE="PAUSE",l.STOP="STOP",l.RESET_CONTEXT="RESET_CONTEXT"})(Za||(Za={}));class jo{get text(){var t,n,a,r,u,m,g,y;if(((r=(a=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const x of(y=(g=(m=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[b,R]of Object.entries(x))b!=="text"&&b!=="thought"&&(R!==null||R!==void 0)&&E.push(b);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;v=!0,p+=x.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var t,n,a,r,u,m,g,y;if(((r=(a=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(y=(g=(m=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[x,b]of Object.entries(E))x!=="inlineData"&&(b!==null||b!==void 0)&&v.push(x);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var t,n,a,r,u,m,g,y;if(((r=(a=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(g=(m=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var t,n,a,r,u,m,g,y,p;if(((r=(a=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(g=(m=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var t,n,a,r,u,m,g,y,p;if(((r=(a=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(g=(m=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class mh{}class ph{}class V0{}class $0{}class hh{}class gh{}class yh{}class H0{}class vh{}class Th{}class Ch{}class q0{}class uc{constructor(t){const n={};for(const a of t.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class B0{}class z0{}class F0{get text(){var t,n,a;let r="",u=!1;const m=[];for(const g of(a=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[y,p]of Object.entries(g))y!=="text"&&y!=="thought"&&p!==null&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;u=!0,r+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,n,a;let r="";const u=[];for(const m of(a=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&y!==null&&u.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(r+=atob(m.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Y0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bt(l,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(l.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function cg(l,t){const n=bt(l,t);return n?n.startsWith("publishers/")&&l.isVertexAI()?`projects/${l.getProject()}/locations/${l.getLocation()}/${n}`:n.startsWith("models/")&&l.isVertexAI()?`projects/${l.getProject()}/locations/${l.getLocation()}/publishers/google/${n}`:n:""}function dg(l,t){return Array.isArray(t)?t.map(n=>Lr(l,n)):[Lr(l,t)]}function Lr(l,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Z0(l,t){const n=Lr(l,t);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function K0(l,t){const n=Lr(l,t);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function xh(l,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function fg(l,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(n=>xh(l,n)):[xh(l,t)]}function cc(l){return l!=null&&typeof l=="object"&&"parts"in l&&Array.isArray(l.parts)}function Eh(l){return l!=null&&typeof l=="object"&&"functionCall"in l}function _h(l){return l!=null&&typeof l=="object"&&"functionResponse"in l}function mn(l,t){if(t==null)throw new Error("ContentUnion is required");return cc(t)?t:{role:"user",parts:fg(l,t)}}function mg(l,t){if(!t)return[];if(l.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const a=mn(l,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(l.isVertexAI()){const n=mn(l,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>mn(l,n)):[mn(l,t)]}function Vn(l,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Eh(t)||_h(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mn(l,t)]}const n=[],a=[],r=cc(t[0]);for(const u of t){const m=cc(u);if(m!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(m)n.push(u);else{if(Eh(u)||_h(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(u)}}return r||n.push({role:"user",parts:fg(l,a)}),n}const Sh=k0(["string","number","integer","object","array","boolean","null"]),J0=I0([Sh,el(Sh)]);function X0(l=!0){const t=L0(()=>{const n=M0({type:J0.optional(),format:la().optional(),title:la().optional(),description:la().optional(),default:Ip().optional(),items:t.optional(),minItems:Fa.string().optional(),maxItems:Fa.string().optional(),enum:el(Ip()).optional(),properties:D0(la(),t).optional(),required:el(la()).optional(),minProperties:Fa.string().optional(),maxProperties:Fa.string().optional(),propertyOrdering:el(la()).optional(),minimum:Mp().optional(),maximum:Mp().optional(),minLength:Fa.string().optional(),maxLength:Fa.string().optional(),pattern:la().optional(),anyOf:el(t).optional(),additionalProperties:R0().optional()});return l?n.strict():n});return t}function Q0(l,t){l.includes("null")&&(t.nullable=!0);const n=l.filter(a=>a!=="null");if(n.length===1)t.type=Object.keys(S).includes(n[0].toUpperCase())?S[n[0].toUpperCase()]:S.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const a of n)t.anyOf.push({type:Object.keys(S).includes(a.toUpperCase())?S[a.toUpperCase()]:S.TYPE_UNSPECIFIED})}}function nl(l){const t={},n=["items"],a=["anyOf"],r=["properties"];if(l.type&&l.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=l.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,l=u[1]):u[1].type==="null"&&(t.nullable=!0,l=u[0])),l.type instanceof Array&&Q0(l.type,t);for(const[m,g]of Object.entries(l))if(g!=null)if(m=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;t.type=Object.keys(S).includes(g.toUpperCase())?g.toUpperCase():S.TYPE_UNSPECIFIED}else if(n.includes(m))t[m]=nl(g);else if(a.includes(m)){const y=[];for(const p of g){if(p.type=="null"){t.nullable=!0;continue}y.push(nl(p))}t[m]=y}else if(r.includes(m)){const y={};for(const[p,v]of Object.entries(g))y[p]=nl(v);t[m]=y}else{if(m==="additionalProperties")continue;t[m]=g}return t}function kr(l,t){if(Object.keys(t).includes("$schema")){delete t.$schema;const n=X0().parse(t);return nl(n)}else return nl(t)}function pg(l,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function hg(l,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ur(l,t){if(t.functionDeclarations)for(const n of t.functionDeclarations)n.parameters&&(n.parameters=kr(l,n.parameters)),n.response&&(n.response=kr(l,n.response));return t}function Pr(l,t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const n=[];for(const a of t)n.push(a);return n}function j0(l,t,n,a=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===a;return l.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${l.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${l.getProject()}/locations/${l.getLocation()}/${t}`:r?`projects/${l.getProject()}/locations/${l.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Vi(l,t){if(typeof t!="string")throw new Error("name must be a string");return j0(l,t,"cachedContents")}function gg(l,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function $i(l,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function W0(l){return l!=null&&typeof l=="object"&&"name"in l}function eT(l){return l!=null&&typeof l=="object"&&"video"in l}function tT(l){return l!=null&&typeof l=="object"&&"uri"in l}function yg(l,t){var n;let a;if(W0(t)&&(a=t.name),!(tT(t)&&(a=t.uri,a===void 0))&&!(eT(t)&&(a=(n=t.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof t=="string"&&(a=t),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const u=a.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${a}`);a=u[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function vg(l,t){let n;return l.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Tg(l,t){for(const n of["models","tunedModels","publisherModels"])if(nT(t,n))return t[n];return[]}function nT(l,t){return l!==null&&typeof l=="object"&&t in l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iT(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function aT(l,t){const n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["data"]);a!=null&&d(n,["data"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function oT(l,t){const n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["fileUri"]);a!=null&&d(n,["fileUri"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function lT(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],iT(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],aT(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],oT(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function bh(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>lT(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function rT(l,t){const n={},a=c(t,["behavior"]);a!=null&&d(n,["behavior"],a);const r=c(t,["description"]);r!=null&&d(n,["description"],r);const u=c(t,["name"]);u!=null&&d(n,["name"],u);const m=c(t,["parameters"]);m!=null&&d(n,["parameters"],m);const g=c(t,["response"]);return g!=null&&d(n,["response"],g),n}function sT(l,t){const n={},a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);const r=c(t,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function uT(l,t){const n={},a=c(t,["timeRangeFilter"]);return a!=null&&d(n,["timeRangeFilter"],sT(l,a)),n}function cT(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function dT(l,t){const n={},a=c(t,["dynamicRetrievalConfig"]);return a!=null&&d(n,["dynamicRetrievalConfig"],cT(l,a)),n}function fT(){return{}}function mT(l,t){const n={},a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(p=>rT(l,p))),d(n,["functionDeclarations"],y)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(n,["googleSearch"],uT(l,r));const u=c(t,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],dT(l,u)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(n,["urlContext"],fT());const g=c(t,["codeExecution"]);return g!=null&&d(n,["codeExecution"],g),n}function pT(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function hT(l,t){const n={},a=c(t,["latitude"]);a!=null&&d(n,["latitude"],a);const r=c(t,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function gT(l,t){const n={},a=c(t,["latLng"]);a!=null&&d(n,["latLng"],hT(l,a));const r=c(t,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function yT(l,t){const n={},a=c(t,["functionCallingConfig"]);a!=null&&d(n,["functionCallingConfig"],pT(l,a));const r=c(t,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],gT(l,r)),n}function vT(l,t,n){const a={},r=c(t,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const u=c(t,["expireTime"]);n!==void 0&&u!=null&&d(n,["expireTime"],u);const m=c(t,["displayName"]);n!==void 0&&m!=null&&d(n,["displayName"],m);const g=c(t,["contents"]);if(n!==void 0&&g!=null){let E=Vn(l,g);Array.isArray(E)&&(E=E.map(x=>bh(l,x))),d(n,["contents"],E)}const y=c(t,["systemInstruction"]);n!==void 0&&y!=null&&d(n,["systemInstruction"],bh(l,mn(l,y)));const p=c(t,["tools"]);if(n!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(x=>mT(l,x))),d(n,["tools"],E)}const v=c(t,["toolConfig"]);if(n!==void 0&&v!=null&&d(n,["toolConfig"],yT(l,v)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return a}function TT(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["model"],cg(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],vT(l,r,n)),n}function CT(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],Vi(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function xT(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],Vi(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function ET(l,t,n){const a={},r=c(t,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const u=c(t,["expireTime"]);return n!==void 0&&u!=null&&d(n,["expireTime"],u),a}function _T(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],Vi(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],ET(l,r,n)),n}function ST(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);return n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),a}function bT(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],ST(l,a,n)),n}function NT(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function AT(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["data"]);r!=null&&d(n,["data"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function wT(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function RT(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],NT(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],AT(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],wT(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function Nh(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>RT(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function MT(l,t){const n={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=c(t,["description"]);a!=null&&d(n,["description"],a);const r=c(t,["name"]);r!=null&&d(n,["name"],r);const u=c(t,["parameters"]);u!=null&&d(n,["parameters"],u);const m=c(t,["response"]);return m!=null&&d(n,["response"],m),n}function IT(l,t){const n={},a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);const r=c(t,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function DT(l,t){const n={},a=c(t,["timeRangeFilter"]);return a!=null&&d(n,["timeRangeFilter"],IT(l,a)),n}function LT(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function kT(l,t){const n={},a=c(t,["dynamicRetrievalConfig"]);return a!=null&&d(n,["dynamicRetrievalConfig"],LT(l,a)),n}function UT(){return{}}function PT(l,t){const n={},a=c(t,["apiKeyString"]);return a!=null&&d(n,["apiKeyString"],a),n}function OT(l,t){const n={},a=c(t,["apiKeyConfig"]);a!=null&&d(n,["apiKeyConfig"],PT(l,a));const r=c(t,["authType"]);r!=null&&d(n,["authType"],r);const u=c(t,["googleServiceAccountConfig"]);u!=null&&d(n,["googleServiceAccountConfig"],u);const m=c(t,["httpBasicAuthConfig"]);m!=null&&d(n,["httpBasicAuthConfig"],m);const g=c(t,["oauthConfig"]);g!=null&&d(n,["oauthConfig"],g);const y=c(t,["oidcConfig"]);return y!=null&&d(n,["oidcConfig"],y),n}function GT(l,t){const n={},a=c(t,["authConfig"]);return a!=null&&d(n,["authConfig"],OT(l,a)),n}function VT(l,t){const n={},a=c(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>MT(l,E))),d(n,["functionDeclarations"],v)}const r=c(t,["retrieval"]);r!=null&&d(n,["retrieval"],r);const u=c(t,["googleSearch"]);u!=null&&d(n,["googleSearch"],DT(l,u));const m=c(t,["googleSearchRetrieval"]);m!=null&&d(n,["googleSearchRetrieval"],kT(l,m)),c(t,["enterpriseWebSearch"])!=null&&d(n,["enterpriseWebSearch"],UT());const y=c(t,["googleMaps"]);if(y!=null&&d(n,["googleMaps"],GT(l,y)),c(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=c(t,["codeExecution"]);return p!=null&&d(n,["codeExecution"],p),n}function $T(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function HT(l,t){const n={},a=c(t,["latitude"]);a!=null&&d(n,["latitude"],a);const r=c(t,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function qT(l,t){const n={},a=c(t,["latLng"]);a!=null&&d(n,["latLng"],HT(l,a));const r=c(t,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function BT(l,t){const n={},a=c(t,["functionCallingConfig"]);a!=null&&d(n,["functionCallingConfig"],$T(l,a));const r=c(t,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],qT(l,r)),n}function zT(l,t,n){const a={},r=c(t,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const u=c(t,["expireTime"]);n!==void 0&&u!=null&&d(n,["expireTime"],u);const m=c(t,["displayName"]);n!==void 0&&m!=null&&d(n,["displayName"],m);const g=c(t,["contents"]);if(n!==void 0&&g!=null){let x=Vn(l,g);Array.isArray(x)&&(x=x.map(b=>Nh(l,b))),d(n,["contents"],x)}const y=c(t,["systemInstruction"]);n!==void 0&&y!=null&&d(n,["systemInstruction"],Nh(l,mn(l,y)));const p=c(t,["tools"]);if(n!==void 0&&p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>VT(l,b))),d(n,["tools"],x)}const v=c(t,["toolConfig"]);n!==void 0&&v!=null&&d(n,["toolConfig"],BT(l,v));const E=c(t,["kmsKeyName"]);return n!==void 0&&E!=null&&d(n,["encryption_spec","kmsKeyName"],E),a}function FT(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["model"],cg(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],zT(l,r,n)),n}function YT(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],Vi(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function ZT(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],Vi(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function KT(l,t,n){const a={},r=c(t,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const u=c(t,["expireTime"]);return n!==void 0&&u!=null&&d(n,["expireTime"],u),a}function JT(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],Vi(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],KT(l,r,n)),n}function XT(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);return n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),a}function QT(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],XT(l,a,n)),n}function Er(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["displayName"]);r!=null&&d(n,["displayName"],r);const u=c(t,["model"]);u!=null&&d(n,["model"],u);const m=c(t,["createTime"]);m!=null&&d(n,["createTime"],m);const g=c(t,["updateTime"]);g!=null&&d(n,["updateTime"],g);const y=c(t,["expireTime"]);y!=null&&d(n,["expireTime"],y);const p=c(t,["usageMetadata"]);return p!=null&&d(n,["usageMetadata"],p),n}function jT(){return{}}function WT(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(m=>Er(l,m))),d(n,["cachedContents"],u)}return n}function _r(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["displayName"]);r!=null&&d(n,["displayName"],r);const u=c(t,["model"]);u!=null&&d(n,["model"],u);const m=c(t,["createTime"]);m!=null&&d(n,["createTime"],m);const g=c(t,["updateTime"]);g!=null&&d(n,["updateTime"],g);const y=c(t,["expireTime"]);y!=null&&d(n,["expireTime"],y);const p=c(t,["usageMetadata"]);return p!=null&&d(n,["usageMetadata"],p),n}function eC(){return{}}function tC(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(m=>_r(l,m))),d(n,["cachedContents"],u)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eo;(function(l){l.PAGED_ITEM_BATCH_JOBS="batchJobs",l.PAGED_ITEM_MODELS="models",l.PAGED_ITEM_TUNING_JOBS="tuningJobs",l.PAGED_ITEM_FILES="files",l.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(eo||(eo={}));class Or{constructor(t,n,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,a,r)}init(t,n,a){var r,u;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let m={config:{}};a?typeof a=="object"?m=Object.assign({},a):m=a:m={config:{}},m.config&&(m.config.pageToken=n.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(u=(r=m.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nC extends ll{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Or(eo.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=FT(this.apiClient,t);return g=Ue("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>_r(this.apiClient,v))}else{const p=TT(this.apiClient,t);return g=Ue("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>Er(this.apiClient,v))}}async get(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=YT(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>_r(this.apiClient,v))}else{const p=CT(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>Er(this.apiClient,v))}}async delete(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=ZT(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(()=>{const v=eC(),E=new Th;return Object.assign(E,v),E})}else{const p=xT(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(()=>{const v=jT(),E=new Th;return Object.assign(E,v),E})}}async update(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=JT(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>_r(this.apiClient,v))}else{const p=_T(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>Er(this.apiClient,v))}}async listInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=QT(this.apiClient,t);return g=Ue("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=tC(this.apiClient,v),x=new Ch;return Object.assign(x,E),x})}else{const p=bT(this.apiClient,t);return g=Ue("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=WT(this.apiClient,v),x=new Ch;return Object.assign(x,E),x})}}}function Ah(l){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&l[t],a=0;if(n)return n.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&a>=l.length&&(l=void 0),{value:l&&l[a++],done:!l}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(l){return this instanceof Rt?(this.v=l,this):new Rt(l)}function il(l,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(l,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",m),r[Symbol.asyncIterator]=function(){return this},r;function m(b){return function(R){return Promise.resolve(R).then(b,E)}}function g(b,R){a[b]&&(r[b]=function(L){return new Promise(function(N,A){u.push([b,L,N,A])>1||y(b,L)})},R&&(r[b]=R(r[b])))}function y(b,R){try{p(a[b](R))}catch(L){x(u[0][3],L)}}function p(b){b.value instanceof Rt?Promise.resolve(b.value.v).then(v,E):x(u[0][2],b)}function v(b){y("next",b)}function E(b){y("throw",b)}function x(b,R){b(R),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Sr(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=l[Symbol.asyncIterator],n;return t?t.call(l):(l=typeof Ah=="function"?Ah(l):l[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(u){n[u]=l[u]&&function(m){return new Promise(function(g,y){m=l[u](m),r(g,y,m.done,m.value)})}}function r(u,m,g,y){Promise.resolve(y).then(function(p){u({value:p,done:g})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iC(l){var t;if(l.candidates==null||l.candidates.length===0)return!1;const n=(t=l.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Cg(n)}function Cg(l){if(l.parts===void 0||l.parts.length===0)return!1;for(const t of l.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function aC(l){if(l.length!==0){for(const t of l)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function wh(l){if(l===void 0||l.length===0)return[];const t=[],n=l.length;let a=0;for(;a<n;)if(l[a].role==="user")t.push(l[a]),a++;else{const r=[];let u=!0;for(;a<n&&l[a].role==="model";)r.push(l[a]),u&&!Cg(l[a])&&(u=!1),a++;u?t.push(...r):t.pop()}return t}class oC{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new lC(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class lC{constructor(t,n,a,r={},u=[]){this.apiClient=t,this.modelsModule=n,this.model=a,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),aC(u)}async sendMessage(t){var n;await this.sendPromise;const a=mn(this.apiClient,t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var u,m,g;const y=await r,p=(m=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||m===void 0?void 0:m.content,v=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let x=[];v!=null&&(x=(g=v.slice(E))!==null&&g!==void 0?g:[]);const b=p?[p]:[];this.recordHistory(a,b,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const a=mn(this.apiClient,t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,a)}getHistory(t=!1){const n=t?wh(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var a,r;return il(this,arguments,function*(){var m,g,y,p;const v=[];try{for(var E=!0,x=Sr(t),b;b=yield Rt(x.next()),m=b.done,!m;E=!0){p=b.value,E=!1;const R=p;if(iC(R)){const L=(r=(a=R.candidates)===null||a===void 0?void 0:a[0])===null||r===void 0?void 0:r.content;L!==void 0&&v.push(L)}yield yield Rt(R)}}catch(R){g={error:R}}finally{try{!E&&!m&&(y=x.return)&&(yield Rt(y.call(x)))}finally{if(g)throw g.error}}this.recordHistory(n,v)})}recordHistory(t,n,a){let r=[];n.length>0&&n.every(u=>u.role!==void 0)?r=n:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...wh(a)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rC(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);return n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),a}function sC(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],rC(l,a,n)),n}function uC(l,t){const n={},a=c(t,["details"]);a!=null&&d(n,["details"],a);const r=c(t,["message"]);r!=null&&d(n,["message"],r);const u=c(t,["code"]);return u!=null&&d(n,["code"],u),n}function cC(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["displayName"]);r!=null&&d(n,["displayName"],r);const u=c(t,["mimeType"]);u!=null&&d(n,["mimeType"],u);const m=c(t,["sizeBytes"]);m!=null&&d(n,["sizeBytes"],m);const g=c(t,["createTime"]);g!=null&&d(n,["createTime"],g);const y=c(t,["expirationTime"]);y!=null&&d(n,["expirationTime"],y);const p=c(t,["updateTime"]);p!=null&&d(n,["updateTime"],p);const v=c(t,["sha256Hash"]);v!=null&&d(n,["sha256Hash"],v);const E=c(t,["uri"]);E!=null&&d(n,["uri"],E);const x=c(t,["downloadUri"]);x!=null&&d(n,["downloadUri"],x);const b=c(t,["state"]);b!=null&&d(n,["state"],b);const R=c(t,["source"]);R!=null&&d(n,["source"],R);const L=c(t,["videoMetadata"]);L!=null&&d(n,["videoMetadata"],L);const N=c(t,["error"]);return N!=null&&d(n,["error"],uC(l,N)),n}function dC(l,t){const n={},a=c(t,["file"]);a!=null&&d(n,["file"],cC(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function fC(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","file"],yg(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function mC(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","file"],yg(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function pC(l,t){const n={},a=c(t,["details"]);a!=null&&d(n,["details"],a);const r=c(t,["message"]);r!=null&&d(n,["message"],r);const u=c(t,["code"]);return u!=null&&d(n,["code"],u),n}function dc(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["displayName"]);r!=null&&d(n,["displayName"],r);const u=c(t,["mimeType"]);u!=null&&d(n,["mimeType"],u);const m=c(t,["sizeBytes"]);m!=null&&d(n,["sizeBytes"],m);const g=c(t,["createTime"]);g!=null&&d(n,["createTime"],g);const y=c(t,["expirationTime"]);y!=null&&d(n,["expirationTime"],y);const p=c(t,["updateTime"]);p!=null&&d(n,["updateTime"],p);const v=c(t,["sha256Hash"]);v!=null&&d(n,["sha256Hash"],v);const E=c(t,["uri"]);E!=null&&d(n,["uri"],E);const x=c(t,["downloadUri"]);x!=null&&d(n,["downloadUri"],x);const b=c(t,["state"]);b!=null&&d(n,["state"],b);const R=c(t,["source"]);R!=null&&d(n,["source"],R);const L=c(t,["videoMetadata"]);L!=null&&d(n,["videoMetadata"],L);const N=c(t,["error"]);return N!=null&&d(n,["error"],pC(l,N)),n}function hC(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(m=>dc(l,m))),d(n,["files"],u)}return n}function gC(){return{}}function yC(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vC extends ll{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Or(eo.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>dc(this.apiClient,n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=sC(this.apiClient,t);return u=Ue("files",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const p=hC(this.apiClient,y),v=new q0;return Object.assign(v,p),v})}}async createInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=dC(this.apiClient,t);return u=Ue("upload/v1beta/files",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(()=>{const y=gC(),p=new B0;return Object.assign(p,y),p})}}async get(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=fC(this.apiClient,t);return u=Ue("files/{file}",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>dc(this.apiClient,y))}}async delete(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=mC(this.apiClient,t);return u=Ue("files/{file}",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(()=>{const y=yC(),p=new z0;return Object.assign(p,y),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TC(l,t){const n={},a=c(t,["voiceName"]);return a!=null&&d(n,["voiceName"],a),n}function CC(l,t){const n={},a=c(t,["voiceName"]);return a!=null&&d(n,["voiceName"],a),n}function xg(l,t){const n={},a=c(t,["prebuiltVoiceConfig"]);return a!=null&&d(n,["prebuiltVoiceConfig"],TC(l,a)),n}function xC(l,t){const n={},a=c(t,["prebuiltVoiceConfig"]);return a!=null&&d(n,["prebuiltVoiceConfig"],CC(l,a)),n}function EC(l,t){const n={},a=c(t,["speaker"]);a!=null&&d(n,["speaker"],a);const r=c(t,["voiceConfig"]);return r!=null&&d(n,["voiceConfig"],xg(l,r)),n}function _C(l,t){const n={},a=c(t,["speakerVoiceConfigs"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>EC(l,u))),d(n,["speakerVoiceConfigs"],r)}return n}function SC(l,t){const n={},a=c(t,["voiceConfig"]);a!=null&&d(n,["voiceConfig"],xg(l,a));const r=c(t,["multiSpeakerVoiceConfig"]);r!=null&&d(n,["multiSpeakerVoiceConfig"],_C(l,r));const u=c(t,["languageCode"]);return u!=null&&d(n,["languageCode"],u),n}function bC(l,t){const n={},a=c(t,["voiceConfig"]);if(a!=null&&d(n,["voiceConfig"],xC(l,a)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function NC(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function AC(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function wC(l,t){const n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["data"]);a!=null&&d(n,["data"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function RC(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["data"]);r!=null&&d(n,["data"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function MC(l,t){const n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["fileUri"]);a!=null&&d(n,["fileUri"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function IC(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function DC(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],NC(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],wC(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],MC(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function LC(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],AC(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],RC(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],IC(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function kC(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>DC(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function UC(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>LC(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function PC(l,t){const n={},a=c(t,["behavior"]);a!=null&&d(n,["behavior"],a);const r=c(t,["description"]);r!=null&&d(n,["description"],r);const u=c(t,["name"]);u!=null&&d(n,["name"],u);const m=c(t,["parameters"]);m!=null&&d(n,["parameters"],m);const g=c(t,["response"]);return g!=null&&d(n,["response"],g),n}function OC(l,t){const n={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=c(t,["description"]);a!=null&&d(n,["description"],a);const r=c(t,["name"]);r!=null&&d(n,["name"],r);const u=c(t,["parameters"]);u!=null&&d(n,["parameters"],u);const m=c(t,["response"]);return m!=null&&d(n,["response"],m),n}function GC(l,t){const n={},a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);const r=c(t,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function VC(l,t){const n={},a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);const r=c(t,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function $C(l,t){const n={},a=c(t,["timeRangeFilter"]);return a!=null&&d(n,["timeRangeFilter"],GC(l,a)),n}function HC(l,t){const n={},a=c(t,["timeRangeFilter"]);return a!=null&&d(n,["timeRangeFilter"],VC(l,a)),n}function qC(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function BC(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function zC(l,t){const n={},a=c(t,["dynamicRetrievalConfig"]);return a!=null&&d(n,["dynamicRetrievalConfig"],qC(l,a)),n}function FC(l,t){const n={},a=c(t,["dynamicRetrievalConfig"]);return a!=null&&d(n,["dynamicRetrievalConfig"],BC(l,a)),n}function YC(){return{}}function ZC(l,t){const n={},a=c(t,["apiKeyString"]);return a!=null&&d(n,["apiKeyString"],a),n}function KC(l,t){const n={},a=c(t,["apiKeyConfig"]);a!=null&&d(n,["apiKeyConfig"],ZC(l,a));const r=c(t,["authType"]);r!=null&&d(n,["authType"],r);const u=c(t,["googleServiceAccountConfig"]);u!=null&&d(n,["googleServiceAccountConfig"],u);const m=c(t,["httpBasicAuthConfig"]);m!=null&&d(n,["httpBasicAuthConfig"],m);const g=c(t,["oauthConfig"]);g!=null&&d(n,["oauthConfig"],g);const y=c(t,["oidcConfig"]);return y!=null&&d(n,["oidcConfig"],y),n}function JC(l,t){const n={},a=c(t,["authConfig"]);return a!=null&&d(n,["authConfig"],KC(l,a)),n}function XC(){return{}}function QC(l,t){const n={},a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(p=>PC(l,p))),d(n,["functionDeclarations"],y)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(n,["googleSearch"],$C(l,r));const u=c(t,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],zC(l,u)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(n,["urlContext"],XC());const g=c(t,["codeExecution"]);return g!=null&&d(n,["codeExecution"],g),n}function jC(l,t){const n={},a=c(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>OC(l,E))),d(n,["functionDeclarations"],v)}const r=c(t,["retrieval"]);r!=null&&d(n,["retrieval"],r);const u=c(t,["googleSearch"]);u!=null&&d(n,["googleSearch"],HC(l,u));const m=c(t,["googleSearchRetrieval"]);m!=null&&d(n,["googleSearchRetrieval"],FC(l,m)),c(t,["enterpriseWebSearch"])!=null&&d(n,["enterpriseWebSearch"],YC());const y=c(t,["googleMaps"]);if(y!=null&&d(n,["googleMaps"],JC(l,y)),c(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=c(t,["codeExecution"]);return p!=null&&d(n,["codeExecution"],p),n}function WC(l,t){const n={},a=c(t,["handle"]);if(a!=null&&d(n,["handle"],a),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function ex(l,t){const n={},a=c(t,["handle"]);a!=null&&d(n,["handle"],a);const r=c(t,["transparent"]);return r!=null&&d(n,["transparent"],r),n}function Rh(){return{}}function Mh(){return{}}function tx(l,t){const n={},a=c(t,["disabled"]);a!=null&&d(n,["disabled"],a);const r=c(t,["startOfSpeechSensitivity"]);r!=null&&d(n,["startOfSpeechSensitivity"],r);const u=c(t,["endOfSpeechSensitivity"]);u!=null&&d(n,["endOfSpeechSensitivity"],u);const m=c(t,["prefixPaddingMs"]);m!=null&&d(n,["prefixPaddingMs"],m);const g=c(t,["silenceDurationMs"]);return g!=null&&d(n,["silenceDurationMs"],g),n}function nx(l,t){const n={},a=c(t,["disabled"]);a!=null&&d(n,["disabled"],a);const r=c(t,["startOfSpeechSensitivity"]);r!=null&&d(n,["startOfSpeechSensitivity"],r);const u=c(t,["endOfSpeechSensitivity"]);u!=null&&d(n,["endOfSpeechSensitivity"],u);const m=c(t,["prefixPaddingMs"]);m!=null&&d(n,["prefixPaddingMs"],m);const g=c(t,["silenceDurationMs"]);return g!=null&&d(n,["silenceDurationMs"],g),n}function ix(l,t){const n={},a=c(t,["automaticActivityDetection"]);a!=null&&d(n,["automaticActivityDetection"],tx(l,a));const r=c(t,["activityHandling"]);r!=null&&d(n,["activityHandling"],r);const u=c(t,["turnCoverage"]);return u!=null&&d(n,["turnCoverage"],u),n}function ax(l,t){const n={},a=c(t,["automaticActivityDetection"]);a!=null&&d(n,["automaticActivityDetection"],nx(l,a));const r=c(t,["activityHandling"]);r!=null&&d(n,["activityHandling"],r);const u=c(t,["turnCoverage"]);return u!=null&&d(n,["turnCoverage"],u),n}function ox(l,t){const n={},a=c(t,["targetTokens"]);return a!=null&&d(n,["targetTokens"],a),n}function lx(l,t){const n={},a=c(t,["targetTokens"]);return a!=null&&d(n,["targetTokens"],a),n}function rx(l,t){const n={},a=c(t,["triggerTokens"]);a!=null&&d(n,["triggerTokens"],a);const r=c(t,["slidingWindow"]);return r!=null&&d(n,["slidingWindow"],ox(l,r)),n}function sx(l,t){const n={},a=c(t,["triggerTokens"]);a!=null&&d(n,["triggerTokens"],a);const r=c(t,["slidingWindow"]);return r!=null&&d(n,["slidingWindow"],lx(l,r)),n}function ux(l,t){const n={},a=c(t,["proactiveAudio"]);return a!=null&&d(n,["proactiveAudio"],a),n}function cx(l,t){const n={},a=c(t,["proactiveAudio"]);return a!=null&&d(n,["proactiveAudio"],a),n}function dx(l,t,n){const a={},r=c(t,["generationConfig"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig"],r);const u=c(t,["responseModalities"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","responseModalities"],u);const m=c(t,["temperature"]);n!==void 0&&m!=null&&d(n,["setup","generationConfig","temperature"],m);const g=c(t,["topP"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","topP"],g);const y=c(t,["topK"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","topK"],y);const p=c(t,["maxOutputTokens"]);n!==void 0&&p!=null&&d(n,["setup","generationConfig","maxOutputTokens"],p);const v=c(t,["mediaResolution"]);n!==void 0&&v!=null&&d(n,["setup","generationConfig","mediaResolution"],v);const E=c(t,["seed"]);n!==void 0&&E!=null&&d(n,["setup","generationConfig","seed"],E);const x=c(t,["speechConfig"]);n!==void 0&&x!=null&&d(n,["setup","generationConfig","speechConfig"],SC(l,hg(l,x)));const b=c(t,["enableAffectiveDialog"]);n!==void 0&&b!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],b);const R=c(t,["systemInstruction"]);n!==void 0&&R!=null&&d(n,["setup","systemInstruction"],kC(l,mn(l,R)));const L=c(t,["tools"]);if(n!==void 0&&L!=null){let X=Pr(l,L);Array.isArray(X)&&(X=X.map(W=>QC(l,Ur(l,W)))),d(n,["setup","tools"],X)}const N=c(t,["sessionResumption"]);n!==void 0&&N!=null&&d(n,["setup","sessionResumption"],WC(l,N));const A=c(t,["inputAudioTranscription"]);n!==void 0&&A!=null&&d(n,["setup","inputAudioTranscription"],Rh());const P=c(t,["outputAudioTranscription"]);n!==void 0&&P!=null&&d(n,["setup","outputAudioTranscription"],Rh());const k=c(t,["realtimeInputConfig"]);n!==void 0&&k!=null&&d(n,["setup","realtimeInputConfig"],ix(l,k));const w=c(t,["contextWindowCompression"]);n!==void 0&&w!=null&&d(n,["setup","contextWindowCompression"],rx(l,w));const D=c(t,["proactivity"]);return n!==void 0&&D!=null&&d(n,["setup","proactivity"],ux(l,D)),a}function fx(l,t,n){const a={},r=c(t,["generationConfig"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig"],r);const u=c(t,["responseModalities"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","responseModalities"],u);const m=c(t,["temperature"]);n!==void 0&&m!=null&&d(n,["setup","generationConfig","temperature"],m);const g=c(t,["topP"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","topP"],g);const y=c(t,["topK"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","topK"],y);const p=c(t,["maxOutputTokens"]);n!==void 0&&p!=null&&d(n,["setup","generationConfig","maxOutputTokens"],p);const v=c(t,["mediaResolution"]);n!==void 0&&v!=null&&d(n,["setup","generationConfig","mediaResolution"],v);const E=c(t,["seed"]);n!==void 0&&E!=null&&d(n,["setup","generationConfig","seed"],E);const x=c(t,["speechConfig"]);n!==void 0&&x!=null&&d(n,["setup","generationConfig","speechConfig"],bC(l,hg(l,x)));const b=c(t,["enableAffectiveDialog"]);n!==void 0&&b!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],b);const R=c(t,["systemInstruction"]);n!==void 0&&R!=null&&d(n,["setup","systemInstruction"],UC(l,mn(l,R)));const L=c(t,["tools"]);if(n!==void 0&&L!=null){let X=Pr(l,L);Array.isArray(X)&&(X=X.map(W=>jC(l,Ur(l,W)))),d(n,["setup","tools"],X)}const N=c(t,["sessionResumption"]);n!==void 0&&N!=null&&d(n,["setup","sessionResumption"],ex(l,N));const A=c(t,["inputAudioTranscription"]);n!==void 0&&A!=null&&d(n,["setup","inputAudioTranscription"],Mh());const P=c(t,["outputAudioTranscription"]);n!==void 0&&P!=null&&d(n,["setup","outputAudioTranscription"],Mh());const k=c(t,["realtimeInputConfig"]);n!==void 0&&k!=null&&d(n,["setup","realtimeInputConfig"],ax(l,k));const w=c(t,["contextWindowCompression"]);n!==void 0&&w!=null&&d(n,["setup","contextWindowCompression"],sx(l,w));const D=c(t,["proactivity"]);return n!==void 0&&D!=null&&d(n,["setup","proactivity"],cx(l,D)),a}function mx(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["setup","model"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],dx(l,r,n)),n}function px(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["setup","model"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],fx(l,r,n)),n}function hx(){return{}}function gx(){return{}}function yx(){return{}}function vx(){return{}}function Tx(l,t){const n={},a=c(t,["media"]);a!=null&&d(n,["mediaChunks"],dg(l,a));const r=c(t,["audio"]);r!=null&&d(n,["audio"],K0(l,r));const u=c(t,["audioStreamEnd"]);u!=null&&d(n,["audioStreamEnd"],u);const m=c(t,["video"]);m!=null&&d(n,["video"],Z0(l,m));const g=c(t,["text"]);return g!=null&&d(n,["text"],g),c(t,["activityStart"])!=null&&d(n,["activityStart"],hx()),c(t,["activityEnd"])!=null&&d(n,["activityEnd"],yx()),n}function Cx(l,t){const n={},a=c(t,["media"]);if(a!=null&&d(n,["mediaChunks"],dg(l,a)),c(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=c(t,["audioStreamEnd"]);if(r!=null&&d(n,["audioStreamEnd"],r),c(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(c(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return c(t,["activityStart"])!=null&&d(n,["activityStart"],gx()),c(t,["activityEnd"])!=null&&d(n,["activityEnd"],vx()),n}function Eg(l,t){const n={},a=c(t,["text"]);a!=null&&d(n,["text"],a);const r=c(t,["weight"]);return r!=null&&d(n,["weight"],r),n}function xx(l,t){const n={},a=c(t,["weightedPrompts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Eg(l,u))),d(n,["weightedPrompts"],r)}return n}function _g(l,t){const n={},a=c(t,["temperature"]);a!=null&&d(n,["temperature"],a);const r=c(t,["topK"]);r!=null&&d(n,["topK"],r);const u=c(t,["seed"]);u!=null&&d(n,["seed"],u);const m=c(t,["guidance"]);m!=null&&d(n,["guidance"],m);const g=c(t,["bpm"]);g!=null&&d(n,["bpm"],g);const y=c(t,["density"]);y!=null&&d(n,["density"],y);const p=c(t,["brightness"]);p!=null&&d(n,["brightness"],p);const v=c(t,["scale"]);v!=null&&d(n,["scale"],v);const E=c(t,["muteBass"]);E!=null&&d(n,["muteBass"],E);const x=c(t,["muteDrums"]);x!=null&&d(n,["muteDrums"],x);const b=c(t,["onlyBassAndDrums"]);return b!=null&&d(n,["onlyBassAndDrums"],b),n}function Ex(l,t){const n={},a=c(t,["musicGenerationConfig"]);return a!=null&&d(n,["musicGenerationConfig"],_g(l,a)),n}function Sg(l,t){const n={},a=c(t,["model"]);return a!=null&&d(n,["model"],a),n}function bg(l,t){const n={},a=c(t,["weightedPrompts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Eg(l,u))),d(n,["weightedPrompts"],r)}return n}function fc(l,t){const n={},a=c(t,["setup"]);a!=null&&d(n,["setup"],Sg(l,a));const r=c(t,["clientContent"]);r!=null&&d(n,["clientContent"],bg(l,r));const u=c(t,["musicGenerationConfig"]);u!=null&&d(n,["musicGenerationConfig"],_g(l,u));const m=c(t,["playbackControl"]);return m!=null&&d(n,["playbackControl"],m),n}function _x(){return{}}function Sx(){return{}}function bx(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function Nx(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function Ax(l,t){const n={},a=c(t,["data"]);a!=null&&d(n,["data"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function wx(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["data"]);r!=null&&d(n,["data"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function Rx(l,t){const n={},a=c(t,["fileUri"]);a!=null&&d(n,["fileUri"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Mx(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function Ix(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],bx(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],Ax(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],Rx(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function Dx(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],Nx(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],wx(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],Mx(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function Lx(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>Ix(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function kx(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>Dx(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function Ih(l,t){const n={},a=c(t,["text"]);a!=null&&d(n,["text"],a);const r=c(t,["finished"]);return r!=null&&d(n,["finished"],r),n}function Dh(l,t){const n={},a=c(t,["text"]);a!=null&&d(n,["text"],a);const r=c(t,["finished"]);return r!=null&&d(n,["finished"],r),n}function Ux(l,t){const n={},a=c(t,["retrievedUrl"]);a!=null&&d(n,["retrievedUrl"],a);const r=c(t,["urlRetrievalStatus"]);return r!=null&&d(n,["urlRetrievalStatus"],r),n}function Px(l,t){const n={},a=c(t,["urlMetadata"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Ux(l,u))),d(n,["urlMetadata"],r)}return n}function Ox(l,t){const n={},a=c(t,["modelTurn"]);a!=null&&d(n,["modelTurn"],Lx(l,a));const r=c(t,["turnComplete"]);r!=null&&d(n,["turnComplete"],r);const u=c(t,["interrupted"]);u!=null&&d(n,["interrupted"],u);const m=c(t,["groundingMetadata"]);m!=null&&d(n,["groundingMetadata"],m);const g=c(t,["generationComplete"]);g!=null&&d(n,["generationComplete"],g);const y=c(t,["inputTranscription"]);y!=null&&d(n,["inputTranscription"],Ih(l,y));const p=c(t,["outputTranscription"]);p!=null&&d(n,["outputTranscription"],Ih(l,p));const v=c(t,["urlContextMetadata"]);return v!=null&&d(n,["urlContextMetadata"],Px(l,v)),n}function Gx(l,t){const n={},a=c(t,["modelTurn"]);a!=null&&d(n,["modelTurn"],kx(l,a));const r=c(t,["turnComplete"]);r!=null&&d(n,["turnComplete"],r);const u=c(t,["interrupted"]);u!=null&&d(n,["interrupted"],u);const m=c(t,["groundingMetadata"]);m!=null&&d(n,["groundingMetadata"],m);const g=c(t,["generationComplete"]);g!=null&&d(n,["generationComplete"],g);const y=c(t,["inputTranscription"]);y!=null&&d(n,["inputTranscription"],Dh(l,y));const p=c(t,["outputTranscription"]);return p!=null&&d(n,["outputTranscription"],Dh(l,p)),n}function Vx(l,t){const n={},a=c(t,["id"]);a!=null&&d(n,["id"],a);const r=c(t,["args"]);r!=null&&d(n,["args"],r);const u=c(t,["name"]);return u!=null&&d(n,["name"],u),n}function $x(l,t){const n={},a=c(t,["args"]);a!=null&&d(n,["args"],a);const r=c(t,["name"]);return r!=null&&d(n,["name"],r),n}function Hx(l,t){const n={},a=c(t,["functionCalls"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Vx(l,u))),d(n,["functionCalls"],r)}return n}function qx(l,t){const n={},a=c(t,["functionCalls"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>$x(l,u))),d(n,["functionCalls"],r)}return n}function Bx(l,t){const n={},a=c(t,["ids"]);return a!=null&&d(n,["ids"],a),n}function zx(l,t){const n={},a=c(t,["ids"]);return a!=null&&d(n,["ids"],a),n}function vr(l,t){const n={},a=c(t,["modality"]);a!=null&&d(n,["modality"],a);const r=c(t,["tokenCount"]);return r!=null&&d(n,["tokenCount"],r),n}function Tr(l,t){const n={},a=c(t,["modality"]);a!=null&&d(n,["modality"],a);const r=c(t,["tokenCount"]);return r!=null&&d(n,["tokenCount"],r),n}function Fx(l,t){const n={},a=c(t,["promptTokenCount"]);a!=null&&d(n,["promptTokenCount"],a);const r=c(t,["cachedContentTokenCount"]);r!=null&&d(n,["cachedContentTokenCount"],r);const u=c(t,["responseTokenCount"]);u!=null&&d(n,["responseTokenCount"],u);const m=c(t,["toolUsePromptTokenCount"]);m!=null&&d(n,["toolUsePromptTokenCount"],m);const g=c(t,["thoughtsTokenCount"]);g!=null&&d(n,["thoughtsTokenCount"],g);const y=c(t,["totalTokenCount"]);y!=null&&d(n,["totalTokenCount"],y);const p=c(t,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(R=>vr(l,R))),d(n,["promptTokensDetails"],b)}const v=c(t,["cacheTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(R=>vr(l,R))),d(n,["cacheTokensDetails"],b)}const E=c(t,["responseTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(R=>vr(l,R))),d(n,["responseTokensDetails"],b)}const x=c(t,["toolUsePromptTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(R=>vr(l,R))),d(n,["toolUsePromptTokensDetails"],b)}return n}function Yx(l,t){const n={},a=c(t,["promptTokenCount"]);a!=null&&d(n,["promptTokenCount"],a);const r=c(t,["cachedContentTokenCount"]);r!=null&&d(n,["cachedContentTokenCount"],r);const u=c(t,["candidatesTokenCount"]);u!=null&&d(n,["responseTokenCount"],u);const m=c(t,["toolUsePromptTokenCount"]);m!=null&&d(n,["toolUsePromptTokenCount"],m);const g=c(t,["thoughtsTokenCount"]);g!=null&&d(n,["thoughtsTokenCount"],g);const y=c(t,["totalTokenCount"]);y!=null&&d(n,["totalTokenCount"],y);const p=c(t,["promptTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(L=>Tr(l,L))),d(n,["promptTokensDetails"],R)}const v=c(t,["cacheTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(L=>Tr(l,L))),d(n,["cacheTokensDetails"],R)}const E=c(t,["candidatesTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(L=>Tr(l,L))),d(n,["responseTokensDetails"],R)}const x=c(t,["toolUsePromptTokensDetails"]);if(x!=null){let R=x;Array.isArray(R)&&(R=R.map(L=>Tr(l,L))),d(n,["toolUsePromptTokensDetails"],R)}const b=c(t,["trafficType"]);return b!=null&&d(n,["trafficType"],b),n}function Zx(l,t){const n={},a=c(t,["timeLeft"]);return a!=null&&d(n,["timeLeft"],a),n}function Kx(l,t){const n={},a=c(t,["timeLeft"]);return a!=null&&d(n,["timeLeft"],a),n}function Jx(l,t){const n={},a=c(t,["newHandle"]);a!=null&&d(n,["newHandle"],a);const r=c(t,["resumable"]);r!=null&&d(n,["resumable"],r);const u=c(t,["lastConsumedClientMessageIndex"]);return u!=null&&d(n,["lastConsumedClientMessageIndex"],u),n}function Xx(l,t){const n={},a=c(t,["newHandle"]);a!=null&&d(n,["newHandle"],a);const r=c(t,["resumable"]);r!=null&&d(n,["resumable"],r);const u=c(t,["lastConsumedClientMessageIndex"]);return u!=null&&d(n,["lastConsumedClientMessageIndex"],u),n}function Qx(l,t){const n={};c(t,["setupComplete"])!=null&&d(n,["setupComplete"],_x());const r=c(t,["serverContent"]);r!=null&&d(n,["serverContent"],Ox(l,r));const u=c(t,["toolCall"]);u!=null&&d(n,["toolCall"],Hx(l,u));const m=c(t,["toolCallCancellation"]);m!=null&&d(n,["toolCallCancellation"],Bx(l,m));const g=c(t,["usageMetadata"]);g!=null&&d(n,["usageMetadata"],Fx(l,g));const y=c(t,["goAway"]);y!=null&&d(n,["goAway"],Zx(l,y));const p=c(t,["sessionResumptionUpdate"]);return p!=null&&d(n,["sessionResumptionUpdate"],Jx(l,p)),n}function jx(l,t){const n={};c(t,["setupComplete"])!=null&&d(n,["setupComplete"],Sx());const r=c(t,["serverContent"]);r!=null&&d(n,["serverContent"],Gx(l,r));const u=c(t,["toolCall"]);u!=null&&d(n,["toolCall"],qx(l,u));const m=c(t,["toolCallCancellation"]);m!=null&&d(n,["toolCallCancellation"],zx(l,m));const g=c(t,["usageMetadata"]);g!=null&&d(n,["usageMetadata"],Yx(l,g));const y=c(t,["goAway"]);y!=null&&d(n,["goAway"],Kx(l,y));const p=c(t,["sessionResumptionUpdate"]);return p!=null&&d(n,["sessionResumptionUpdate"],Xx(l,p)),n}function Wx(){return{}}function eE(l,t){const n={},a=c(t,["text"]);a!=null&&d(n,["text"],a);const r=c(t,["weight"]);return r!=null&&d(n,["weight"],r),n}function tE(l,t){const n={},a=c(t,["weightedPrompts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>eE(l,u))),d(n,["weightedPrompts"],r)}return n}function nE(l,t){const n={},a=c(t,["temperature"]);a!=null&&d(n,["temperature"],a);const r=c(t,["topK"]);r!=null&&d(n,["topK"],r);const u=c(t,["seed"]);u!=null&&d(n,["seed"],u);const m=c(t,["guidance"]);m!=null&&d(n,["guidance"],m);const g=c(t,["bpm"]);g!=null&&d(n,["bpm"],g);const y=c(t,["density"]);y!=null&&d(n,["density"],y);const p=c(t,["brightness"]);p!=null&&d(n,["brightness"],p);const v=c(t,["scale"]);v!=null&&d(n,["scale"],v);const E=c(t,["muteBass"]);E!=null&&d(n,["muteBass"],E);const x=c(t,["muteDrums"]);x!=null&&d(n,["muteDrums"],x);const b=c(t,["onlyBassAndDrums"]);return b!=null&&d(n,["onlyBassAndDrums"],b),n}function iE(l,t){const n={},a=c(t,["clientContent"]);a!=null&&d(n,["clientContent"],tE(l,a));const r=c(t,["musicGenerationConfig"]);return r!=null&&d(n,["musicGenerationConfig"],nE(l,r)),n}function aE(l,t){const n={},a=c(t,["data"]);a!=null&&d(n,["data"],a);const r=c(t,["mimeType"]);r!=null&&d(n,["mimeType"],r);const u=c(t,["sourceMetadata"]);return u!=null&&d(n,["sourceMetadata"],iE(l,u)),n}function oE(l,t){const n={},a=c(t,["audioChunks"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>aE(l,u))),d(n,["audioChunks"],r)}return n}function lE(l,t){const n={},a=c(t,["text"]);a!=null&&d(n,["text"],a);const r=c(t,["filteredReason"]);return r!=null&&d(n,["filteredReason"],r),n}function rE(l,t){const n={};c(t,["setupComplete"])!=null&&d(n,["setupComplete"],Wx());const r=c(t,["serverContent"]);r!=null&&d(n,["serverContent"],oE(l,r));const u=c(t,["filteredPrompt"]);return u!=null&&d(n,["filteredPrompt"],lE(l,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sE(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function uE(l,t){const n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["data"]);a!=null&&d(n,["data"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function cE(l,t){const n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["fileUri"]);a!=null&&d(n,["fileUri"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function dE(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],sE(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],uE(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],cE(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function Gr(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>dE(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function fE(l,t){const n={},a=c(t,["anyOf"]);a!=null&&d(n,["anyOf"],a);const r=c(t,["default"]);r!=null&&d(n,["default"],r);const u=c(t,["description"]);u!=null&&d(n,["description"],u);const m=c(t,["enum"]);m!=null&&d(n,["enum"],m);const g=c(t,["example"]);g!=null&&d(n,["example"],g);const y=c(t,["format"]);y!=null&&d(n,["format"],y);const p=c(t,["items"]);p!=null&&d(n,["items"],p);const v=c(t,["maxItems"]);v!=null&&d(n,["maxItems"],v);const E=c(t,["maxLength"]);E!=null&&d(n,["maxLength"],E);const x=c(t,["maxProperties"]);x!=null&&d(n,["maxProperties"],x);const b=c(t,["maximum"]);b!=null&&d(n,["maximum"],b);const R=c(t,["minItems"]);R!=null&&d(n,["minItems"],R);const L=c(t,["minLength"]);L!=null&&d(n,["minLength"],L);const N=c(t,["minProperties"]);N!=null&&d(n,["minProperties"],N);const A=c(t,["minimum"]);A!=null&&d(n,["minimum"],A);const P=c(t,["nullable"]);P!=null&&d(n,["nullable"],P);const k=c(t,["pattern"]);k!=null&&d(n,["pattern"],k);const w=c(t,["properties"]);w!=null&&d(n,["properties"],w);const D=c(t,["propertyOrdering"]);D!=null&&d(n,["propertyOrdering"],D);const X=c(t,["required"]);X!=null&&d(n,["required"],X);const W=c(t,["title"]);W!=null&&d(n,["title"],W);const ne=c(t,["type"]);return ne!=null&&d(n,["type"],ne),n}function mE(l,t){const n={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(t,["category"]);a!=null&&d(n,["category"],a);const r=c(t,["threshold"]);return r!=null&&d(n,["threshold"],r),n}function pE(l,t){const n={},a=c(t,["behavior"]);a!=null&&d(n,["behavior"],a);const r=c(t,["description"]);r!=null&&d(n,["description"],r);const u=c(t,["name"]);u!=null&&d(n,["name"],u);const m=c(t,["parameters"]);m!=null&&d(n,["parameters"],m);const g=c(t,["response"]);return g!=null&&d(n,["response"],g),n}function hE(l,t){const n={},a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);const r=c(t,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function gE(l,t){const n={},a=c(t,["timeRangeFilter"]);return a!=null&&d(n,["timeRangeFilter"],hE(l,a)),n}function yE(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function vE(l,t){const n={},a=c(t,["dynamicRetrievalConfig"]);return a!=null&&d(n,["dynamicRetrievalConfig"],yE(l,a)),n}function TE(){return{}}function CE(l,t){const n={},a=c(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(p=>pE(l,p))),d(n,["functionDeclarations"],y)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(n,["googleSearch"],gE(l,r));const u=c(t,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],vE(l,u)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(n,["urlContext"],TE());const g=c(t,["codeExecution"]);return g!=null&&d(n,["codeExecution"],g),n}function xE(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function EE(l,t){const n={},a=c(t,["latitude"]);a!=null&&d(n,["latitude"],a);const r=c(t,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function _E(l,t){const n={},a=c(t,["latLng"]);a!=null&&d(n,["latLng"],EE(l,a));const r=c(t,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function SE(l,t){const n={},a=c(t,["functionCallingConfig"]);a!=null&&d(n,["functionCallingConfig"],xE(l,a));const r=c(t,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],_E(l,r)),n}function bE(l,t){const n={},a=c(t,["voiceName"]);return a!=null&&d(n,["voiceName"],a),n}function Ng(l,t){const n={},a=c(t,["prebuiltVoiceConfig"]);return a!=null&&d(n,["prebuiltVoiceConfig"],bE(l,a)),n}function NE(l,t){const n={},a=c(t,["speaker"]);a!=null&&d(n,["speaker"],a);const r=c(t,["voiceConfig"]);return r!=null&&d(n,["voiceConfig"],Ng(l,r)),n}function AE(l,t){const n={},a=c(t,["speakerVoiceConfigs"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>NE(l,u))),d(n,["speakerVoiceConfigs"],r)}return n}function wE(l,t){const n={},a=c(t,["voiceConfig"]);a!=null&&d(n,["voiceConfig"],Ng(l,a));const r=c(t,["multiSpeakerVoiceConfig"]);r!=null&&d(n,["multiSpeakerVoiceConfig"],AE(l,r));const u=c(t,["languageCode"]);return u!=null&&d(n,["languageCode"],u),n}function RE(l,t){const n={},a=c(t,["includeThoughts"]);a!=null&&d(n,["includeThoughts"],a);const r=c(t,["thinkingBudget"]);return r!=null&&d(n,["thinkingBudget"],r),n}function ME(l,t,n){const a={},r=c(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Gr(l,mn(l,r)));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const m=c(t,["topP"]);m!=null&&d(a,["topP"],m);const g=c(t,["topK"]);g!=null&&d(a,["topK"],g);const y=c(t,["candidateCount"]);y!=null&&d(a,["candidateCount"],y);const p=c(t,["maxOutputTokens"]);p!=null&&d(a,["maxOutputTokens"],p);const v=c(t,["stopSequences"]);v!=null&&d(a,["stopSequences"],v);const E=c(t,["responseLogprobs"]);E!=null&&d(a,["responseLogprobs"],E);const x=c(t,["logprobs"]);x!=null&&d(a,["logprobs"],x);const b=c(t,["presencePenalty"]);b!=null&&d(a,["presencePenalty"],b);const R=c(t,["frequencyPenalty"]);R!=null&&d(a,["frequencyPenalty"],R);const L=c(t,["seed"]);L!=null&&d(a,["seed"],L);const N=c(t,["responseMimeType"]);N!=null&&d(a,["responseMimeType"],N);const A=c(t,["responseSchema"]);if(A!=null&&d(a,["responseSchema"],fE(l,kr(l,A))),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=c(t,["safetySettings"]);if(n!==void 0&&P!=null){let ce=P;Array.isArray(ce)&&(ce=ce.map(ie=>mE(l,ie))),d(n,["safetySettings"],ce)}const k=c(t,["tools"]);if(n!==void 0&&k!=null){let ce=Pr(l,k);Array.isArray(ce)&&(ce=ce.map(ie=>CE(l,Ur(l,ie)))),d(n,["tools"],ce)}const w=c(t,["toolConfig"]);if(n!==void 0&&w!=null&&d(n,["toolConfig"],SE(l,w)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=c(t,["cachedContent"]);n!==void 0&&D!=null&&d(n,["cachedContent"],Vi(l,D));const X=c(t,["responseModalities"]);X!=null&&d(a,["responseModalities"],X);const W=c(t,["mediaResolution"]);W!=null&&d(a,["mediaResolution"],W);const ne=c(t,["speechConfig"]);if(ne!=null&&d(a,["speechConfig"],wE(l,pg(l,ne))),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=c(t,["thinkingConfig"]);return B!=null&&d(a,["thinkingConfig"],RE(l,B)),a}function Lh(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);if(r!=null){let m=Vn(l,r);Array.isArray(m)&&(m=m.map(g=>Gr(l,g))),d(n,["contents"],m)}const u=c(t,["config"]);return u!=null&&d(n,["generationConfig"],ME(l,u,n)),n}function IE(l,t,n){const a={},r=c(t,["taskType"]);n!==void 0&&r!=null&&d(n,["requests[]","taskType"],r);const u=c(t,["title"]);n!==void 0&&u!=null&&d(n,["requests[]","title"],u);const m=c(t,["outputDimensionality"]);if(n!==void 0&&m!=null&&d(n,["requests[]","outputDimensionality"],m),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function DE(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);r!=null&&d(n,["requests[]","content"],mg(l,r));const u=c(t,["config"]);u!=null&&d(n,["config"],IE(l,u,n));const m=c(t,["model"]);return m!==void 0&&d(n,["requests[]","model"],bt(l,m)),n}function LE(l,t,n){const a={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r);const u=c(t,["aspectRatio"]);n!==void 0&&u!=null&&d(n,["parameters","aspectRatio"],u);const m=c(t,["guidanceScale"]);if(n!==void 0&&m!=null&&d(n,["parameters","guidanceScale"],m),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const g=c(t,["safetyFilterLevel"]);n!==void 0&&g!=null&&d(n,["parameters","safetySetting"],g);const y=c(t,["personGeneration"]);n!==void 0&&y!=null&&d(n,["parameters","personGeneration"],y);const p=c(t,["includeSafetyAttributes"]);n!==void 0&&p!=null&&d(n,["parameters","includeSafetyAttributes"],p);const v=c(t,["includeRaiReason"]);n!==void 0&&v!=null&&d(n,["parameters","includeRaiReason"],v);const E=c(t,["language"]);n!==void 0&&E!=null&&d(n,["parameters","language"],E);const x=c(t,["outputMimeType"]);n!==void 0&&x!=null&&d(n,["parameters","outputOptions","mimeType"],x);const b=c(t,["outputCompressionQuality"]);if(n!==void 0&&b!=null&&d(n,["parameters","outputOptions","compressionQuality"],b),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function kE(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&d(n,["config"],LE(l,u,n)),n}function UE(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","name"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function PE(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const m=c(t,["filter"]);n!==void 0&&m!=null&&d(n,["_query","filter"],m);const g=c(t,["queryBase"]);return n!==void 0&&g!=null&&d(n,["_url","models_url"],vg(l,g)),a}function OE(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],PE(l,a,n)),n}function GE(l,t,n){const a={},r=c(t,["displayName"]);n!==void 0&&r!=null&&d(n,["displayName"],r);const u=c(t,["description"]);n!==void 0&&u!=null&&d(n,["description"],u);const m=c(t,["defaultCheckpointId"]);return n!==void 0&&m!=null&&d(n,["defaultCheckpointId"],m),a}function VE(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","name"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],GE(l,r,n)),n}function $E(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","name"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function HE(l,t){const n={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function qE(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);if(r!=null){let m=Vn(l,r);Array.isArray(m)&&(m=m.map(g=>Gr(l,g))),d(n,["contents"],m)}const u=c(t,["config"]);return u!=null&&d(n,["config"],HE(l,u)),n}function BE(l,t){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=c(t,["imageBytes"]);a!=null&&d(n,["bytesBase64Encoded"],$i(l,a));const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function zE(l,t,n){const a={},r=c(t,["numberOfVideos"]);if(n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(t,["durationSeconds"]);if(n!==void 0&&u!=null&&d(n,["parameters","durationSeconds"],u),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=c(t,["aspectRatio"]);if(n!==void 0&&m!=null&&d(n,["parameters","aspectRatio"],m),c(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const g=c(t,["personGeneration"]);if(n!==void 0&&g!=null&&d(n,["parameters","personGeneration"],g),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=c(t,["negativePrompt"]);if(n!==void 0&&y!=null&&d(n,["parameters","negativePrompt"],y),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return a}function FE(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&d(n,["instances[0]","image"],BE(l,u));const m=c(t,["config"]);return m!=null&&d(n,["config"],zE(l,m,n)),n}function YE(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function ZE(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["data"]);r!=null&&d(n,["data"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function KE(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function JE(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],YE(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],ZE(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],KE(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function to(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>JE(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function XE(l,t){const n={},a=c(t,["anyOf"]);a!=null&&d(n,["anyOf"],a);const r=c(t,["default"]);r!=null&&d(n,["default"],r);const u=c(t,["description"]);u!=null&&d(n,["description"],u);const m=c(t,["enum"]);m!=null&&d(n,["enum"],m);const g=c(t,["example"]);g!=null&&d(n,["example"],g);const y=c(t,["format"]);y!=null&&d(n,["format"],y);const p=c(t,["items"]);p!=null&&d(n,["items"],p);const v=c(t,["maxItems"]);v!=null&&d(n,["maxItems"],v);const E=c(t,["maxLength"]);E!=null&&d(n,["maxLength"],E);const x=c(t,["maxProperties"]);x!=null&&d(n,["maxProperties"],x);const b=c(t,["maximum"]);b!=null&&d(n,["maximum"],b);const R=c(t,["minItems"]);R!=null&&d(n,["minItems"],R);const L=c(t,["minLength"]);L!=null&&d(n,["minLength"],L);const N=c(t,["minProperties"]);N!=null&&d(n,["minProperties"],N);const A=c(t,["minimum"]);A!=null&&d(n,["minimum"],A);const P=c(t,["nullable"]);P!=null&&d(n,["nullable"],P);const k=c(t,["pattern"]);k!=null&&d(n,["pattern"],k);const w=c(t,["properties"]);w!=null&&d(n,["properties"],w);const D=c(t,["propertyOrdering"]);D!=null&&d(n,["propertyOrdering"],D);const X=c(t,["required"]);X!=null&&d(n,["required"],X);const W=c(t,["title"]);W!=null&&d(n,["title"],W);const ne=c(t,["type"]);return ne!=null&&d(n,["type"],ne),n}function QE(l,t){const n={},a=c(t,["featureSelectionPreference"]);return a!=null&&d(n,["featureSelectionPreference"],a),n}function jE(l,t){const n={},a=c(t,["method"]);a!=null&&d(n,["method"],a);const r=c(t,["category"]);r!=null&&d(n,["category"],r);const u=c(t,["threshold"]);return u!=null&&d(n,["threshold"],u),n}function WE(l,t){const n={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=c(t,["description"]);a!=null&&d(n,["description"],a);const r=c(t,["name"]);r!=null&&d(n,["name"],r);const u=c(t,["parameters"]);u!=null&&d(n,["parameters"],u);const m=c(t,["response"]);return m!=null&&d(n,["response"],m),n}function e_(l,t){const n={},a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);const r=c(t,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function t_(l,t){const n={},a=c(t,["timeRangeFilter"]);return a!=null&&d(n,["timeRangeFilter"],e_(l,a)),n}function n_(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function i_(l,t){const n={},a=c(t,["dynamicRetrievalConfig"]);return a!=null&&d(n,["dynamicRetrievalConfig"],n_(l,a)),n}function a_(){return{}}function o_(l,t){const n={},a=c(t,["apiKeyString"]);return a!=null&&d(n,["apiKeyString"],a),n}function l_(l,t){const n={},a=c(t,["apiKeyConfig"]);a!=null&&d(n,["apiKeyConfig"],o_(l,a));const r=c(t,["authType"]);r!=null&&d(n,["authType"],r);const u=c(t,["googleServiceAccountConfig"]);u!=null&&d(n,["googleServiceAccountConfig"],u);const m=c(t,["httpBasicAuthConfig"]);m!=null&&d(n,["httpBasicAuthConfig"],m);const g=c(t,["oauthConfig"]);g!=null&&d(n,["oauthConfig"],g);const y=c(t,["oidcConfig"]);return y!=null&&d(n,["oidcConfig"],y),n}function r_(l,t){const n={},a=c(t,["authConfig"]);return a!=null&&d(n,["authConfig"],l_(l,a)),n}function Ag(l,t){const n={},a=c(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>WE(l,E))),d(n,["functionDeclarations"],v)}const r=c(t,["retrieval"]);r!=null&&d(n,["retrieval"],r);const u=c(t,["googleSearch"]);u!=null&&d(n,["googleSearch"],t_(l,u));const m=c(t,["googleSearchRetrieval"]);m!=null&&d(n,["googleSearchRetrieval"],i_(l,m)),c(t,["enterpriseWebSearch"])!=null&&d(n,["enterpriseWebSearch"],a_());const y=c(t,["googleMaps"]);if(y!=null&&d(n,["googleMaps"],r_(l,y)),c(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=c(t,["codeExecution"]);return p!=null&&d(n,["codeExecution"],p),n}function s_(l,t){const n={},a=c(t,["mode"]);a!=null&&d(n,["mode"],a);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function u_(l,t){const n={},a=c(t,["latitude"]);a!=null&&d(n,["latitude"],a);const r=c(t,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function c_(l,t){const n={},a=c(t,["latLng"]);a!=null&&d(n,["latLng"],u_(l,a));const r=c(t,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function d_(l,t){const n={},a=c(t,["functionCallingConfig"]);a!=null&&d(n,["functionCallingConfig"],s_(l,a));const r=c(t,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],c_(l,r)),n}function f_(l,t){const n={},a=c(t,["voiceName"]);return a!=null&&d(n,["voiceName"],a),n}function m_(l,t){const n={},a=c(t,["prebuiltVoiceConfig"]);return a!=null&&d(n,["prebuiltVoiceConfig"],f_(l,a)),n}function p_(l,t){const n={},a=c(t,["voiceConfig"]);if(a!=null&&d(n,["voiceConfig"],m_(l,a)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function h_(l,t){const n={},a=c(t,["includeThoughts"]);a!=null&&d(n,["includeThoughts"],a);const r=c(t,["thinkingBudget"]);return r!=null&&d(n,["thinkingBudget"],r),n}function g_(l,t,n){const a={},r=c(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],to(l,mn(l,r)));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const m=c(t,["topP"]);m!=null&&d(a,["topP"],m);const g=c(t,["topK"]);g!=null&&d(a,["topK"],g);const y=c(t,["candidateCount"]);y!=null&&d(a,["candidateCount"],y);const p=c(t,["maxOutputTokens"]);p!=null&&d(a,["maxOutputTokens"],p);const v=c(t,["stopSequences"]);v!=null&&d(a,["stopSequences"],v);const E=c(t,["responseLogprobs"]);E!=null&&d(a,["responseLogprobs"],E);const x=c(t,["logprobs"]);x!=null&&d(a,["logprobs"],x);const b=c(t,["presencePenalty"]);b!=null&&d(a,["presencePenalty"],b);const R=c(t,["frequencyPenalty"]);R!=null&&d(a,["frequencyPenalty"],R);const L=c(t,["seed"]);L!=null&&d(a,["seed"],L);const N=c(t,["responseMimeType"]);N!=null&&d(a,["responseMimeType"],N);const A=c(t,["responseSchema"]);A!=null&&d(a,["responseSchema"],XE(l,kr(l,A)));const P=c(t,["routingConfig"]);P!=null&&d(a,["routingConfig"],P);const k=c(t,["modelSelectionConfig"]);k!=null&&d(a,["modelConfig"],QE(l,k));const w=c(t,["safetySettings"]);if(n!==void 0&&w!=null){let se=w;Array.isArray(se)&&(se=se.map(ue=>jE(l,ue))),d(n,["safetySettings"],se)}const D=c(t,["tools"]);if(n!==void 0&&D!=null){let se=Pr(l,D);Array.isArray(se)&&(se=se.map(ue=>Ag(l,Ur(l,ue)))),d(n,["tools"],se)}const X=c(t,["toolConfig"]);n!==void 0&&X!=null&&d(n,["toolConfig"],d_(l,X));const W=c(t,["labels"]);n!==void 0&&W!=null&&d(n,["labels"],W);const ne=c(t,["cachedContent"]);n!==void 0&&ne!=null&&d(n,["cachedContent"],Vi(l,ne));const B=c(t,["responseModalities"]);B!=null&&d(a,["responseModalities"],B);const ce=c(t,["mediaResolution"]);ce!=null&&d(a,["mediaResolution"],ce);const ie=c(t,["speechConfig"]);ie!=null&&d(a,["speechConfig"],p_(l,pg(l,ie)));const Z=c(t,["audioTimestamp"]);Z!=null&&d(a,["audioTimestamp"],Z);const de=c(t,["thinkingConfig"]);return de!=null&&d(a,["thinkingConfig"],h_(l,de)),a}function kh(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);if(r!=null){let m=Vn(l,r);Array.isArray(m)&&(m=m.map(g=>to(l,g))),d(n,["contents"],m)}const u=c(t,["config"]);return u!=null&&d(n,["generationConfig"],g_(l,u,n)),n}function y_(l,t,n){const a={},r=c(t,["taskType"]);n!==void 0&&r!=null&&d(n,["instances[]","task_type"],r);const u=c(t,["title"]);n!==void 0&&u!=null&&d(n,["instances[]","title"],u);const m=c(t,["outputDimensionality"]);n!==void 0&&m!=null&&d(n,["parameters","outputDimensionality"],m);const g=c(t,["mimeType"]);n!==void 0&&g!=null&&d(n,["instances[]","mimeType"],g);const y=c(t,["autoTruncate"]);return n!==void 0&&y!=null&&d(n,["parameters","autoTruncate"],y),a}function v_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);r!=null&&d(n,["instances[]","content"],mg(l,r));const u=c(t,["config"]);return u!=null&&d(n,["config"],y_(l,u,n)),n}function T_(l,t,n){const a={},r=c(t,["outputGcsUri"]);n!==void 0&&r!=null&&d(n,["parameters","storageUri"],r);const u=c(t,["negativePrompt"]);n!==void 0&&u!=null&&d(n,["parameters","negativePrompt"],u);const m=c(t,["numberOfImages"]);n!==void 0&&m!=null&&d(n,["parameters","sampleCount"],m);const g=c(t,["aspectRatio"]);n!==void 0&&g!=null&&d(n,["parameters","aspectRatio"],g);const y=c(t,["guidanceScale"]);n!==void 0&&y!=null&&d(n,["parameters","guidanceScale"],y);const p=c(t,["seed"]);n!==void 0&&p!=null&&d(n,["parameters","seed"],p);const v=c(t,["safetyFilterLevel"]);n!==void 0&&v!=null&&d(n,["parameters","safetySetting"],v);const E=c(t,["personGeneration"]);n!==void 0&&E!=null&&d(n,["parameters","personGeneration"],E);const x=c(t,["includeSafetyAttributes"]);n!==void 0&&x!=null&&d(n,["parameters","includeSafetyAttributes"],x);const b=c(t,["includeRaiReason"]);n!==void 0&&b!=null&&d(n,["parameters","includeRaiReason"],b);const R=c(t,["language"]);n!==void 0&&R!=null&&d(n,["parameters","language"],R);const L=c(t,["outputMimeType"]);n!==void 0&&L!=null&&d(n,["parameters","outputOptions","mimeType"],L);const N=c(t,["outputCompressionQuality"]);n!==void 0&&N!=null&&d(n,["parameters","outputOptions","compressionQuality"],N);const A=c(t,["addWatermark"]);n!==void 0&&A!=null&&d(n,["parameters","addWatermark"],A);const P=c(t,["enhancePrompt"]);return n!==void 0&&P!=null&&d(n,["parameters","enhancePrompt"],P),a}function C_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&d(n,["config"],T_(l,u,n)),n}function xc(l,t){const n={},a=c(t,["gcsUri"]);a!=null&&d(n,["gcsUri"],a);const r=c(t,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],$i(l,r));const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function x_(l,t){const n={},a=c(t,["maskMode"]);a!=null&&d(n,["maskMode"],a);const r=c(t,["segmentationClasses"]);r!=null&&d(n,["maskClasses"],r);const u=c(t,["maskDilation"]);return u!=null&&d(n,["dilation"],u),n}function E_(l,t){const n={},a=c(t,["controlType"]);a!=null&&d(n,["controlType"],a);const r=c(t,["enableControlImageComputation"]);return r!=null&&d(n,["computeControl"],r),n}function __(l,t){const n={},a=c(t,["styleDescription"]);return a!=null&&d(n,["styleDescription"],a),n}function S_(l,t){const n={},a=c(t,["subjectType"]);a!=null&&d(n,["subjectType"],a);const r=c(t,["subjectDescription"]);return r!=null&&d(n,["subjectDescription"],r),n}function b_(l,t){const n={},a=c(t,["referenceImage"]);a!=null&&d(n,["referenceImage"],xc(l,a));const r=c(t,["referenceId"]);r!=null&&d(n,["referenceId"],r);const u=c(t,["referenceType"]);u!=null&&d(n,["referenceType"],u);const m=c(t,["maskImageConfig"]);m!=null&&d(n,["maskImageConfig"],x_(l,m));const g=c(t,["controlImageConfig"]);g!=null&&d(n,["controlImageConfig"],E_(l,g));const y=c(t,["styleImageConfig"]);y!=null&&d(n,["styleImageConfig"],__(l,y));const p=c(t,["subjectImageConfig"]);return p!=null&&d(n,["subjectImageConfig"],S_(l,p)),n}function N_(l,t,n){const a={},r=c(t,["outputGcsUri"]);n!==void 0&&r!=null&&d(n,["parameters","storageUri"],r);const u=c(t,["negativePrompt"]);n!==void 0&&u!=null&&d(n,["parameters","negativePrompt"],u);const m=c(t,["numberOfImages"]);n!==void 0&&m!=null&&d(n,["parameters","sampleCount"],m);const g=c(t,["aspectRatio"]);n!==void 0&&g!=null&&d(n,["parameters","aspectRatio"],g);const y=c(t,["guidanceScale"]);n!==void 0&&y!=null&&d(n,["parameters","guidanceScale"],y);const p=c(t,["seed"]);n!==void 0&&p!=null&&d(n,["parameters","seed"],p);const v=c(t,["safetyFilterLevel"]);n!==void 0&&v!=null&&d(n,["parameters","safetySetting"],v);const E=c(t,["personGeneration"]);n!==void 0&&E!=null&&d(n,["parameters","personGeneration"],E);const x=c(t,["includeSafetyAttributes"]);n!==void 0&&x!=null&&d(n,["parameters","includeSafetyAttributes"],x);const b=c(t,["includeRaiReason"]);n!==void 0&&b!=null&&d(n,["parameters","includeRaiReason"],b);const R=c(t,["language"]);n!==void 0&&R!=null&&d(n,["parameters","language"],R);const L=c(t,["outputMimeType"]);n!==void 0&&L!=null&&d(n,["parameters","outputOptions","mimeType"],L);const N=c(t,["outputCompressionQuality"]);n!==void 0&&N!=null&&d(n,["parameters","outputOptions","compressionQuality"],N);const A=c(t,["editMode"]);n!==void 0&&A!=null&&d(n,["parameters","editMode"],A);const P=c(t,["baseSteps"]);return n!==void 0&&P!=null&&d(n,["parameters","editConfig","baseSteps"],P),a}function A_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const u=c(t,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>b_(l,y))),d(n,["instances[0]","referenceImages"],g)}const m=c(t,["config"]);return m!=null&&d(n,["config"],N_(l,m,n)),n}function w_(l,t,n){const a={},r=c(t,["includeRaiReason"]);n!==void 0&&r!=null&&d(n,["parameters","includeRaiReason"],r);const u=c(t,["outputMimeType"]);n!==void 0&&u!=null&&d(n,["parameters","outputOptions","mimeType"],u);const m=c(t,["outputCompressionQuality"]);n!==void 0&&m!=null&&d(n,["parameters","outputOptions","compressionQuality"],m);const g=c(t,["numberOfImages"]);n!==void 0&&g!=null&&d(n,["parameters","sampleCount"],g);const y=c(t,["mode"]);return n!==void 0&&y!=null&&d(n,["parameters","mode"],y),a}function R_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["image"]);r!=null&&d(n,["instances[0]","image"],xc(l,r));const u=c(t,["upscaleFactor"]);u!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],u);const m=c(t,["config"]);return m!=null&&d(n,["config"],w_(l,m,n)),n}function M_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","name"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function I_(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const m=c(t,["filter"]);n!==void 0&&m!=null&&d(n,["_query","filter"],m);const g=c(t,["queryBase"]);return n!==void 0&&g!=null&&d(n,["_url","models_url"],vg(l,g)),a}function D_(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],I_(l,a,n)),n}function L_(l,t,n){const a={},r=c(t,["displayName"]);n!==void 0&&r!=null&&d(n,["displayName"],r);const u=c(t,["description"]);n!==void 0&&u!=null&&d(n,["description"],u);const m=c(t,["defaultCheckpointId"]);return n!==void 0&&m!=null&&d(n,["defaultCheckpointId"],m),a}function k_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],L_(l,r,n)),n}function U_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","name"],bt(l,a));const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function P_(l,t,n){const a={},r=c(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],to(l,mn(l,r)));const u=c(t,["tools"]);if(n!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>Ag(l,y))),d(n,["tools"],g)}const m=c(t,["generationConfig"]);return n!==void 0&&m!=null&&d(n,["generationConfig"],m),a}function O_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);if(r!=null){let m=Vn(l,r);Array.isArray(m)&&(m=m.map(g=>to(l,g))),d(n,["contents"],m)}const u=c(t,["config"]);return u!=null&&d(n,["config"],P_(l,u,n)),n}function G_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["contents"]);if(r!=null){let m=Vn(l,r);Array.isArray(m)&&(m=m.map(g=>to(l,g))),d(n,["contents"],m)}const u=c(t,["config"]);return u!=null&&d(n,["config"],u),n}function V_(l,t,n){const a={},r=c(t,["numberOfVideos"]);n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r);const u=c(t,["outputGcsUri"]);n!==void 0&&u!=null&&d(n,["parameters","storageUri"],u);const m=c(t,["fps"]);n!==void 0&&m!=null&&d(n,["parameters","fps"],m);const g=c(t,["durationSeconds"]);n!==void 0&&g!=null&&d(n,["parameters","durationSeconds"],g);const y=c(t,["seed"]);n!==void 0&&y!=null&&d(n,["parameters","seed"],y);const p=c(t,["aspectRatio"]);n!==void 0&&p!=null&&d(n,["parameters","aspectRatio"],p);const v=c(t,["resolution"]);n!==void 0&&v!=null&&d(n,["parameters","resolution"],v);const E=c(t,["personGeneration"]);n!==void 0&&E!=null&&d(n,["parameters","personGeneration"],E);const x=c(t,["pubsubTopic"]);n!==void 0&&x!=null&&d(n,["parameters","pubsubTopic"],x);const b=c(t,["negativePrompt"]);n!==void 0&&b!=null&&d(n,["parameters","negativePrompt"],b);const R=c(t,["enhancePrompt"]);n!==void 0&&R!=null&&d(n,["parameters","enhancePrompt"],R);const L=c(t,["generateAudio"]);return n!==void 0&&L!=null&&d(n,["parameters","generateAudio"],L),a}function $_(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["_url","model"],bt(l,a));const r=c(t,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&d(n,["instances[0]","image"],xc(l,u));const m=c(t,["config"]);return m!=null&&d(n,["config"],V_(l,m,n)),n}function H_(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function q_(l,t){const n={},a=c(t,["data"]);a!=null&&d(n,["data"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function B_(l,t){const n={},a=c(t,["fileUri"]);a!=null&&d(n,["fileUri"],a);const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function z_(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],H_(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],q_(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],B_(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function F_(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>z_(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function Y_(l,t){const n={},a=c(t,["citationSources"]);return a!=null&&d(n,["citations"],a),n}function Z_(l,t){const n={},a=c(t,["retrievedUrl"]);a!=null&&d(n,["retrievedUrl"],a);const r=c(t,["urlRetrievalStatus"]);return r!=null&&d(n,["urlRetrievalStatus"],r),n}function K_(l,t){const n={},a=c(t,["urlMetadata"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Z_(l,u))),d(n,["urlMetadata"],r)}return n}function J_(l,t){const n={},a=c(t,["content"]);a!=null&&d(n,["content"],F_(l,a));const r=c(t,["citationMetadata"]);r!=null&&d(n,["citationMetadata"],Y_(l,r));const u=c(t,["tokenCount"]);u!=null&&d(n,["tokenCount"],u);const m=c(t,["finishReason"]);m!=null&&d(n,["finishReason"],m);const g=c(t,["urlContextMetadata"]);g!=null&&d(n,["urlContextMetadata"],K_(l,g));const y=c(t,["avgLogprobs"]);y!=null&&d(n,["avgLogprobs"],y);const p=c(t,["groundingMetadata"]);p!=null&&d(n,["groundingMetadata"],p);const v=c(t,["index"]);v!=null&&d(n,["index"],v);const E=c(t,["logprobsResult"]);E!=null&&d(n,["logprobsResult"],E);const x=c(t,["safetyRatings"]);return x!=null&&d(n,["safetyRatings"],x),n}function Uh(l,t){const n={},a=c(t,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(y=>J_(l,y))),d(n,["candidates"],g)}const r=c(t,["modelVersion"]);r!=null&&d(n,["modelVersion"],r);const u=c(t,["promptFeedback"]);u!=null&&d(n,["promptFeedback"],u);const m=c(t,["usageMetadata"]);return m!=null&&d(n,["usageMetadata"],m),n}function X_(l,t){const n={},a=c(t,["values"]);return a!=null&&d(n,["values"],a),n}function Q_(){return{}}function j_(l,t){const n={},a=c(t,["embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>X_(l,m))),d(n,["embeddings"],u)}return c(t,["metadata"])!=null&&d(n,["metadata"],Q_()),n}function W_(l,t){const n={},a=c(t,["bytesBase64Encoded"]);a!=null&&d(n,["imageBytes"],$i(l,a));const r=c(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function wg(l,t){const n={},a=c(t,["safetyAttributes","categories"]);a!=null&&d(n,["categories"],a);const r=c(t,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const u=c(t,["contentType"]);return u!=null&&d(n,["contentType"],u),n}function eS(l,t){const n={},a=c(t,["_self"]);a!=null&&d(n,["image"],W_(l,a));const r=c(t,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const u=c(t,["_self"]);return u!=null&&d(n,["safetyAttributes"],wg(l,u)),n}function tS(l,t){const n={},a=c(t,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>eS(l,m))),d(n,["generatedImages"],u)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&d(n,["positivePromptSafetyAttributes"],wg(l,r)),n}function nS(l,t){const n={},a=c(t,["baseModel"]);a!=null&&d(n,["baseModel"],a);const r=c(t,["createTime"]);r!=null&&d(n,["createTime"],r);const u=c(t,["updateTime"]);return u!=null&&d(n,["updateTime"],u),n}function mc(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["displayName"]);r!=null&&d(n,["displayName"],r);const u=c(t,["description"]);u!=null&&d(n,["description"],u);const m=c(t,["version"]);m!=null&&d(n,["version"],m);const g=c(t,["_self"]);g!=null&&d(n,["tunedModelInfo"],nS(l,g));const y=c(t,["inputTokenLimit"]);y!=null&&d(n,["inputTokenLimit"],y);const p=c(t,["outputTokenLimit"]);p!=null&&d(n,["outputTokenLimit"],p);const v=c(t,["supportedGenerationMethods"]);return v!=null&&d(n,["supportedActions"],v),n}function iS(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["_self"]);if(r!=null){let u=Tg(l,r);Array.isArray(u)&&(u=u.map(m=>mc(l,m))),d(n,["models"],u)}return n}function aS(){return{}}function oS(l,t){const n={},a=c(t,["totalTokens"]);a!=null&&d(n,["totalTokens"],a);const r=c(t,["cachedContentTokenCount"]);return r!=null&&d(n,["cachedContentTokenCount"],r),n}function lS(l,t){const n={},a=c(t,["video","uri"]);a!=null&&d(n,["uri"],a);const r=c(t,["video","encodedVideo"]);r!=null&&d(n,["videoBytes"],$i(l,r));const u=c(t,["encoding"]);return u!=null&&d(n,["mimeType"],u),n}function rS(l,t){const n={},a=c(t,["_self"]);return a!=null&&d(n,["video"],lS(l,a)),n}function sS(l,t){const n={},a=c(t,["generatedSamples"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>rS(l,g))),d(n,["generatedVideos"],m)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function uS(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["metadata"]);r!=null&&d(n,["metadata"],r);const u=c(t,["done"]);u!=null&&d(n,["done"],u);const m=c(t,["error"]);m!=null&&d(n,["error"],m);const g=c(t,["response","generateVideoResponse"]);return g!=null&&d(n,["response"],sS(l,g)),n}function cS(l,t){const n={},a=c(t,["fps"]);a!=null&&d(n,["fps"],a);const r=c(t,["endOffset"]);r!=null&&d(n,["endOffset"],r);const u=c(t,["startOffset"]);return u!=null&&d(n,["startOffset"],u),n}function dS(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["data"]);r!=null&&d(n,["data"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function fS(l,t){const n={},a=c(t,["displayName"]);a!=null&&d(n,["displayName"],a);const r=c(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function mS(l,t){const n={},a=c(t,["videoMetadata"]);a!=null&&d(n,["videoMetadata"],cS(l,a));const r=c(t,["thought"]);r!=null&&d(n,["thought"],r);const u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],dS(l,u));const m=c(t,["fileData"]);m!=null&&d(n,["fileData"],fS(l,m));const g=c(t,["codeExecutionResult"]);g!=null&&d(n,["codeExecutionResult"],g);const y=c(t,["executableCode"]);y!=null&&d(n,["executableCode"],y);const p=c(t,["functionCall"]);p!=null&&d(n,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(n,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&d(n,["text"],E),n}function pS(l,t){const n={},a=c(t,["parts"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>mS(l,m))),d(n,["parts"],u)}const r=c(t,["role"]);return r!=null&&d(n,["role"],r),n}function hS(l,t){const n={},a=c(t,["citations"]);return a!=null&&d(n,["citations"],a),n}function gS(l,t){const n={},a=c(t,["content"]);a!=null&&d(n,["content"],pS(l,a));const r=c(t,["citationMetadata"]);r!=null&&d(n,["citationMetadata"],hS(l,r));const u=c(t,["finishMessage"]);u!=null&&d(n,["finishMessage"],u);const m=c(t,["finishReason"]);m!=null&&d(n,["finishReason"],m);const g=c(t,["avgLogprobs"]);g!=null&&d(n,["avgLogprobs"],g);const y=c(t,["groundingMetadata"]);y!=null&&d(n,["groundingMetadata"],y);const p=c(t,["index"]);p!=null&&d(n,["index"],p);const v=c(t,["logprobsResult"]);v!=null&&d(n,["logprobsResult"],v);const E=c(t,["safetyRatings"]);return E!=null&&d(n,["safetyRatings"],E),n}function Ph(l,t){const n={},a=c(t,["candidates"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>gS(l,v))),d(n,["candidates"],p)}const r=c(t,["createTime"]);r!=null&&d(n,["createTime"],r);const u=c(t,["responseId"]);u!=null&&d(n,["responseId"],u);const m=c(t,["modelVersion"]);m!=null&&d(n,["modelVersion"],m);const g=c(t,["promptFeedback"]);g!=null&&d(n,["promptFeedback"],g);const y=c(t,["usageMetadata"]);return y!=null&&d(n,["usageMetadata"],y),n}function yS(l,t){const n={},a=c(t,["truncated"]);a!=null&&d(n,["truncated"],a);const r=c(t,["token_count"]);return r!=null&&d(n,["tokenCount"],r),n}function vS(l,t){const n={},a=c(t,["values"]);a!=null&&d(n,["values"],a);const r=c(t,["statistics"]);return r!=null&&d(n,["statistics"],yS(l,r)),n}function TS(l,t){const n={},a=c(t,["billableCharacterCount"]);return a!=null&&d(n,["billableCharacterCount"],a),n}function CS(l,t){const n={},a=c(t,["predictions[]","embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>vS(l,m))),d(n,["embeddings"],u)}const r=c(t,["metadata"]);return r!=null&&d(n,["metadata"],TS(l,r)),n}function xS(l,t){const n={},a=c(t,["gcsUri"]);a!=null&&d(n,["gcsUri"],a);const r=c(t,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],$i(l,r));const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function Rg(l,t){const n={},a=c(t,["safetyAttributes","categories"]);a!=null&&d(n,["categories"],a);const r=c(t,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const u=c(t,["contentType"]);return u!=null&&d(n,["contentType"],u),n}function Ec(l,t){const n={},a=c(t,["_self"]);a!=null&&d(n,["image"],xS(l,a));const r=c(t,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const u=c(t,["_self"]);u!=null&&d(n,["safetyAttributes"],Rg(l,u));const m=c(t,["prompt"]);return m!=null&&d(n,["enhancedPrompt"],m),n}function ES(l,t){const n={},a=c(t,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(m=>Ec(l,m))),d(n,["generatedImages"],u)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&d(n,["positivePromptSafetyAttributes"],Rg(l,r)),n}function _S(l,t){const n={},a=c(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Ec(l,u))),d(n,["generatedImages"],r)}return n}function SS(l,t){const n={},a=c(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Ec(l,u))),d(n,["generatedImages"],r)}return n}function bS(l,t){const n={},a=c(t,["endpoint"]);a!=null&&d(n,["name"],a);const r=c(t,["deployedModelId"]);return r!=null&&d(n,["deployedModelId"],r),n}function NS(l,t){const n={},a=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&d(n,["baseModel"],a);const r=c(t,["createTime"]);r!=null&&d(n,["createTime"],r);const u=c(t,["updateTime"]);return u!=null&&d(n,["updateTime"],u),n}function AS(l,t){const n={},a=c(t,["checkpointId"]);a!=null&&d(n,["checkpointId"],a);const r=c(t,["epoch"]);r!=null&&d(n,["epoch"],r);const u=c(t,["step"]);return u!=null&&d(n,["step"],u),n}function pc(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["displayName"]);r!=null&&d(n,["displayName"],r);const u=c(t,["description"]);u!=null&&d(n,["description"],u);const m=c(t,["versionId"]);m!=null&&d(n,["version"],m);const g=c(t,["deployedModels"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>bS(l,b))),d(n,["endpoints"],x)}const y=c(t,["labels"]);y!=null&&d(n,["labels"],y);const p=c(t,["_self"]);p!=null&&d(n,["tunedModelInfo"],NS(l,p));const v=c(t,["defaultCheckpointId"]);v!=null&&d(n,["defaultCheckpointId"],v);const E=c(t,["checkpoints"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(b=>AS(l,b))),d(n,["checkpoints"],x)}return n}function wS(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["_self"]);if(r!=null){let u=Tg(l,r);Array.isArray(u)&&(u=u.map(m=>pc(l,m))),d(n,["models"],u)}return n}function RS(){return{}}function MS(l,t){const n={},a=c(t,["totalTokens"]);return a!=null&&d(n,["totalTokens"],a),n}function IS(l,t){const n={},a=c(t,["tokensInfo"]);return a!=null&&d(n,["tokensInfo"],a),n}function DS(l,t){const n={},a=c(t,["gcsUri"]);a!=null&&d(n,["uri"],a);const r=c(t,["bytesBase64Encoded"]);r!=null&&d(n,["videoBytes"],$i(l,r));const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function LS(l,t){const n={},a=c(t,["_self"]);return a!=null&&d(n,["video"],DS(l,a)),n}function kS(l,t){const n={},a=c(t,["videos"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>LS(l,g))),d(n,["generatedVideos"],m)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function US(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["metadata"]);r!=null&&d(n,["metadata"],r);const u=c(t,["done"]);u!=null&&d(n,["done"],u);const m=c(t,["error"]);m!=null&&d(n,["error"],m);const g=c(t,["response"]);return g!=null&&d(n,["response"],kS(l,g)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PS="Content-Type",OS="X-Server-Timeout",GS="User-Agent",hc="x-goog-api-client",VS="1.2.0",$S=`google-genai-sdk/${VS}`,HS="v1beta1",qS="v1beta",Oh=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Mg extends Error{constructor(t,n){n?super(t,{cause:n}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class gc extends Error{constructor(t,n){n?super(t,{cause:n}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class BS{constructor(t){var n,a;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:HS,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:qS,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&a.push(t.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,a){const r=[this.getRequestUrlInternal(n)];return a&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,a);if(t.queryParams)for(const[m,g]of Object.entries(t.queryParams))r.searchParams.append(m,String(g));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,n,t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,n){const a=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(n))typeof u=="object"?a[r]=Object.assign(Object.assign({},a[r]),u):u!==void 0&&(a[r]=u);return a}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,n,t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,a){if(n&&n.timeout||a){const r=new AbortController,u=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),a&&a.addEventListener("abort",()=>{r.abort()}),t.signal=u}return t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:a})).then(async r=>(await Gh(r),new uc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:a})).then(async r=>(await Gh(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var n;return il(this,arguments,function*(){const r=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let m="";for(;;){const{done:g,value:y}=yield Rt(r.read());if(g){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=u.decode(y);try{const E=JSON.parse(p);if("error"in E){const x=JSON.parse(JSON.stringify(E.error)),b=x.status,R=x.code,L=`got status: ${b}. ${JSON.stringify(E)}`;if(R>=400&&R<500)throw new Mg(L);if(R>=500&&R<600)throw new gc(L)}}catch(E){const x=E;if(x.name==="ClientError"||x.name==="ServerError")throw E}m+=p;let v=m.match(Oh);for(;v;){const E=v[1];try{const x=new Response(E,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Rt(new uc(x)),m=m.slice(v[0].length),v=m.match(Oh)}catch(x){throw new Error(`exception parsing stream chunk ${E}. ${x}`)}}}}finally{r.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const t={},n=$S+" "+this.clientOptions.userAgentExtra;return t[GS]=n,t[hc]=n,t[PS]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[a,r]of Object.entries(t.headers))n.append(a,r);t.timeout&&t.timeout>0&&n.append(OS,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var a;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,m=await u.stat(t);r.sizeBytes=String(m.size);const g=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:m.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const y=await this.fetchUploadUrl(r,n);return u.upload(t,y,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var a;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const u={file:t},m=await this.request({path:Ue("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:r});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(a=m==null?void 0:m.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function Gh(l){var t;if(l===void 0)throw new gc("response is undefined");if(!l.ok){const n=l.status,a=l.statusText;let r;!((t=l.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await l.json():r={error:{message:await l.text(),code:l.status,status:l.statusText}};const u=`got status: ${n} ${a}. ${JSON.stringify(r)}`;throw n>=400&&n<500?new Mg(u):n>=500&&n<600?new gc(u):new Error(u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zS="mcp_used/unknown";function Ig(l){for(const t of l)if(_c(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function Dg(l){var t;const n=(t=l[hc])!==null&&t!==void 0?t:"";l[hc]=(n+` ${zS}`).trimStart()}function FS(l){var t,n,a;return(a=(n=(t=l.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>_c(r)))!==null&&a!==void 0?a:!1}function YS(l){var t,n,a;return(a=(n=(t=l.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>!_c(r)))!==null&&a!==void 0?a:!1}function _c(l){return l!==null&&typeof l=="object"&&"tool"in l&&"callTool"in l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZS(l,t,n){const a=new Y0;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const u=rE(l,r);Object.assign(a,u),t(a)}class KS{constructor(t,n,a){this.apiClient=t,this.auth=n,this.webSocketFactory=a}async connect(t){var n,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),m=QS(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${g}`;let p=()=>{};const v=new Promise(k=>{p=k}),E=t.callbacks,x=function(){p({})},b=this.apiClient,R={onopen:x,onmessage:k=>{ZS(b,E.onmessage,k)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(k){},onclose:(a=E==null?void 0:E.onclose)!==null&&a!==void 0?a:function(k){}},L=this.webSocketFactory.create(y,XS(m),R);L.connect(),await v;const N=bt(this.apiClient,t.model),A=Sg(this.apiClient,{model:N}),P=fc(this.apiClient,{setup:A});return L.send(JSON.stringify(P)),new JS(L,this.apiClient)}}class JS{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xx(this.apiClient,t),a=bg(this.apiClient,n);this.conn.send(JSON.stringify({clientContent:a}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=Ex(this.apiClient,t),a=fc(this.apiClient,n);this.conn.send(JSON.stringify(a))}sendPlaybackControl(t){const n=fc(this.apiClient,{playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Za.PLAY)}pause(){this.sendPlaybackControl(Za.PAUSE)}stop(){this.sendPlaybackControl(Za.STOP)}resetContext(){this.sendPlaybackControl(Za.RESET_CONTEXT)}close(){this.conn.close()}}function XS(l){const t={};return l.forEach((n,a)=>{t[a]=n}),t}function QS(l){const t=new Headers;for(const[n,a]of Object.entries(l))t.append(n,a);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jS="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function WS(l,t,n){const a=new F0;let r;if(n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),l.isVertexAI()){const u=jx(l,r);Object.assign(a,u)}else{const u=Qx(l,r);Object.assign(a,u)}t(a)}class eb{constructor(t,n,a){this.apiClient=t,this.auth=n,this.webSocketFactory=a,this.music=new KS(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,a,r,u,m,g;const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&Ig(t.config.tools)&&Dg(E);const x=ab(E);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x);else{const B=this.apiClient.getApiKey();v=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.BidiGenerateContent?key=${B}`}let b=()=>{};const R=new Promise(B=>{b=B}),L=t.callbacks,N=function(){var B;(B=L==null?void 0:L.onopen)===null||B===void 0||B.call(L),b({})},A=this.apiClient,P={onopen:N,onmessage:B=>{WS(A,L.onmessage,B)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(B){},onclose:(a=L==null?void 0:L.onclose)!==null&&a!==void 0?a:function(B){}},k=this.webSocketFactory.create(v,ib(x),P);k.connect(),await R;let w=bt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const B=this.apiClient.getProject(),ce=this.apiClient.getLocation();w=`projects/${B}/locations/${ce}/`+w}let D={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Dr.AUDIO]}:t.config.responseModalities=[Dr.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const X=(g=(m=t.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[],W=[];for(const B of X)if(this.isCallableTool(B)){const ce=B;W.push(await ce.tool())}else W.push(B);W.length>0&&(t.config.tools=W);const ne={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?D=px(this.apiClient,ne):D=mx(this.apiClient,ne),delete D.config,k.send(JSON.stringify(D)),new nb(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const tb={turnComplete:!0};class nb{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=Vn(t,n.turns),t.isVertexAI()?a=a.map(r=>to(t,r)):a=a.map(r=>Gr(t,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const u of a){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(jS)}return{toolResponse:{functionResponses:a}}}sendClientContent(t){t=Object.assign(Object.assign({},tb),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Cx(this.apiClient,t)}:n={realtimeInput:Tx(this.apiClient,t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ib(l){const t={};return l.forEach((n,a)=>{t[a]=n}),t}function ab(l){const t=new Headers;for(const[n,a]of Object.entries(l))t.append(n,a);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vh=10;function $h(l){var t,n,a;if(!((t=l==null?void 0:l.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const m of(n=l==null?void 0:l.tools)!==null&&n!==void 0?n:[])if(br(m)){r=!0;break}if(!r)return!0;const u=(a=l==null?void 0:l.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function br(l){return"callTool"in l&&typeof l.callTool=="function"}function Hh(l){var t;return!(!((t=l==null?void 0:l.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ob extends ll{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var a,r,u,m,g;const y=await this.processParamsForMcpUsage(n);if(!FS(n)||$h(n.config))return await this.generateContentInternal(y);if(YS(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=Vn(this.apiClient,y.contents),x=(u=(r=(a=y.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:Vh;let b=0;for(;b<x&&(p=await this.generateContentInternal(y),!(!p.functionCalls||p.functionCalls.length===0));){const R=p.candidates[0].content,L=[];for(const N of(g=(m=n.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[])if(br(N)){const P=await N.callTool(p.functionCalls);L.push(...P)}b++,v={role:"user",parts:L},y.contents=Vn(this.apiClient,y.contents),y.contents.push(R),y.contents.push(v),Hh(y.config)&&(E.push(R),E.push(v))}return Hh(y.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async n=>{if($h(n.config)){const a=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var r;let u;const m=[];if(a!=null&&a.generatedImages)for(const y of a.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=y==null?void 0:y.safetyAttributes:m.push(y);let g;return u?g={generatedImages:m,positivePromptSafetyAttributes:u}:g={generatedImages:m},g}),this.list=async n=>{var a;const m={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((a=m.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Or(eo.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(m),m)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(t){var n,a,r;const u=(n=t.config)===null||n===void 0?void 0:n.tools;if(!u)return t;const m=await Promise.all(u.map(async y=>br(y)?await y.tool():y)),g={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:m})};if(g.config.tools=m,t.config&&t.config.tools&&Ig(t.config.tools)){const y=(r=(a=t.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Dg(p),g.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:p})}return g}async initAfcToolsMap(t){var n,a,r;const u=new Map;for(const m of(a=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&a!==void 0?a:[])if(br(m)){const g=m,y=await g.tool();for(const p of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(u.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);u.set(p.name,g)}}return u}async processAfcStream(t){var n,a,r;const u=(r=(a=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Vh;let m=!1,g=0;const y=await this.initAfcToolsMap(t);return function(p,v,E){var x,b;return il(this,arguments,function*(){for(var R,L,N,A;g<u;){m&&(g++,m=!1);const D=yield Rt(p.processParamsForMcpUsage(E)),X=yield Rt(p.generateContentStreamInternal(D)),W=[],ne=[];try{for(var P=!0,k=(L=void 0,Sr(X)),w;w=yield Rt(k.next()),R=w.done,!R;P=!0){A=w.value,P=!1;const B=A;if(yield yield Rt(B),B.candidates&&(!((x=B.candidates[0])===null||x===void 0)&&x.content)){ne.push(B.candidates[0].content);for(const ce of(b=B.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(g<u&&ce.functionCall){if(!ce.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ce.functionCall.name)){const ie=yield Rt(v.get(ce.functionCall.name).callTool([ce.functionCall]));W.push(...ie)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ce.functionCall.name}`)}}}}catch(B){L={error:B}}finally{try{!P&&!R&&(N=k.return)&&(yield Rt(N.call(k)))}finally{if(L)throw L.error}}if(W.length>0){m=!0;const B=new jo;B.candidates=[{content:{role:"user",parts:W}}],yield yield Rt(B);const ce=[];ce.push(...ne),ce.push({role:"user",parts:W});const ie=Vn(p.apiClient,E.contents).concat(ce);E.contents=ie}else break}})}(this,y,t)}async generateContentInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=kh(this.apiClient,t);return g=Ue("{model}:generateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=Ph(this.apiClient,v),x=new jo;return Object.assign(x,E),x})}else{const p=Lh(this.apiClient,t);return g=Ue("{model}:generateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=Uh(this.apiClient,v),x=new jo;return Object.assign(x,E),x})}}async generateContentStreamInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=kh(this.apiClient,t);g=Ue("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p.config,delete p._url,delete p._query;const v=this.apiClient;return m=v.requestStream({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),m.then(function(E){return il(this,arguments,function*(){var x,b,R,L;try{for(var N=!0,A=Sr(E),P;P=yield Rt(A.next()),x=P.done,!x;N=!0){L=P.value,N=!1;const w=Ph(v,yield Rt(L.json())),D=new jo;Object.assign(D,w),yield yield Rt(D)}}catch(k){b={error:k}}finally{try{!N&&!x&&(R=A.return)&&(yield Rt(R.call(A)))}finally{if(b)throw b.error}}})})}else{const p=Lh(this.apiClient,t);g=Ue("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p.config,delete p._url,delete p._query;const v=this.apiClient;return m=v.requestStream({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),m.then(function(E){return il(this,arguments,function*(){var x,b,R,L;try{for(var N=!0,A=Sr(E),P;P=yield Rt(A.next()),x=P.done,!x;N=!0){L=P.value,N=!1;const w=Uh(v,yield Rt(L.json())),D=new jo;Object.assign(D,w),yield yield Rt(D)}}catch(k){b={error:k}}finally{try{!N&&!x&&(R=A.return)&&(yield Rt(R.call(A)))}finally{if(b)throw b.error}}})})}}async embedContent(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=v_(this.apiClient,t);return g=Ue("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=CS(this.apiClient,v),x=new mh;return Object.assign(x,E),x})}else{const p=DE(this.apiClient,t);return g=Ue("{model}:batchEmbedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=j_(this.apiClient,v),x=new mh;return Object.assign(x,E),x})}}async generateImagesInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=C_(this.apiClient,t);return g=Ue("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=ES(this.apiClient,v),x=new ph;return Object.assign(x,E),x})}else{const p=kE(this.apiClient,t);return g=Ue("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=tS(this.apiClient,v),x=new ph;return Object.assign(x,E),x})}}async editImageInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI()){const g=A_(this.apiClient,t);return u=Ue("{model}:predict",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const p=_S(this.apiClient,y),v=new V0;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI()){const g=R_(this.apiClient,t);return u=Ue("{model}:predict",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const p=SS(this.apiClient,y),v=new $0;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=M_(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>pc(this.apiClient,v))}else{const p=UE(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>mc(this.apiClient,v))}}async listInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=D_(this.apiClient,t);return g=Ue("{models_url}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=wS(this.apiClient,v),x=new hh;return Object.assign(x,E),x})}else{const p=OE(this.apiClient,t);return g=Ue("{models_url}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=iS(this.apiClient,v),x=new hh;return Object.assign(x,E),x})}}async update(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=k_(this.apiClient,t);return g=Ue("{model}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>pc(this.apiClient,v))}else{const p=VE(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>mc(this.apiClient,v))}}async delete(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=U_(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(()=>{const v=RS(),E=new gh;return Object.assign(E,v),E})}else{const p=$E(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(()=>{const v=aS(),E=new gh;return Object.assign(E,v),E})}}async countTokens(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=O_(this.apiClient,t);return g=Ue("{model}:countTokens",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=MS(this.apiClient,v),x=new yh;return Object.assign(x,E),x})}else{const p=qE(this.apiClient,t);return g=Ue("{model}:countTokens",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=oS(this.apiClient,v),x=new yh;return Object.assign(x,E),x})}}async computeTokens(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI()){const g=G_(this.apiClient,t);return u=Ue("{model}:computeTokens",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const p=IS(this.apiClient,y),v=new H0;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=$_(this.apiClient,t);return g=Ue("{model}:predictLongRunning",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>US(this.apiClient,v))}else{const p=FE(this.apiClient,t);return g=Ue("{model}:predictLongRunning",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>uS(this.apiClient,v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lb(l,t){const n={},a=c(t,["operationName"]);a!=null&&d(n,["_url","operationName"],a);const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function rb(l,t){const n={},a=c(t,["operationName"]);a!=null&&d(n,["_url","operationName"],a);const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function sb(l,t){const n={},a=c(t,["operationName"]);a!=null&&d(n,["operationName"],a);const r=c(t,["resourceName"]);r!=null&&d(n,["_url","resourceName"],r);const u=c(t,["config"]);return u!=null&&d(n,["config"],u),n}function ub(l,t){const n={},a=c(t,["video","uri"]);a!=null&&d(n,["uri"],a);const r=c(t,["video","encodedVideo"]);r!=null&&d(n,["videoBytes"],$i(l,r));const u=c(t,["encoding"]);return u!=null&&d(n,["mimeType"],u),n}function cb(l,t){const n={},a=c(t,["_self"]);return a!=null&&d(n,["video"],ub(l,a)),n}function db(l,t){const n={},a=c(t,["generatedSamples"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>cb(l,g))),d(n,["generatedVideos"],m)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function fb(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["metadata"]);r!=null&&d(n,["metadata"],r);const u=c(t,["done"]);u!=null&&d(n,["done"],u);const m=c(t,["error"]);m!=null&&d(n,["error"],m);const g=c(t,["response","generateVideoResponse"]);return g!=null&&d(n,["response"],db(l,g)),n}function mb(l,t){const n={},a=c(t,["gcsUri"]);a!=null&&d(n,["uri"],a);const r=c(t,["bytesBase64Encoded"]);r!=null&&d(n,["videoBytes"],$i(l,r));const u=c(t,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function pb(l,t){const n={},a=c(t,["_self"]);return a!=null&&d(n,["video"],mb(l,a)),n}function hb(l,t){const n={},a=c(t,["videos"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>pb(l,g))),d(n,["generatedVideos"],m)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function qh(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["metadata"]);r!=null&&d(n,["metadata"],r);const u=c(t,["done"]);u!=null&&d(n,["done"],u);const m=c(t,["error"]);m!=null&&d(n,["error"],m);const g=c(t,["response"]);return g!=null&&d(n,["response"],hb(l,g)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gb extends ll{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,a=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let u;return a&&"httpOptions"in a&&(u=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:u}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=rb(this.apiClient,t);return g=Ue("{operationName}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>qh(this.apiClient,v))}else{const p=lb(this.apiClient,t);return g=Ue("{operationName}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>fb(this.apiClient,v))}}async fetchPredictVideosOperationInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI()){const g=sb(this.apiClient,t);return u=Ue("{resourceName}:fetchPredictOperation",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>qh(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yb(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],a);const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function vb(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const m=c(t,["filter"]);return n!==void 0&&m!=null&&d(n,["_query","filter"],m),a}function Tb(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],vb(l,a,n)),n}function Cb(l,t){const n={},a=c(t,["textInput"]);a!=null&&d(n,["textInput"],a);const r=c(t,["output"]);return r!=null&&d(n,["output"],r),n}function xb(l,t){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=c(t,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Cb(l,u))),d(n,["examples","examples"],r)}return n}function Eb(l,t,n){const a={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(n!==void 0&&r!=null&&d(n,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(t,["epochCount"]);n!==void 0&&u!=null&&d(n,["tuningTask","hyperparameters","epochCount"],u);const m=c(t,["learningRateMultiplier"]);if(m!=null&&d(a,["tuningTask","hyperparameters","learningRateMultiplier"],m),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=c(t,["batchSize"]);n!==void 0&&g!=null&&d(n,["tuningTask","hyperparameters","batchSize"],g);const y=c(t,["learningRate"]);return n!==void 0&&y!=null&&d(n,["tuningTask","hyperparameters","learningRate"],y),a}function _b(l,t){const n={},a=c(t,["baseModel"]);a!=null&&d(n,["baseModel"],a);const r=c(t,["trainingDataset"]);r!=null&&d(n,["tuningTask","trainingData"],xb(l,r));const u=c(t,["config"]);return u!=null&&d(n,["config"],Eb(l,u,n)),n}function Sb(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["_url","name"],a);const r=c(t,["config"]);return r!=null&&d(n,["config"],r),n}function bb(l,t,n){const a={},r=c(t,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const u=c(t,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const m=c(t,["filter"]);return n!==void 0&&m!=null&&d(n,["_query","filter"],m),a}function Nb(l,t){const n={},a=c(t,["config"]);return a!=null&&d(n,["config"],bb(l,a,n)),n}function Ab(l,t,n){const a={},r=c(t,["gcsUri"]);if(n!==void 0&&r!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],r),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function wb(l,t){const n={},a=c(t,["gcsUri"]);return a!=null&&d(n,["validationDatasetUri"],a),n}function Rb(l,t,n){const a={},r=c(t,["validationDataset"]);n!==void 0&&r!=null&&d(n,["supervisedTuningSpec"],wb(l,r));const u=c(t,["tunedModelDisplayName"]);n!==void 0&&u!=null&&d(n,["tunedModelDisplayName"],u);const m=c(t,["description"]);n!==void 0&&m!=null&&d(n,["description"],m);const g=c(t,["epochCount"]);n!==void 0&&g!=null&&d(n,["supervisedTuningSpec","hyperParameters","epochCount"],g);const y=c(t,["learningRateMultiplier"]);n!==void 0&&y!=null&&d(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const p=c(t,["exportLastCheckpointOnly"]);n!==void 0&&p!=null&&d(n,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const v=c(t,["adapterSize"]);if(n!==void 0&&v!=null&&d(n,["supervisedTuningSpec","hyperParameters","adapterSize"],v),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function Mb(l,t){const n={},a=c(t,["baseModel"]);a!=null&&d(n,["baseModel"],a);const r=c(t,["trainingDataset"]);r!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],Ab(l,r,n));const u=c(t,["config"]);return u!=null&&d(n,["config"],Rb(l,u,n)),n}function Ib(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["model"],a);const r=c(t,["name"]);return r!=null&&d(n,["endpoint"],r),n}function Lg(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["state"]);r!=null&&d(n,["state"],gg(l,r));const u=c(t,["createTime"]);u!=null&&d(n,["createTime"],u);const m=c(t,["tuningTask","startTime"]);m!=null&&d(n,["startTime"],m);const g=c(t,["tuningTask","completeTime"]);g!=null&&d(n,["endTime"],g);const y=c(t,["updateTime"]);y!=null&&d(n,["updateTime"],y);const p=c(t,["description"]);p!=null&&d(n,["description"],p);const v=c(t,["baseModel"]);v!=null&&d(n,["baseModel"],v);const E=c(t,["_self"]);E!=null&&d(n,["tunedModel"],Ib(l,E));const x=c(t,["distillationSpec"]);x!=null&&d(n,["distillationSpec"],x);const b=c(t,["experiment"]);b!=null&&d(n,["experiment"],b);const R=c(t,["labels"]);R!=null&&d(n,["labels"],R);const L=c(t,["pipelineJob"]);L!=null&&d(n,["pipelineJob"],L);const N=c(t,["serviceAccount"]);N!=null&&d(n,["serviceAccount"],N);const A=c(t,["tunedModelDisplayName"]);return A!=null&&d(n,["tunedModelDisplayName"],A),n}function Db(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["tunedModels"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(m=>Lg(l,m))),d(n,["tuningJobs"],u)}return n}function Lb(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["metadata"]);r!=null&&d(n,["metadata"],r);const u=c(t,["done"]);u!=null&&d(n,["done"],u);const m=c(t,["error"]);return m!=null&&d(n,["error"],m),n}function kb(l,t){const n={},a=c(t,["checkpointId"]);a!=null&&d(n,["checkpointId"],a);const r=c(t,["epoch"]);r!=null&&d(n,["epoch"],r);const u=c(t,["step"]);u!=null&&d(n,["step"],u);const m=c(t,["endpoint"]);return m!=null&&d(n,["endpoint"],m),n}function Ub(l,t){const n={},a=c(t,["model"]);a!=null&&d(n,["model"],a);const r=c(t,["endpoint"]);r!=null&&d(n,["endpoint"],r);const u=c(t,["checkpoints"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>kb(l,g))),d(n,["checkpoints"],m)}return n}function yc(l,t){const n={},a=c(t,["name"]);a!=null&&d(n,["name"],a);const r=c(t,["state"]);r!=null&&d(n,["state"],gg(l,r));const u=c(t,["createTime"]);u!=null&&d(n,["createTime"],u);const m=c(t,["startTime"]);m!=null&&d(n,["startTime"],m);const g=c(t,["endTime"]);g!=null&&d(n,["endTime"],g);const y=c(t,["updateTime"]);y!=null&&d(n,["updateTime"],y);const p=c(t,["error"]);p!=null&&d(n,["error"],p);const v=c(t,["description"]);v!=null&&d(n,["description"],v);const E=c(t,["baseModel"]);E!=null&&d(n,["baseModel"],E);const x=c(t,["tunedModel"]);x!=null&&d(n,["tunedModel"],Ub(l,x));const b=c(t,["supervisedTuningSpec"]);b!=null&&d(n,["supervisedTuningSpec"],b);const R=c(t,["tuningDataStats"]);R!=null&&d(n,["tuningDataStats"],R);const L=c(t,["encryptionSpec"]);L!=null&&d(n,["encryptionSpec"],L);const N=c(t,["partnerModelTuningSpec"]);N!=null&&d(n,["partnerModelTuningSpec"],N);const A=c(t,["distillationSpec"]);A!=null&&d(n,["distillationSpec"],A);const P=c(t,["experiment"]);P!=null&&d(n,["experiment"],P);const k=c(t,["labels"]);k!=null&&d(n,["labels"],k);const w=c(t,["pipelineJob"]);w!=null&&d(n,["pipelineJob"],w);const D=c(t,["serviceAccount"]);D!=null&&d(n,["serviceAccount"],D);const X=c(t,["tunedModelDisplayName"]);return X!=null&&d(n,["tunedModelDisplayName"],X),n}function Pb(l,t){const n={},a=c(t,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const r=c(t,["tuningJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(m=>yc(l,m))),d(n,["tuningJobs"],u)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ob extends ll{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Or(eo.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let r="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?r=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(r=a.name.split("/operations/")[0]),{name:r,state:sc.JOB_STATE_QUEUED}}}}async getInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=Sb(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>yc(this.apiClient,v))}else{const p=yb(this.apiClient,t);return g=Ue("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>Lg(this.apiClient,v))}}async listInternal(t){var n,a,r,u;let m,g="",y={};if(this.apiClient.isVertexAI()){const p=Nb(this.apiClient,t);return g=Ue("tuningJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),m.then(v=>{const E=Pb(this.apiClient,v),x=new vh;return Object.assign(x,E),x})}else{const p=Tb(this.apiClient,t);return g=Ue("tunedModels",p._url),y=p._query,delete p.config,delete p._url,delete p._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),m.then(v=>{const E=Db(this.apiClient,v),x=new vh;return Object.assign(x,E),x})}}async tuneInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI()){const g=Mb(this.apiClient,t);return u=Ue("tuningJobs",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>yc(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,a;let r,u="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=_b(this.apiClient,t);return u=Ue("tunedModels",g._url),m=g._query,delete g.config,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>Lb(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gb{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Vb=1024*1024*8,$b=3,Hb=1e3,qb=2,ec="x-goog-upload-status";async function Bb(l,t,n){var a,r,u;let m=0,g=0,y=new uc(new Response),p="upload";for(m=l.size;g<m;){const E=Math.min(Vb,m-g),x=l.slice(g,g+E);g+E>=m&&(p+=", finalize");let b=0,R=Hb;for(;b<$b&&(y=await n.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(g),"Content-Length":String(E)}}}),!(!((a=y==null?void 0:y.headers)===null||a===void 0)&&a[ec]));)b++,await Fb(R),R=R*qb;if(g+=E,((r=y==null?void 0:y.headers)===null||r===void 0?void 0:r[ec])!=="active")break;if(m<=g)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((u=y==null?void 0:y.headers)===null||u===void 0?void 0:u[ec])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function zb(l){return{size:l.size,type:l.type}}function Fb(l){return new Promise(t=>setTimeout(t,l))}class Yb{async upload(t,n,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Bb(t,n,a)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await zb(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zb{create(t,n,a){return new Kb(t,n,a)}}class Kb{constructor(t,n,a){this.url=t,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bh="x-goog-api-key";class Jb{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(Bh)===null&&t.append(Bh,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xb="gl-node/";class Qb{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const a=G0(t,void 0,void 0);a&&(t.httpOptions?t.httpOptions.baseUrl=a:t.httpOptions={baseUrl:a}),this.apiVersion=t.apiVersion;const r=new Jb(this.apiKey);this.apiClient=new BS({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Xb+"web",uploader:new Yb,downloader:new Gb}),this.models=new ob(this.apiClient),this.live=new eb(this.apiClient,r,new Zb),this.chats=new oC(this.models,this.apiClient),this.caches=new nC(this.apiClient),this.files=new vC(this.apiClient),this.operations=new gb(this.apiClient),this.tunings=new Ob(this.apiClient)}}console.error("Gemini API key is missing. Please set the API_KEY environment variable.");new Qb({apiKey:"MISSING_API_KEY"});S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const zh=async(l,t,n,a,r,u)=>(console.warn("API key not configured. Cannot identify lore entities."),{rawText:l,processedText:l,potentialDiscoveries:[]});S.OBJECT,S.STRING;const Oi=async(l,t,n,a,r)=>(console.warn("API key not configured. Cannot link entity to lead."),null),jb=async(l,t,n)=>{{console.warn("API key not configured for checkIfSimilarLeadExists. Falling back to basic string check.");const a=l.name.toLowerCase().trim();return t.some(r=>r.type===l.type&&r.name.toLowerCase().trim()===a)}};S.OBJECT,S.STRING;const Wb=async(l,t,n,a)=>(console.warn("API key not configured. Cannot link lead to existing entity."),null);S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const eN=async(l,t,n,a,r,u)=>(console.warn("API key not configured. Cannot generate initial leads."),[]),tN=()=>{const[l,t]=q.useState(new Map),[n,a]=q.useState([]),[r,u]=q.useState([]),m=q.useCallback((x,b,R,L,N,A)=>{let P=!1,k;return t(w=>{var X,W;if(w.has(x)&&((X=w.get(x))==null?void 0:X.name)===b&&((W=w.get(x))==null?void 0:W.type)===R){const ne=w.get(x);if(N.length>ne.descriptionHint.length||A!==ne.firstEncounteredContext){const B=new Map(w);return k={...ne,descriptionHint:N.length>ne.descriptionHint.length?N.substring(0,150):ne.descriptionHint,firstEncounteredContext:A.substring(0,200)},B.set(x,k),P=!0,B}return w}const D=new Map(w);return k={id:x,name:b,type:R,rarity:L,descriptionHint:N.substring(0,150),firstEncounteredContext:A.substring(0,200)},D.set(x,k),P=!0,D}),{entityAddedOrUpdated:P,newEntity:k}},[]),g=q.useCallback((x,b,R)=>{let L=!1,N;return a(A=>(N={id:crypto.randomUUID(),timestamp:Date.now(),summary:x.substring(0,250),involvedEntityIds:b,locationName:R},A.slice(-3).some(k=>{var w;return k.summary.toLowerCase()===x.toLowerCase()&&JSON.stringify((w=k.involvedEntityIds)==null?void 0:w.sort())===JSON.stringify(b==null?void 0:b.sort())})?(console.warn("Attempted to add duplicate major plot point:",x),L=!1,N=void 0,A):(L=!0,[...A,N].slice(-20)))),{plotPointAdded:L,newPlotPoint:N}},[]),y=q.useCallback(async(x,b,R,L,N)=>{let A,P,k=!1,w;const D=`${b}-${x.name.replace(/\s+/g,"_").toLowerCase()}-${x.type}`;if(L(),await jb(x,r))return console.log(`Similar lead for "${x.name}" already exists. Not adding.`),k=!0,{duplicatePrevented:k};const W=await Wb();if(W)return u(ne=>{if(ne.some(ce=>ce.id===D&&ce.status==="discovered"&&ce.fulfilledById===W))return ne;w={...x,id:D,status:"discovered",fulfilledById:W,firstMentionedTimestamp:Date.now(),firstMentionedLocationKey:R};const B=ne.findIndex(ce=>ce.id===D);if(B>-1){const ce=[...ne];return ce[B]=w,ce}return[...ne,w]}),console.log(`Lead for "${x.name}" auto-confirmed as it matches existing entity ID: ${W}.`),{preConfirmedLead:w};if(u(ne=>ne.some(B=>B.id===D)?ne:(A={...x,id:D,status:"mentioned",firstMentionedTimestamp:Date.now(),firstMentionedLocationKey:R,fulfilledById:void 0},[...ne,A])),A){const{entityAddedOrUpdated:ne,newEntity:B}=m(A.id,A.name,"lore_hint",A.rarityHint||"Lore",A.descriptionHint,`Mentioned in ${A.sourceType} (ID: ${A.sourceEntityId}) at ${R}`);ne&&(P=B)}return{newDiscovery:A,newLoreHint:P,duplicatePrevented:k}},[m,r]),p=q.useCallback((x,b)=>{let R=null;return u(L=>L.map(N=>N.id===x&&N.status==="mentioned"?(R={...N,status:"discovered",fulfilledById:b},R):N)),{updatedDiscovery:R}},[]),v=q.useCallback(()=>{let x=`MEMORY CONTEXT:
`;const b=new Set(r.filter(N=>N.status==="discovered").map(N=>N.id)),R=Array.from(l.values()).filter(N=>N.type==="lore_hint"?!b.has(N.id):!0).slice(-10);R.length>0?(x+=`
Notable Entities (Name, Type, Rarity, Hint, First Encounter):
`,R.forEach(N=>{x+=`- ${N.name} (${N.type}, ${N.rarity}). Hint: ${N.descriptionHint}. Seen: ${N.firstEncounteredContext}
`})):x+=`No specific notable entities recorded yet.
`,n.length>0?(x+=`
Recent Major Plot Points (Chronicle - Summary, Involved, Location):
`,n.slice(-10).forEach(N=>{var A;x+=`- ${N.summary}. Involved: ${((A=N.involvedEntityIds)==null?void 0:A.join(", "))||"N/A"}. At: ${N.locationName||"Unknown Location"}
`})):x+=`No major plot points recorded yet.
`;const L=r.filter(N=>N.status==="mentioned");return L.length>0?(x+=`
Active Leads (Potential Discoveries - Name, Type, Hint, Rarity Hint):
`,L.slice(-10).forEach(N=>{x+=`- ${N.name} (${N.type}, Hint: ${N.descriptionHint}, Rarity Hint: ${N.rarityHint||"Unknown"}).
`})):x+=`No specific rumors or unconfirmed leads noted yet.
`,x},[l,n,r]),E=q.useCallback(()=>{t(new Map),a([]),u([])},[]);return{memorableEntities:l,setMemorableEntities:t,majorPlotPoints:n,setMajorPlotPoints:a,potentialDiscoveries:r,setPotentialDiscoveries:u,addMemorableEntityLogic:m,addMajorPlotPointLogic:g,addPotentialDiscoveryLogic:y,markPotentialDiscoveryFoundLogic:p,getMemoryContextString:v,clearMemorySystemLogic:E}},nN=()=>{const[l,t]=q.useState(null),n=q.useCallback((r,u,m)=>{let g=!1;return t(y=>{if(!y)return null;if(y.isDefeated)return y;const p=Math.max(0,y.currentEnergy-r);let v={...y,currentEnergy:p};return p===0&&y.currentEnergy>0&&(v={...v,isDefeated:!0,overallHealth:0},g=!0),v}),{wasDefeated:g}},[]),a=q.useCallback((r,u,m)=>{t(g=>{if(!g||u<=0)return g;let y=!1;const p=g.skills.map(v=>{if(v.name===r){y=!0;let E=v.experience+u,x=v.level,b=v.experienceToNextLevel;for(x===0&&E>=b&&(x=1,E-=v.experienceToNextLevel,b=x*100+100);x>0&&E>=b;)x++,E-=b,b=x*100+100;return{...v,level:x,experience:E,experienceToNextLevel:b}}return v});return y?{...g,skills:p}:g})},[]);return{characterData:l,setCharacterData:t,consumeEnergyLogic:n,gainSkillExperienceLogic:a}},iN=()=>{const[l,t]=q.useState(!1),[n,a]=q.useState(null),[r,u]=q.useState([]),[m,g]=q.useState({x:0,y:0}),[y,p]=q.useState(new Map),[v,E]=q.useState(!1),[x,b]=q.useState(""),[R,L]=q.useState(!1),[N,A]=q.useState(null),[P,k]=q.useState(null),[w,D]=q.useState(null),[X,W]=q.useState(null),[ne,B]=q.useState(!1),[ce,ie]=q.useState(null),[Z,de]=q.useState(null),[se,ue]=q.useState(new Set),O=q.useCallback(Y=>{ue(he=>new Set(he).add(Y))},[]),Q=q.useCallback(Y=>{ue(he=>{const I=new Set(he);return I.delete(Y),I})},[]);return{gameStarted:l,setGameStarted:t,locationData:n,setLocationData:a,playerInventory:r,setPlayerInventory:u,currentCoordinates:m,setCurrentCoordinates:g,visitedLocations:y,setVisitedLocations:p,isLoading:v,setIsLoading:E,loadingMessage:x,setLoadingMessage:b,isConsoleBusy:R,setIsConsoleBusy:L,error:N,setError:A,locationItems:P,setLocationItems:k,locationNPCs:w,setLocationNPCs:D,talkingToNPC:X,setTalkingToNPC:W,isGeneratingEvent:ne,setIsGeneratingEvent:B,eventLoadingMessage:ce,setEventLoadingMessage:ie,lastEventTimestamp:Z,setLastEventTimestamp:de,elaboratingEntityIds:se,addElaboratingEntityId:O,removeElaboratingEntityId:Q}};S.OBJECT,S.STRING,S.STRING,S.STRING,S.BOOLEAN,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.OBJECT,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.OBJECT,S.NUMBER,S.NUMBER,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.STRING,S.NUMBER,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.STRING,S.STRING,S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.ARRAY,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.ARRAY,S.STRING,S.OBJECT,S.STRING,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.BOOLEAN,S.STRING,S.STRING,S.BOOLEAN,S.OBJECT,S.STRING,S.STRING,S.ARRAY,S.STRING;const aN=async(l,t,n,a,r,u,m="")=>{throw new Error("Gemini API key not configured for event generation.")};S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.BOOLEAN,S.STRING,S.OBJECT,S.NUMBER,S.NUMBER,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.STRING,S.NUMBER,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.NUMBER,S.BOOLEAN,S.STRING,S.STRING,S.BOOLEAN,S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.ARRAY,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.ARRAY,S.STRING,S.STRING,S.ARRAY,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const oN=async(l,t,n,a="")=>{throw new Error("Gemini API key not configured for combat event generation.")};S.OBJECT,S.BOOLEAN,S.STRING,S.STRING,S.BOOLEAN,S.STRING,S.STRING,S.STRING,S.OBJECT,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const Fh=async(l,t,n,a,r,u,m)=>{throw new Error("API key not configured for event resolution.")};S.OBJECT,S.BOOLEAN,S.STRING,S.STRING;const lN=async(l,t,n,a,r,u="")=>(console.warn("API key not configured for event decision. Defaulting to no event."),{shouldTriggerEvent:!1,eventConcept:null,eventIntensity:null}),Ka=async(l,t,n,a)=>{let r=`https://via.placeholder.com/64x64/777/fff?text=${encodeURIComponent(t.substring(0,3))}`;return console.warn(`API key not configured. Using placeholder icon for ${t}.`),r};S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const rN=async(l,t,n,a="")=>(console.warn("Cannot generate items: API key not configured."),[]);S.OBJECT,S.STRING;const sN=async(l,t,n="")=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.STRING,S.BOOLEAN,S.BOOLEAN,S.STRING,S.STRING,S.STRING,S.NUMBER,S.NUMBER,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.NUMBER,S.OBJECT,S.STRING,S.NUMBER;const Yh=async(l,t,n,a="")=>{throw new Error("Gemini API key is not configured.")},uN=async(l,t,n,a="")=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.STRING;const cN=async(l,t,n,a)=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.STRING;const dN=async(l,t,n,a,r="")=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const fN=async(l,t,n,a,r="")=>{throw new Error("Gemini API key is not configured.")},mN=[{name:"Combat",description:"Proficiency in physical confrontations, including using weapons and unarmed techniques. Affects attack accuracy, damage, and defensive maneuvers."},{name:"Crafting",description:"Ability to create and repair items from raw materials. Influences quality and complexity of crafted items."},{name:"Survival",description:"Knowledge of tracking, foraging, and enduring harsh environments. Affects finding resources, navigating hazards, and effectiveness of certain consumables."},{name:"Perception",description:"Acuity in noticing details, hidden objects, or subtle clues. Helps in finding items, spotting danger, and discerning information."},{name:"Persuasion",description:"Skill in influencing others through dialogue, negotiation, or charm. Affects NPC reactions, quest outcomes, and trading."},{name:"Mobility",description:"Represents agility, nimbleness, and ease of movement. May influence future actions like evasion or navigating difficult terrain."}],pN=async(l,t,n,a)=>{let r=`https://via.placeholder.com/128x128/777/fff?text=${encodeURIComponent(t.substring(0,3))}`;return console.warn(`API key not configured. Using placeholder icon for ${t}.`),r};S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;S.OBJECT,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.ARRAY,`${mN.map(l=>l.name).join(", ")}`,S.OBJECT,S.STRING,S.NUMBER;const hN=async(l,t,n,a="")=>(console.warn("Cannot generate NPCs: API key not configured."),[]),gN=async(l,t,n,a,r="",u)=>{throw new Error("Gemini API key is not configured.")},Zh=async(l,t,n,a,r,u,m,g)=>{throw new Error("Gemini API key is not configured for event dialogue.")};S.OBJECT,S.BOOLEAN,S.STRING,S.STRING;const yN=async(l,t,n,a,r="",u)=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.BOOLEAN,S.STRING,S.STRING,S.STRING;const vN=async(l,t,n,a,r="",u)=>{throw new Error("Gemini API key is not configured.")},TN=async(l,t,n,a="")=>{throw new Error("Gemini API key is not configured.")},kg=[{name:"Combat",description:"Proficiency in physical confrontations, including using weapons and unarmed techniques. Affects attack accuracy, damage, and defensive maneuvers."},{name:"Crafting",description:"Ability to create and repair items from raw materials. Influences quality and complexity of crafted items."},{name:"Survival",description:"Knowledge of tracking, foraging, and enduring harsh environments. Affects finding resources, navigating hazards, and effectiveness of certain consumables."},{name:"Perception",description:"Acuity in noticing details, hidden objects, or subtle clues. Helps in finding items, spotting danger, and discerning information."},{name:"Persuasion",description:"Skill in influencing others through dialogue, negotiation, or charm. Affects NPC reactions, quest outcomes, and trading."},{name:"Mobility",description:"Represents agility, nimbleness, and ease of movement. May influence future actions like evasion or navigating difficult terrain."}];S.OBJECT,S.STRING,S.STRING,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.NUMBER,S.ARRAY,`${kg.map(l=>l.name).join(", ")}`,S.OBJECT,S.STRING,S.NUMBER,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const CN=async(l,t)=>(console.error("Gemini API key not configured, cannot generate player image."),null),xN=async(l,t,n,a="Fictional",r=null,u="")=>{throw new Error("Gemini API key is not configured.")},vc=async(l,t,n,a)=>(console.warn("API key not configured for event image. No image will be generated."),null),EN=l=>{const{characterData:t,locationData:n,playerInventory:a,gameLog:r,currentCoordinates:u,talkingToNPC:m,locationNPCs:g,potentialDiscoveries:y,isGeneratingEvent:p,lastEventTimestamp:v,setCharacterData:E,setLocationData:x,setPlayerInventory:b,setVisitedLocations:R,setLocationItems:L,setLocationNPCs:N,setTalkingToNPC:A,setIsGeneratingEvent:P,setEventLoadingMessage:k,setLastEventTimestamp:w,addLogEntry:D,gainSkillExperienceLogic:X,addMajorPlotPointLogic:W,addMemorableEntityLogic:ne,getMemoryContextString:B,markPotentialDiscoveryFoundLogic:ce,addPotentialDiscovery:ie,isEventActive:Z,setIsEventActive:de,currentEventImageUrl:se,setCurrentEventImageUrl:ue,currentEventDetails:O,setCurrentEventDetails:Q,currentDirectives:Y}=l,he=q.useCallback(async K=>{var fe;B(),n!=null&&n.visualPromptHint;const le=`${u.x},${u.y}`;if(t!=null&&t.visualStyle,K.characterEffects&&t){let ee=!1;const J={...t},{healthChange:ae,energyChange:ge,limbEffects:F,skillXpGains:Ne}=K.characterEffects;if(ae&&(J.overallHealth=Math.max(0,Math.min(100,J.overallHealth+ae)),D("game_event",`Your overall health changes by ${ae}. Now: ${J.overallHealth}HP.`),ee=!0),ge&&(J.currentEnergy=Math.max(0,Math.min(J.maxEnergy,J.currentEnergy+ge)),D("game_event",`Your energy changes by ${ge}. Now: ${J.currentEnergy}EN.`),ee=!0),F&&(F.forEach(ye=>{const Pe=J.limbs.findIndex(be=>be.name===ye.limbName);if(Pe!==-1){const be={...J.limbs[Pe]};ye.healthChange&&(be.health=Math.max(0,Math.min(100,be.health+ye.healthChange))),ye.newHealthAbsolute!==void 0&&(be.health=Math.max(0,Math.min(100,ye.newHealthAbsolute))),ye.newStatus?be.status=ye.newStatus:be.status=`Affected (${be.health}HP)`,J.limbs[Pe]=be,D("game_event",`${be.name} is now ${be.status} (${be.health}HP).`),ee=!0}}),ee)){const ye=J.limbs.reduce((Pe,be)=>Pe+be.health,0);J.overallHealth=Math.round(ye/J.limbs.length),D("game_event",`Overall health recalculated to ${J.overallHealth}HP.`)}J.overallHealth<=0&&!J.isDefeated&&(J.isDefeated=!0,D("game_event","The effects are overwhelming. You have been defeated."),ee=!0),ee&&E(J),Ne&&Ne.forEach(ye=>X(ye.skillName,ye.amount,D))}if(K.itemEffects&&t){const{itemsAddedToInventory:ee,itemsRemovedFromInventoryByName:J,itemsAddedToLocation:ae,itemsRemovedFromLocationByName:ge}=K.itemEffects;if(y.filter(F=>F.type==="item"&&F.status==="mentioned"),ee!=null&&ee.length){const F=[];for(const Ne of ee){const ye=Ne.visualPromptHint||`a ${Ne.itemTypeGuess} called ${Ne.name}`,Pe=await Ka(ye,Ne.name),be={...Ne,visualPromptHint:ye,id:crypto.randomUUID(),iconUrl:Pe};F.push(be);const ft=await Oi();ft&&ce(ft,be.id),D("game_event",`You acquired: ${be.name} (${be.rarity}).`),ne(be.id,be.name,"item",be.rarity,be.description,"Acquired from event")}b(Ne=>[...Ne,...F])}if(J!=null&&J.length&&b(F=>F.filter(Ne=>{const ye=J.includes(Ne.name);return ye&&D("game_event",`You lost: ${Ne.name}.`),!ye})),ae!=null&&ae.length&&n){const F=[];for(const ye of ae){const Pe=ye.visualPromptHint||`a ${ye.itemTypeGuess} called ${ye.name}`,be=await Ka(Pe,ye.name),ft={...ye,visualPromptHint:Pe,id:crypto.randomUUID(),iconUrl:be};F.push(ft);const kt=await Oi();kt&&ce(kt,ft.id),D("game_event",`${ft.name} (${ft.rarity}) appeared in the area!`),ne(ft.id,ft.name,"item",ft.rarity,ft.description,`Appeared in ${n.name} from event`)}L(ye=>[...ye||[],...F]);const Ne=`${u.x},${u.y}`;R(ye=>{const Pe=new Map(ye),be=Pe.get(Ne);return be&&Pe.set(Ne,{...be,items:[...be.items||[],...F]}),Pe})}if(ge!=null&&ge.length){L(Ne=>Ne?Ne.filter(ye=>{const Pe=ge.includes(ye.name);return Pe&&D("game_event",`${ye.name} vanished from the area.`),!Pe}):null);const F=`${u.x},${u.y}`;R(Ne=>{const ye=new Map(Ne),Pe=ye.get(F);return Pe&&Pe.items&&ye.set(F,{...Pe,items:Pe.items.filter(be=>!ge.includes(be.name))}),ye})}}if(K.locationEffects&&n&&t){const{descriptionChange:ee,newTemporaryNpc:J,environmentTagAdded:ae,environmentTagRemoved:ge}=K.locationEffects;let F=!1;const Ne={...n};if(ee&&(Ne.description+=`
${ee}`,D("narration",`The area changes: ${ee}`),F=!0),ae&&(Ne.environmentTags=[...new Set([...Ne.environmentTags,ae])],D("system",`Area environment is now also: ${ae}`),F=!0),ge&&(Ne.environmentTags=Ne.environmentTags.filter(ye=>ye!==ge),D("system",`Area environment is no longer: ${ge}`),F=!0),F&&x(Ne),J){const ye=await pN(J.visualPromptHint,J.name,n.visualPromptHint),Pe=kg.map(mt=>{var rn;const pt=(rn=J.skillSuggestions)==null?void 0:rn.find(Mt=>Mt.skillName===mt.name);let At=0;return pt?At=pt.level:J.rarity==="Legendary"?At=Math.floor(Math.random()*4)+7:J.rarity==="Epic"?At=Math.floor(Math.random()*3)+5:J.rarity==="Rare"?At=Math.floor(Math.random()*3)+3:At=Math.floor(Math.random()*3)+1,{id:crypto.randomUUID(),name:mt.name,description:mt.description,level:At,experience:0,experienceToNextLevel:At*100+100}}),be={...J,id:crypto.randomUUID(),iconUrl:ye,inventory:[],skills:Pe,currentHealth:100,maxHealth:100,isDefeated:!1,disposition:"Neutral",isEventSpawned:!0,isHiddenDuringEvent:!1};y.filter(mt=>mt.type==="npc"&&mt.status==="mentioned");const ft=await Oi();ft&&ce(ft,be.id),D("game_event",`${be.name} (${be.rarity}) appears due to the event!`),ne(be.id,be.name,"npc",be.rarity,be.description,`Appeared in ${n.name} during event`),N(mt=>[...mt||[],be]);const kt=`${u.x},${u.y}`;R(mt=>{const pt=new Map(mt),At=pt.get(kt);return At&&pt.set(kt,{...At,npcs:[...At.npcs||[],be]}),pt})}}if((fe=K.npcEffects)!=null&&fe.length&&g){let ee=[...g];K.npcEffects.forEach(ae=>{const ge=ee.findIndex(F=>F.id===ae.npcIdTargeted);if(ge!==-1){const F={...ee[ge]};let Ne=!1;ae.healthChange&&(F.currentHealth=Math.max(0,Math.min(F.maxHealth||100,(F.currentHealth||100)+ae.healthChange)),D("combat",`${F.name}'s health changes by ${ae.healthChange}. Now: ${F.currentHealth}HP.`),Ne=!0),ae.isDefeated!==void 0&&(F.isDefeated=ae.isDefeated,D("combat",`${F.name} is now ${ae.isDefeated?"defeated":"no longer defeated"}.`),ae.isDefeated&&(m==null?void 0:m.id)===F.id&&A(null),Ne=!0),ae.dispositionChange&&(F.disposition=ae.dispositionChange,D("system",`${F.name}'s disposition towards you is now ${ae.dispositionChange}.`),Ne=!0),ae.dialogueOverride&&D("narration",`${F.name} exclaims: "${ae.dialogueOverride}"`),ae.isHiddenDuringEvent!==void 0&&(F.isHiddenDuringEvent=ae.isHiddenDuringEvent,D("system",`${F.name} is now ${ae.isHiddenDuringEvent?"hidden by the event":"no longer hidden"}.`),ae.isHiddenDuringEvent&&(m==null?void 0:m.id)===F.id&&A(null),Ne=!0),Ne&&(ee[ge]=F)}}),N(ee);const J=`${u.x},${u.y}`;R(ae=>{const ge=new Map(ae),F=ge.get(J);return F&&ge.set(J,{...F,npcs:ee}),ge})}if(K.worldEffects&&(K.worldEffects.timePasses&&D("system",`Time passes: ${K.worldEffects.timePasses}`),K.worldEffects.weatherChanges&&D("system",`The weather changes: ${K.worldEffects.weatherChanges}`)),K.majorPlotPointSummary&&W(K.majorPlotPointSummary,K.involvedEntityIdsForPlotPoint,n==null?void 0:n.name),K.potentialDiscoveriesGenerated)for(const ee of K.potentialDiscoveriesGenerated)await ie(ee,K.eventTitle,le)},[t,n,a,u,g,m,y,E,x,b,R,L,N,A,D,X,W,ne,B,ce,ie]),I=q.useCallback(async K=>{if(!t||!n||p||Z)return;const le=K.toLowerCase(),fe=le.includes("_epic_")||le.includes("_legendary_"),ee=le.startsWith("event_")||le.startsWith("game_start");if(!fe&&!ee)return;P(!0),k("Sensing a disturbance..."),D("system","You feel a change in the air...");const J=B();try{const ae=await lN(K,t,n,a,r,J);if(!ae.shouldTriggerEvent||!ae.eventConcept||!ae.eventIntensity){D("system","The feeling passes. Nothing significant seems to happen."),P(!1),k(null);return}let ge="";if(Y){const ye=Y.promptEnhancements.find(Pe=>Pe.targetSystem==="EventGeneration");ye&&(ge+=`
Game Director Suggestion for Event: ${ye.suggestion}`),(Y.currentGameFocus===ae.eventConcept||Y.gameplayParameterSuggestions.increaseNarrativeLengthForScenario===ae.eventConcept||Y.gameplayParameterSuggestions.increaseNarrativeLengthForScenario===Y.currentGameFocus&&Y.currentGameFocus===ae.eventConcept)&&(ge+=`
Game Director Suggests: This event matches the current game focus or a scenario requiring longer narration. Please provide a more detailed and immersive event narration.`),Y.gameplayParameterSuggestions.preferredEventType===ae.eventConcept&&(ge+=`
Game Director Notes: This event type (${ae.eventConcept}) is currently preferred.`)}const F=await aN(t,n,a,r,ae.eventConcept,ae.eventIntensity,J+ge);if(["a fleeting sensation","the moment passes","all remains calm","nothing noteworthy","nothing unusual"].some(ye=>F.eventTitle.toLowerCase().includes(ye))&&!F.characterEffects&&!F.itemEffects&&!F.locationEffects&&!F.npcEffects&&!F.majorPlotPointSummary&&!F.requiresPlayerActionToResolve){D("system","The feeling passes. Nothing significant seems to happen."),de(!1),Q(null),ue(null),P(!1),k(null);return}if(de(!0),Q(F),D("game_event",`EVENT: ${F.eventTitle}`),D("narration",F.narration),F.combatNarration&&D("combat",F.combatNarration),F.visualPromptHintForEventImage&&(n!=null&&n.visualPromptHint)&&(t!=null&&t.visualStyle)){const ye=await vc(F.visualPromptHintForEventImage,n.visualPromptHint,F.eventTitle,t.visualStyle);ue(ye),ye&&D("system","Event image generated.")}else ue(null);if(await he(F),w(Date.now()),F.requiresPlayerActionToResolve)D("system","This event requires your attention."),F.resolutionCriteriaPrompt&&D("system",`Hint: ${F.resolutionCriteriaPrompt}`);else{let ye=`Event Occurred: "${F.eventTitle}". ${F.narration}`;F.majorPlotPointSummary&&(ye+=` Lore/Plot: ${F.majorPlotPointSummary}`);const Pe=new Set;t&&Pe.add(t.characterName),F.involvedEntityIdsForPlotPoint&&F.involvedEntityIdsForPlotPoint.forEach(be=>Pe.add(be)),W(ye,Array.from(Pe),n==null?void 0:n.name),de(!1),Q(null),ue(null)}}catch(ae){ae.message==="NO_MAJOR_EVENT"?D("system","The feeling passes. Nothing significant seems to happen."):(console.error("Failed to trigger or apply event:",ae),D("error",`Event generation failed: ${ae.message||"A strange occurrence fizzled out."}`)),de(!1),Q(null),ue(null)}finally{P(!1),k(null)}},[t,n,a,r,p,Z,v,P,k,D,B,he,w,de,Q,ue,W,Y]),j=q.useCallback(async K=>{var fe;if(!t||!n||p||Z){D("system","Cannot initiate major actions now due to ongoing processes or events.");return}P(!0),k("Assessing the consequences...");const le=B();try{let ee=null;if(K.actionType==="attack_npc"){const J=g==null?void 0:g.find(ae=>ae.id===K.targetNpcId);if(J&&t){let ae="";if(Y){const ge=Y.promptEnhancements.find(F=>F.targetSystem==="CombatResolution");ge&&(ae+=`
Game Director Suggestion for Combat: ${ge.suggestion}`),Y.currentGameFocus==="HighStakesCombat"&&(ae+=`
Game Director Notes: This is a high stakes combat scenario. Emphasize danger and impactful outcomes.`)}ee=await oN(t,J,K,le+ae)}else throw new Error("Target NPC for attack not found or character data missing.")}if(ee){if(de(!0),Q(ee),D("game_event",`PLAYER ACTION EVENT: ${ee.eventTitle}`),D("narration",ee.narration),ee.combatNarration&&D("combat",ee.combatNarration),ee.visualPromptHintForEventImage&&(n!=null&&n.visualPromptHint)&&(t!=null&&t.visualStyle)){const ge=await vc(ee.visualPromptHintForEventImage,n.visualPromptHint,ee.eventTitle,t.visualStyle);ue(ge)}else ue(null);await he(ee),w(Date.now());const J=(fe=ee.npcEffects)==null?void 0:fe.find(ge=>ge.npcIdTargeted===K.targetNpcId),ae=t==null?void 0:t.isDefeated;if(J!=null&&J.isDefeated||ae||!ee.requiresPlayerActionToResolve){D("system",J!=null&&J.isDefeated||ae?"The confrontation has reached a conclusion.":"The immediate consequences of your action have played out.");let ge=`Action Outcome: "${ee.eventTitle}". Final Result: ${ee.narration}`;ee.majorPlotPointSummary&&(ge+=` Context/Lore: ${ee.majorPlotPointSummary}`);const F=new Set;t&&F.add(t.characterName),ee.involvedEntityIdsForPlotPoint&&ee.involvedEntityIdsForPlotPoint.forEach(Ne=>F.add(Ne)),J&&F.add(J.npcIdTargeted),W(ge,Array.from(F),n==null?void 0:n.name),de(!1),Q(null),ue(null)}else ee.requiresPlayerActionToResolve&&(D("system","The situation remains tense and requires further action."),ee.resolutionCriteriaPrompt&&D("system",`Hint: ${ee.resolutionCriteriaPrompt}`))}else D("system","Your action did not trigger a major consequence at this time.")}catch(ee){console.error("Failed to handle player-initiated significant action:",ee),D("error",`Action failed: ${ee.message||"An unexpected issue occurred."}`),de(!1),Q(null),ue(null)}finally{P(!1),k(null)}},[t,n,g,p,Z,v,P,k,D,B,he,w,de,Q,ue,W,Y]);return{applyEventEffects:he,attemptToTriggerUnexpectedEvent:I,handlePlayerInitiatedSignificantAction:j}},Ug=q.createContext(void 0),_N=({children:l})=>{const{gameLog:t,addLogEntry:n,setGameLog:a}=n0(),r=tN(),u=nN(),m=iN(),[g,y]=q.useState(null),[p,v]=q.useState(null),[E,x]=q.useState(null),[b,R]=q.useState(null),[L,N]=q.useState(!1),[A,P]=q.useState(null),[k,w]=q.useState(null),[D,X]=q.useState(null),[W,ne]=q.useState(0),B=q.useCallback(()=>{ne(fe=>fe+1)},[]),ce=q.useCallback(async(fe=!1)=>{console.log(`GameContext: Placeholder for triggerGameDirectorAnalysis (force: ${fe}) called. Command count: ${W}`)},[W]),ie=q.useCallback((fe,ee,J)=>{n(fe,ee,J)},[n]),Z=q.useCallback((fe,ee)=>{const{wasDefeated:J}=u.consumeEnergyLogic(fe,ie,ee)},[u.consumeEnergyLogic,ie]),de=q.useCallback((fe,ee)=>{var F,Ne,ye;const J=(Ne=(F=u.characterData)==null?void 0:F.skills.find(Pe=>Pe.name===fe))==null?void 0:Ne.level;u.gainSkillExperienceLogic(fe,ee,ie);const ae=u.characterData,ge=(ye=ae==null?void 0:ae.skills.find(Pe=>Pe.name===fe))==null?void 0:ye.level;ee>0&&ie("system",`Gained ${ee}XP in ${fe}.`),J!==void 0&&ge!==void 0&&ge>J&&(ge===1&&J===0?ie("game_event",`You learned ${fe} (Level ${ge})!`):ie("game_event",`${fe} increased to Level ${ge}!`))},[u.gainSkillExperienceLogic,u.characterData,ie]),se=q.useCallback((fe,ee,J,ae,ge,F)=>{const{entityAddedOrUpdated:Ne,newEntity:ye}=r.addMemorableEntityLogic(fe,ee,J,ae,ge,F);Ne&&ye&&ye.type!=="lore_hint"&&ie("system",`Key entity noted: ${ye.name} (${ye.type}, ${ye.rarity}).`)},[r.addMemorableEntityLogic,ie]),ue=q.useCallback((fe,ee,J)=>{const{plotPointAdded:ae,newPlotPoint:ge}=r.addMajorPlotPointLogic(fe,ee,J);ae&&ge&&ie("game_event",`PLOT UPDATE: ${ge.summary}`)},[r.addMajorPlotPointLogic,ie]),O=q.useCallback(async(fe,ee,J)=>{const{newDiscovery:ae,duplicatePrevented:ge,preConfirmedLead:F}=await r.addPotentialDiscoveryLogic(fe,ee,J,r.getMemoryContextString,r.memorableEntities);F?ie("system",`Hint for '${F.name}' already known and confirmed.`):ae?ie("system",`Lore hint: Heard of a ${ae.type} named '${ae.name}'.`):ge&&ie("system",`A similar hint about '${fe.name}' already exists.`)},[r.addPotentialDiscoveryLogic,r.getMemoryContextString,r.memorableEntities,ie]),Q=q.useCallback((fe,ee)=>{const{updatedDiscovery:J}=r.markPotentialDiscoveryFoundLogic(fe,ee);J&&ie("game_event",`Discovered: ${J.name} (previously hinted at)!`)},[r.markPotentialDiscoveryFoundLogic,ie]),Y=q.useCallback(()=>{r.clearMemorySystemLogic(),ie("system","Memory systems cleared for new game.")},[r.clearMemorySystemLogic,ie]),he={characterData:u.characterData,locationData:m.locationData,playerInventory:m.playerInventory,gameLog:t,currentCoordinates:m.currentCoordinates,talkingToNPC:m.talkingToNPC,locationNPCs:m.locationNPCs,potentialDiscoveries:r.potentialDiscoveries,isGeneratingEvent:m.isGeneratingEvent,lastEventTimestamp:m.lastEventTimestamp,setCharacterData:u.setCharacterData,setLocationData:m.setLocationData,setPlayerInventory:m.setPlayerInventory,setVisitedLocations:m.setVisitedLocations,setLocationItems:m.setLocationItems,setLocationNPCs:m.setLocationNPCs,setTalkingToNPC:m.setTalkingToNPC,setIsGeneratingEvent:m.setIsGeneratingEvent,setEventLoadingMessage:m.setEventLoadingMessage,setLastEventTimestamp:m.setLastEventTimestamp,addLogEntry:ie,gainSkillExperienceLogic:u.gainSkillExperienceLogic,addMajorPlotPointLogic:r.addMajorPlotPointLogic,addMemorableEntityLogic:r.addMemorableEntityLogic,getMemoryContextString:r.getMemoryContextString,markPotentialDiscoveryFoundLogic:r.markPotentialDiscoveryFoundLogic,consumeEnergyLogic:u.consumeEnergyLogic,addPotentialDiscovery:O,isEventActive:L,setIsEventActive:N,currentEventImageUrl:A,setCurrentEventImageUrl:P,currentEventDetails:k,setCurrentEventDetails:w,currentDirectives:D},{applyEventEffects:I,attemptToTriggerUnexpectedEvent:j,handlePlayerInitiatedSignificantAction:K}=EN(he),le={...r,...u,...m,gameLog:t,addLogEntry:ie,setGameLog:a,addMemorableEntity:se,addMajorPlotPoint:ue,addPotentialDiscovery:O,markPotentialDiscoveryFound:Q,clearMemorySystem:Y,_consumeEnergy:Z,_gainSkillExperience:de,applyEventEffects:I,attemptToTriggerUnexpectedEvent:j,handlePlayerInitiatedSignificantAction:K,isEventActive:L,setIsEventActive:N,currentEventImageUrl:A,setCurrentEventImageUrl:P,currentEventDetails:k,setCurrentEventDetails:w,setItemToViewInModal:y,setNpcToViewInModal:v,setLocationToViewInModal:x,setSelectedLocationCoordinateKeyForModal:R,currentDirectives:D,setCurrentDirectives:X,triggerGameDirectorAnalysis:ce,playerCommandCount:W,incrementPlayerCommandCount:B};return T.jsx(Ug.Provider,{value:le,children:l})},bn=()=>{const l=q.useContext(Ug);if(l===void 0)throw new Error("useGameContext must be used within a GameProvider");return l},tn=({className:l="w-8 h-8 text-sky-500"})=>T.jsxs("svg",{className:`animate-spin ${l}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),SN=l=>{if(!l)return"";const t=[];let n=0;const a=/\[lore entity_type="([^"]*)" entity_name="([^"]*)"\]([\s\S]*?)\[\/lore\]/g;let r,u=0;for(;(r=a.exec(l))!==null;){r.index>n&&t.push(l.substring(n,r.index));const[,m,g,y]=r;t.push(tl.createElement("span",{key:`lore-${u++}-${g}`,className:"text-yellow-400 hover:text-yellow-300 font-medium",title:`Lore: ${g} (${m})`},y)),n=a.lastIndex}return n<l.length&&t.push(l.substring(n)),tl.createElement(tl.Fragment,null,...t)},Sc=({entity:l,entityId:t,initialDescription:n,elaborationServiceFn:a,onSuccess:r,characterData:u,isTextualItemContext:m=!1})=>{const{addElaboratingEntityId:g,removeElaboratingEntityId:y,elaboratingEntityIds:p,getMemoryContextString:v,currentCoordinates:E}=bn(),[x,b]=q.useState(n),[R,L]=q.useState(!1),[N,A]=q.useState(!1);q.useEffect(()=>{b(n),L(!1),A(!1)},[t,n]),q.useEffect(()=>{R||b(n)},[n,R]);const P=q.useMemo(()=>SN(x),[x]),k=p.has(t),w=N||k,D=q.useCallback(async()=>{if(!u||!l){console.warn("Cannot elaborate: missing character data or entity.");return}A(!0),g(t);try{const ne=v(),B=`${E.x},${E.y}`,ce=await a(l,u,B,ne);b(ce.processedText),L(!0),r(t,ce.rawText||ce.processedText,ce.processedText,ce.potentialDiscoveries)}catch(ne){console.error(`Error elaborating on entity ${t}:`,ne);const B=x+`

(Could not retrieve more details at this time.)`;b(B),L(!0)}finally{A(!1),y(t)}},[u,l,t,a,r,g,y,v,E,x]),X=q.useMemo(()=>!R&&u&&(k||n.length<450),[R,u,k,n]);return{displayedDescriptionNode:P,handleTriggerElaboration:D,isElaborating:w,canElaborate:X,elaborationButtonText:m?"Read":"Learn More"}},bN=l=>{switch(l){case"Common":return"ring-slate-500";case"Uncommon":return"ring-green-500";case"Rare":return"ring-sky-500";case"Epic":return"ring-purple-500";case"Legendary":return"ring-amber-500";default:return"ring-slate-600"}},NN=l=>{switch(l){case"Common":return"text-slate-400";case"Uncommon":return"text-green-400";case"Rare":return"text-sky-400";case"Epic":return"text-purple-400";case"Legendary":return"text-amber-400";default:return"text-slate-500"}},AN=["book","scroll","note","letter","manuscript","codex","journal","log","brochure","pamphlet","inscription","carving","tablet","map","document"],wN=l=>l?AN.some(t=>l.toLowerCase().includes(t)):!1,RN=({item:l,onClose:t,characterData:n,onDescriptionElaborated:a,onSelectImageForViewing:r})=>{const u=bN(l.rarity),m=NN(l.rarity),g=n.visualStyle,{displayedDescriptionNode:y,handleTriggerElaboration:p,isElaborating:v,canElaborate:E,elaborationButtonText:x}=Sc({entity:l,entityId:l.id,initialDescription:l.description,elaborationServiceFn:uN,onSuccess:a,characterData:n,isTextualItemContext:wN(l.itemTypeGuess)}),b={imageRendering:g==="Pixel Art"?"pixelated":"auto"};return T.jsxs("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 z-50","aria-modal":"true",role:"dialog",onClick:t,children:[T.jsxs("div",{className:`bg-slate-800 p-6 rounded-lg shadow-2xl max-w-lg w-full ring-2 ${u} relative transform transition-all duration-300 ease-out scale-95 opacity-0 animate-modal-appear max-h-[90vh] flex flex-col`,onClick:R=>R.stopPropagation(),style:{animationName:"modal-appear-animation",animationDuration:"0.3s",animationFillMode:"forwards"},"aria-labelledby":"item-modal-title",children:[T.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-slate-400 hover:text-slate-200 text-2xl leading-none z-10","aria-label":"Close item details",children:"×"}),T.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[T.jsx("button",{type:"button",onClick:()=>r(l.iconUrl,l.name),className:`focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${u} rounded-md`,"aria-label":`View larger image of ${l.name}`,title:`View larger image of ${l.name}`,children:T.jsx("img",{src:l.iconUrl,alt:`${l.name} icon`,className:`w-24 h-24 object-contain rounded-md bg-slate-700 p-2 ring-1 ${u}`,style:b})}),T.jsx("h3",{id:"item-modal-title",className:"text-2xl font-semibold text-red-400 mt-3 mb-1",children:l.name}),T.jsx("p",{className:`text-sm ${m} font-medium mb-1`,children:l.rarity}),T.jsxs("p",{className:"text-sm text-slate-500 mb-4 italic",children:["(",l.itemTypeGuess,")"]})]}),T.jsx("div",{className:"text-slate-300 text-sm leading-relaxed whitespace-pre-wrap mb-3 text-left max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 pr-2 flex-grow",children:y}),E&&T.jsx("button",{onClick:p,disabled:v,className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm mb-3 disabled:opacity-70 flex items-center justify-center","aria-label":`Elaborate on ${l.name}`,children:v?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-4 h-4 mr-2"})," Thinking..."]}):x}),T.jsx("button",{onClick:t,className:"w-full bg-sky-600 hover:bg-sky-500 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors","aria-label":"Confirm and close item details",children:"Close"})]}),T.jsx("style",{children:`
        @keyframes modal-appear-animation {
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]})},MN=l=>{switch(l){case"Common":return{border:"ring-slate-500",text:"text-slate-400"};case"Uncommon":return{border:"ring-green-500",text:"text-green-400"};case"Rare":return{border:"ring-sky-500",text:"text-sky-400"};case"Epic":return{border:"ring-purple-500",text:"text-purple-400"};case"Legendary":return{border:"ring-amber-500",text:"text-amber-400"};default:return{border:"ring-slate-600",text:"text-slate-500"}}},IN=l=>{switch(l){case"Common":return"text-slate-400";case"Uncommon":return"text-green-400";case"Rare":return"text-sky-400";case"Epic":return"text-purple-400";case"Legendary":return"text-amber-400";default:return"text-slate-500"}},DN=({npc:l,onClose:t,characterData:n,onDescriptionElaborated:a,onSelectImageForViewing:r})=>{const u=MN(l.rarity),m=n.visualStyle,{displayedDescriptionNode:g,handleTriggerElaboration:y,isElaborating:p,canElaborate:v,elaborationButtonText:E}=Sc({entity:l,entityId:l.id,initialDescription:l.description,elaborationServiceFn:TN,onSuccess:a,characterData:n}),x={imageRendering:m==="Pixel Art"?"pixelated":"auto"};return T.jsxs("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 z-50","aria-modal":"true",role:"dialog",onClick:t,children:[T.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg shadow-2xl max-w-xl w-full ring-1 ring-slate-700 relative transform transition-all duration-300 ease-out scale-95 opacity-0 animate-modal-appear max-h-[90vh] flex flex-col",onClick:b=>b.stopPropagation(),style:{animationName:"modal-appear-animation",animationDuration:"0.3s",animationFillMode:"forwards"},"aria-labelledby":"npc-modal-title",children:[T.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-slate-400 hover:text-slate-200 text-2xl leading-none z-10","aria-label":`Close details for ${l.name}`,children:"×"}),T.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[T.jsx("button",{type:"button",onClick:()=>r(l.iconUrl,l.name),className:`focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${u.border} rounded-md`,"aria-label":`View larger image of ${l.name}`,title:`View larger image of ${l.name}`,children:T.jsx("img",{src:l.iconUrl,alt:`${l.name} portrait`,className:"w-32 h-32 object-contain rounded-md bg-slate-700 p-2 ring-1 ring-slate-600",style:x})}),T.jsx("h3",{id:"npc-modal-title",className:"text-3xl font-semibold text-sky-400 mt-3 mb-1",children:l.name}),T.jsxs("p",{className:`text-sm ${u.text} mb-2`,children:["(",l.rarity,")"]})]}),T.jsxs("div",{className:"space-y-3 text-sm text-slate-300 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 pr-2 flex-grow",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-sky-500 mb-0.5",children:"Description:"}),T.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:g}),v&&T.jsx("button",{onClick:y,disabled:p,className:"mt-2 text-xs bg-teal-700 hover:bg-teal-600 text-teal-200 font-semibold py-1 px-2.5 rounded-md transition-colors disabled:opacity-70 flex items-center","aria-label":`Learn more about ${l.name}`,children:p?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-3 h-3 mr-1.5"})," Thinking..."]}):E})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-sky-500 mb-0.5 mt-2",children:"Appearance:"}),T.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:l.appearanceDetails})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-sky-500 mb-0.5 mt-2",children:"Greeting:"}),T.jsxs("p",{className:"leading-relaxed whitespace-pre-wrap italic",children:['"',l.dialogueGreeting,'"']})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-sky-500 mb-0.5 mt-2",children:"Known Possessions:"}),l.inventory&&l.inventory.length>0?T.jsx("ul",{className:"list-disc list-inside pl-1 space-y-0.5",children:l.inventory.map(b=>T.jsxs("li",{className:"text-xs",children:[b.name," ",T.jsxs("span",{className:`${IN(b.rarity)}`,children:["(",b.rarity,")"]})]},b.id))}):T.jsx("p",{className:"text-xs italic text-slate-400",children:"Carrying nothing of note."})]})]}),T.jsx("button",{onClick:t,className:"mt-6 w-full bg-cyan-600 hover:bg-cyan-500 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors","aria-label":`Confirm and close details for ${l.name}`,children:"Close"})]}),T.jsx("style",{children:`
        @keyframes modal-appear-animation {
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]})},LN=["north","south","east","west"],kN=["Common","Uncommon","Rare","Epic","Legendary"],UN=async(l,t,n)=>{let a=`https://via.placeholder.com/512x512/334155/ffffff?text=${encodeURIComponent(t)}`;return console.warn("API key not configured. Using placeholder image for new location."),a},PN=async(l,t,n="")=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.STRING,S.STRING,S.ARRAY,S.STRING,S.STRING,S.ARRAY,S.STRING,S.STRING,S.STRING;const ON=async(l,t="")=>{throw new Error("Gemini API key is not configured.")},GN=async(l,t,n,a="")=>{throw new Error("Gemini API key is not configured.")};S.OBJECT,S.STRING;const VN=async(l,t,n,a,r,u)=>{throw new Error("Gemini API key is not configured.")},$N=l=>{switch(l){case"Common":return{border:"ring-slate-500",text:"text-slate-400"};case"Uncommon":return{border:"ring-green-500",text:"text-green-400"};case"Rare":return{border:"ring-sky-500",text:"text-sky-400"};case"Epic":return{border:"ring-purple-500",text:"text-purple-400"};case"Legendary":return{border:"ring-amber-500",text:"text-amber-300"};default:return{border:"ring-slate-600",text:"text-slate-500"}}},HN=({location:l,onClose:t,characterData:n,coordinateKey:a,onDescriptionElaborated:r,onSelectImageForViewing:u})=>{const m=$N(l.rarity),g="text-yellow-400",y=n==null?void 0:n.visualStyle,{displayedDescriptionNode:p,handleTriggerElaboration:v,isElaborating:E,canElaborate:x,elaborationButtonText:b}=Sc({entity:l,entityId:a||`${l.name}-fallbackKey`,initialDescription:l.description,elaborationServiceFn:GN,onSuccess:r,characterData:n}),R={imageRendering:y==="Pixel Art"?"pixelated":"auto"};return T.jsxs("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 z-50","aria-modal":"true",role:"dialog",onClick:t,children:[T.jsxs("div",{className:`bg-slate-800 p-6 rounded-lg shadow-2xl max-w-2xl w-full ring-2 ${m.border} relative transform transition-all duration-300 ease-out scale-95 opacity-0 animate-modal-appear max-h-[90vh] flex flex-col`,onClick:L=>L.stopPropagation(),style:{animationName:"modal-appear-animation",animationDuration:"0.3s",animationFillMode:"forwards"},"aria-labelledby":"location-modal-title",children:[T.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-slate-400 hover:text-slate-200 text-2xl leading-none z-10","aria-label":`Close details for ${l.name}`,children:"×"}),T.jsxs("div",{className:"flex items-center mb-4",children:[T.jsx("button",{type:"button",onClick:()=>u(l.imageUrl,l.name),className:`focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${m.border} rounded-md mr-4`,"aria-label":`View larger image of ${l.name}`,title:`View larger image of ${l.name}`,children:T.jsx("img",{src:l.imageUrl,alt:`${l.name}`,className:"w-20 h-20 object-contain rounded-md bg-slate-700 p-1 ring-1 ring-slate-600",style:R})}),T.jsxs("div",{children:[T.jsx("h3",{id:"location-modal-title",className:`text-3xl font-semibold ${g}`,children:l.name}),T.jsxs("p",{className:`text-sm font-medium ${m.text}`,children:["(",l.rarity,")"]})]})]}),T.jsxs("div",{className:"space-y-3 text-sm text-slate-300 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 pr-2 flex-grow",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-yellow-500 mb-0.5",children:"Description:"}),T.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:p}),x&&T.jsx("button",{onClick:v,disabled:E,className:"mt-2 text-xs bg-teal-700 hover:bg-teal-600 text-teal-200 font-semibold py-1 px-2.5 rounded-md transition-colors disabled:opacity-70 flex items-center","aria-label":`Learn more about ${l.name}`,children:E?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-3 h-3 mr-1.5"})," Thinking..."]}):b})]}),l.environmentTags&&l.environmentTags.length>0&&T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-yellow-500 mb-1 mt-2",children:"Environment Tags:"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:l.environmentTags.map((L,N)=>T.jsx("span",{className:"bg-sky-700 text-sky-200 px-2 py-0.5 rounded-full text-xs font-medium shadow",children:L},N))})]}),l.validExits&&l.validExits.length>0&&T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-yellow-500 mb-0.5 mt-2",children:"Valid Exits:"}),T.jsx("p",{className:"leading-relaxed",children:l.validExits.join(", ")})]})]}),T.jsx("button",{onClick:t,className:"mt-6 w-full bg-amber-600 hover:bg-amber-500 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors","aria-label":`Confirm and close details for ${l.name}`,children:"Close"})]}),T.jsx("style",{children:`
        @keyframes modal-appear-animation {
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]})},qN=({imageUrl:l,altText:t,onClose:n})=>T.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center p-4 z-[60]","aria-modal":"true",role:"dialog",onClick:n,children:[T.jsxs("div",{className:"relative bg-slate-900 p-2 rounded-lg shadow-2xl max-w-3xl max-h-[90vh] w-auto h-auto flex items-center justify-center transform transition-all duration-300 ease-out scale-95 opacity-0 animate-modal-appear",onClick:a=>a.stopPropagation(),style:{animationName:"modal-appear-animation",animationDuration:"0.3s",animationFillMode:"forwards"},"aria-labelledby":"image-view-modal-title",children:[T.jsx("button",{onClick:n,className:"absolute top-2 right-2 text-slate-300 hover:text-white bg-slate-800/70 hover:bg-slate-700 rounded-full p-1.5 leading-none z-10","aria-label":`Close image view for ${t}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),T.jsx("img",{src:l,alt:t,className:"block max-w-full max-h-[85vh] object-contain rounded",style:{imageRendering:"pixelated"},"aria-describedby":"image-view-modal-title"}),T.jsx("h3",{id:"image-view-modal-title",className:"sr-only",children:t})]}),T.jsx("style",{children:`
        @keyframes modal-appear-animation {
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]}),BN=({itemToViewInModal:l,onCloseItemModal:t,onItemDescriptionElaborated:n,npcToViewInModal:a,onCloseNpcModal:r,onNpcDescriptionElaborated:u,locationToViewInModal:m,onCloseLocationModal:g,selectedLocationCoordinateKeyForModal:y,onLocationDescriptionElaborated:p,characterData:v,imageUrlToView:E,imageAltTextToView:x,onCloseImageViewModal:b,onSelectImageForViewing:R})=>T.jsxs(T.Fragment,{children:[l&&v&&T.jsx(RN,{item:l,onClose:t,characterData:v,onDescriptionElaborated:n,onSelectImageForViewing:R}),a&&v&&T.jsx(DN,{npc:a,onClose:r,characterData:v,onDescriptionElaborated:u,onSelectImageForViewing:R}),m&&T.jsx(HN,{location:m,onClose:g,characterData:v,coordinateKey:y,onDescriptionElaborated:p,onSelectImageForViewing:R}),E&&x&&T.jsx(qN,{imageUrl:E,altText:x,onClose:b})]}),ol=({type:l,message:t,className:n=""})=>{const a="p-4 rounded-md text-sm";let r="";switch(l){case"error":r="bg-red-900/50 text-red-300 border border-red-700";break;case"success":r="bg-green-900/50 text-green-300 border border-green-700";break;case"warning":r="bg-yellow-900/50 text-yellow-300 border border-yellow-700";break;case"info":default:r="bg-sky-900/50 text-sky-300 border border-sky-700";break}return T.jsxs("div",{className:`${a} ${r} ${n}`,role:"alert",children:[T.jsx("p",{className:"font-medium",children:l.charAt(0).toUpperCase()+l.slice(1)}),T.jsx("p",{children:t})]})},zN={Head:{top:"15%",left:"50%",width:"25%",height:"20%"},Torso:{top:"40%",left:"50%",width:"30%",height:"30%"},"Left Arm":{top:"40%",left:"20%",width:"20%",height:"35%"},"Right Arm":{top:"40%",left:"80%",width:"20%",height:"35%"},"Left Leg":{top:"75%",left:"30%",width:"20%",height:"35%"},"Right Leg":{top:"75%",left:"70%",width:"20%",height:"35%"}},Kh=l=>{if(!l)return"border-sky-500/30 hover:border-sky-400/70";switch(l){case"Common":return"border-slate-400";case"Uncommon":return"border-green-400";case"Rare":return"border-sky-400";case"Epic":return"border-purple-400";case"Legendary":return"border-amber-400";default:return"border-slate-500"}},Jh=l=>l>70?"text-green-400":l>30?"text-yellow-400":"text-red-400",FN=({limbs:l,characterImageUrl:t,onApplyItemToLimb:n,isApplyingToLimbId:a,onUnequipItemFromLimb:r,visualStyle:u})=>{const[m,g]=q.useState(null),[y,p]=q.useState(null),v=q.useRef(null),E=A=>{g(P=>P===A?null:A)};q.useEffect(()=>{const A=P=>{v.current&&!v.current.contains(P.target)&&(Array.from(document.querySelectorAll("[data-limb-id]")).some(w=>w.contains(P.target)&&w.getAttribute("data-limb-id")===m)||g(null))};return m&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[m]);const x=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},b=(A,P)=>{A.preventDefault(),p(P)},R=A=>{A.preventDefault(),p(null)},L=(A,P)=>{A.preventDefault(),p(null),g(null);try{const k=A.dataTransfer.getData("application/json");if(k){const w=JSON.parse(k);w&&w.id?n(w.id,P):console.error("Dropped item data is invalid:",w)}}catch(k){console.error("Error parsing dropped item data:",k)}};if(!l||l.length===0)return T.jsx("p",{className:"text-slate-400 mt-3",children:"No limb data available."});const N={imageRendering:u==="Pixel Art"?"pixelated":"auto"};return T.jsxs("div",{className:"mt-3",children:[T.jsx("h3",{className:"text-xl font-semibold mb-3 text-sky-300",children:"Body Status"}),t?T.jsxs("div",{className:"relative w-full max-w-xs mx-auto aspect-square bg-slate-700/30 rounded-lg shadow-inner ring-1 ring-slate-600",children:[T.jsx("img",{src:t,alt:"Player Character",className:"w-full h-full object-contain",style:N}),l.map(A=>{const P=zN[A.name]||{top:"50%",left:"50%",width:"20%",height:"20%"},k=m===A.id,w=a===`${A.id}`||a&&a.endsWith(`-${A.id}`),D=y===A.id,X=A.equippedItems&&A.equippedItems.length>0,W=X?A.equippedItems[A.equippedItems.length-1]:null;let ne=`absolute rounded-sm focus:outline-none focus:ring-2 focus:ring-sky-400 transition-all duration-150 ease-in-out border-2 ${Kh(W==null?void 0:W.rarity)}`;return D?ne+=" bg-sky-500/30 ring-2 ring-sky-400 scale-105":k?ne+=` ${X?"bg-opacity-30":"bg-sky-600/20"}`:X&&(ne+=" shadow-md"),T.jsxs(tl.Fragment,{children:[T.jsxs("button",{type:"button","data-limb-id":A.id,className:ne,style:{top:P.top,left:P.left,width:P.width,height:P.height,transform:"translate(-50%, -50%)"},onClick:()=>E(A.id),onDragOver:x,onDragEnter:B=>b(B,A.id),onDragLeave:R,onDrop:B=>L(B,A.id),"aria-label":`View status for ${A.name}. ${A.status}. Health: ${A.health}HP. ${X?`Equipped: ${A.equippedItems.map(B=>B.name).join(", ")}.`:""} Drop an item here to use on this limb.`,title:`${A.name}: ${A.status} (${A.health}HP)${X?`. Equipped: ${A.equippedItems.map(B=>`${B.name} (${B.rarity})`).join(", ")}`:""}. Drag item to use.`,children:[w&&T.jsx(tn,{className:"w-4 h-4 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sky-300"}),X&&!w&&T.jsxs("div",{className:"w-full h-full flex items-center justify-center overflow-hidden p-0.5",children:[A.equippedItems.slice(0,3).map((B,ce)=>T.jsx("img",{src:B.iconUrl,alt:B.name,className:`w-1/2 h-1/2 object-contain opacity-80 ${A.equippedItems.length>1?"max-w-[50%] max-h-[50%]":""} ${ce>0?"ml-[-10%]":""}`,title:B.name,style:N},B.id)),A.equippedItems.length>3&&T.jsxs("span",{className:"text-xs text-slate-200 bg-slate-800/70 px-1 rounded-sm absolute bottom-0 right-0",children:["+",A.equippedItems.length-3]})]}),T.jsx("span",{className:"sr-only",children:A.name})]}),k&&!D&&T.jsxs("div",{ref:v,className:"absolute p-3 rounded-md bg-slate-800 shadow-xl ring-1 ring-slate-600 z-10 text-left",style:{top:`calc(${P.top} - 10px)`,left:`calc(${P.left} + ${parseFloat(P.width||"0")/2}px + 5px)`,minWidth:"200px"},role:"status",children:[T.jsx("button",{onClick:()=>g(null),className:"absolute top-1.5 right-1.5 text-slate-400 hover:text-slate-200 text-lg leading-none","aria-label":"Close limb status",children:"✕"}),T.jsx("h5",{className:"text-md font-semibold text-sky-300 mb-1",children:A.name}),T.jsxs("p",{className:"text-xs text-slate-300",children:["Status: ",A.status]}),T.jsxs("p",{className:`text-xs font-medium ${Jh(A.health)} mb-2`,children:["Health: ",A.health," / 100 HP"]}),A.equippedItems&&A.equippedItems.length>0&&T.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700",children:[T.jsx("h6",{className:"text-sm font-medium text-amber-400 mb-1",children:"Equipped Items:"}),A.equippedItems.map(B=>T.jsx("div",{className:"mb-2",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("img",{src:B.iconUrl,alt:B.name,className:"w-6 h-6 mr-2 rounded bg-slate-700 p-0.5",style:N}),T.jsxs("span",{className:"text-xs text-slate-300",children:[B.name," (",B.rarity,")"]})]}),T.jsx("button",{onClick:()=>{r(A.id,B.id),A.equippedItems&&A.equippedItems.length===1&&g(null)},className:"bg-red-700 hover:bg-red-600 text-white text-[0.65rem] font-semibold py-0.5 px-1.5 rounded-sm transition-colors","aria-label":`Unequip ${B.name} from ${A.name}`,children:"Unequip"})]})},B.id))]})]})]},A.id)})]}):T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:l.map(A=>{const P=A.equippedItems&&A.equippedItems.length>0?A.equippedItems[A.equippedItems.length-1]:null;return T.jsxs("div",{className:`bg-slate-700 p-3 rounded-md shadow ring-1 ${Kh(P==null?void 0:P.rarity)} transition-colors ${y===A.id?"bg-sky-700 ring-sky-500":""}`,role:"status","aria-labelledby":`limb-name-${A.id}`,"aria-describedby":`limb-status-${A.id} limb-health-${A.id}`,onDragOver:x,onDragEnter:k=>b(k,A.id),onDragLeave:R,onDrop:k=>L(k,A.id),onClick:()=>E(A.id),children:[T.jsx("h4",{id:`limb-name-${A.id}`,className:"text-md font-medium text-sky-400 mb-0.5",children:A.name}),T.jsxs("p",{id:`limb-status-${A.id}`,className:"text-slate-300 text-xs",children:["Status: ",A.status]}),T.jsxs("p",{id:`limb-health-${A.id}`,className:`text-xs font-medium ${Jh(A.health)}`,children:["Health: ",A.health," / 100 HP"]}),A.equippedItems&&A.equippedItems.length>0&&T.jsxs("p",{className:"text-xs text-amber-400 mt-1",children:["Equipped: ",A.equippedItems.map(k=>`${k.name} (${k.rarity})`).join(", ")]}),a&&a.endsWith(`-${A.id}`)&&T.jsx(tn,{className:"w-4 h-4 ml-2 inline-block text-sky-300"}),m===A.id&&A.equippedItems&&A.equippedItems.length>0&&T.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600 space-y-1",children:A.equippedItems.map(k=>T.jsxs("button",{onClick:w=>{w.stopPropagation(),r(A.id,k.id),A.equippedItems&&A.equippedItems.length===1&&g(null)},className:"w-full bg-red-600 hover:bg-red-500 text-white text-xs font-semibold py-1 px-2 rounded-md transition-colors","aria-label":`Unequip ${k.name} from ${A.name}`,children:["Unequip ",k.name]},k.id))})]},A.id)})})]})},YN=l=>{if(!l)return"border-transparent";switch(l){case"Common":return"border-slate-500";case"Uncommon":return"border-green-500";case"Rare":return"border-sky-500";case"Epic":return"border-purple-500";case"Legendary":return"border-amber-500";default:return"border-slate-600"}},ZN=({imageUrl:l,imageAltText:t,onSelectLocationForModal:n,locationData:a,currentCoordinates:r,isEventActive:u,talkingToNPC:m,onDropItemOnNpcImage:g,visualStyle:y})=>{const[p,v]=q.useState(!1),E=()=>{if(!u&&a){const w=`${r.x},${r.y}`;n(a,w)}},x=w=>{w.preventDefault(),m?w.dataTransfer.dropEffect="move":w.dataTransfer.dropEffect="none"},b=w=>{w.preventDefault(),m&&v(!0)},R=w=>{w.preventDefault(),v(!1)},L=async w=>{if(w.preventDefault(),v(!1),!!m)try{const D=w.dataTransfer.getData("application/json");if(D){const X=JSON.parse(D);X&&X.id&&m?await g(X,m):console.error("Dropped item data is invalid or NPC object missing:",X,m)}}catch(D){console.error("Error parsing dropped item data for NPC:",D)}},N=u?"border-purple-500 shadow-lg shadow-purple-500/50":m?KN(m.rarity):a?YN(a.rarity):"border-transparent",A=m?`Drag item here to give to ${m.name}`:u?t:a?`Click to view details for ${t} (${a.rarity})`:t;let P=`flex justify-center items-center aspect-square p-1 rounded-lg border-4 ${N} bg-slate-700/20 relative transition-all duration-150`;m&&p&&(P+=" ring-4 ring-emerald-500 scale-105 shadow-emerald-500/50");const k={imageRendering:y==="Pixel Art"?"pixelated":"auto"};return T.jsx("div",{className:P,onDragOver:m?x:void 0,onDragEnter:m?b:void 0,onDragLeave:m?R:void 0,onDrop:m?L:void 0,children:T.jsx("button",{type:"button",onClick:E,className:"w-full h-full focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-75 rounded-md overflow-hidden","aria-label":u||m?t:`View details for ${t}`,disabled:u&&!a,title:A,children:T.jsx("img",{src:l,alt:t,"aria-label":`Visual representation of ${t}`,className:"max-w-full max-h-full h-auto w-auto rounded-sm shadow-md object-contain pointer-events-none",style:k})})})},KN=l=>{if(!l)return"border-slate-400";switch(l){case"Common":return"border-slate-500";case"Uncommon":return"border-green-500";case"Rare":return"border-sky-500";case"Epic":return"border-purple-500";case"Legendary":return"border-amber-500";default:return"border-slate-600"}},JN=l=>{switch(l){case"Common":return"border-slate-500 hover:border-slate-400";case"Uncommon":return"border-green-500 hover:border-green-400";case"Rare":return"border-sky-500 hover:border-sky-400";case"Epic":return"border-purple-500 hover:border-purple-400";case"Legendary":return"border-amber-500 hover:border-amber-400";default:return"border-slate-600 hover:border-slate-500"}},XN=({items:l,onPickupItem:t,isPickingUpItemId:n,onSelectItemForModal:a})=>l===null?T.jsx("p",{className:"text-slate-400 italic",children:"You haven't thoroughly searched this area for items yet. Try 'look around' or 'examine area'."}):l.length===0?T.jsx("p",{className:"text-slate-400 italic",children:"You look around but find no distinct items of interest here."}):T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map(r=>{const u=n===r.id,m=JN(r.rarity);return T.jsxs("div",{className:`bg-slate-700 p-3 rounded-lg shadow-md flex flex-col items-center text-center group relative min-h-[12rem] border-2 ${m} transition-colors`,"aria-label":`Item: ${r.name}, Rarity: ${r.rarity}`,children:[T.jsxs("button",{type:"button",onClick:()=>a(r),className:"w-full flex flex-col items-center focus:outline-none focus:ring-2 focus:ring-red-400 rounded-md p-1 flex-grow","aria-label":`View details for ${r.name}`,children:[T.jsx("img",{src:r.iconUrl,alt:`${r.name} icon`,className:"w-20 h-20 md:w-24 md:h-24 object-contain mb-2 rounded bg-slate-600/50 p-1 group-hover:scale-105 transition-transform"}),T.jsx("h4",{className:"text-base font-medium text-red-400 group-hover:text-red-300 mb-1",children:r.name}),T.jsxs("p",{className:"text-sm text-slate-400 overflow-hidden overflow-ellipsis whitespace-nowrap max-w-full",title:`${r.itemTypeGuess} - Rarity: ${r.rarity}`,children:[r.itemTypeGuess," (",r.rarity,")"]})]}),T.jsx("button",{onClick:g=>{g.stopPropagation(),t(r.id)},disabled:u||!!n,className:"mt-auto w-full bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-semibold py-1.5 px-2.5 rounded-md transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-opacity-75 disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center","aria-label":`Pick up ${r.name}`,children:u?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-4 h-4 mr-1.5"}),"Taking..."]}):"Pick Up"})]},r.id)})}),QN=4,Xh=l=>{switch(l){case"Common":return{border:"border-slate-500",hoverBorder:"hover:border-slate-400",bg:"bg-slate-500",text:"text-slate-100"};case"Uncommon":return{border:"border-green-500",hoverBorder:"hover:border-green-400",bg:"bg-green-500",text:"text-green-100"};case"Rare":return{border:"border-sky-500",hoverBorder:"hover:border-sky-400",bg:"bg-sky-500",text:"text-sky-100"};case"Epic":return{border:"border-purple-500",hoverBorder:"hover:border-purple-400",bg:"bg-purple-500",text:"text-purple-100"};case"Legendary":return{border:"border-amber-500",hoverBorder:"hover:border-amber-400",bg:"bg-amber-500",text:"text-amber-100"};default:return{border:"border-slate-600",hoverBorder:"hover:border-slate-500",bg:"bg-slate-600",text:"text-slate-100"}}},jN=({items:l,onUseItem:t,isUsingItemId:n,onSelectItemForModal:a,craftingSlots:r,isApplyingToLimbId:u})=>{const[m,g]=q.useState(null),{characterData:y}=bn(),p=(N,A)=>{N.dataTransfer.setData("application/json",JSON.stringify(A)),N.dataTransfer.effectAllowed="move",g(A.id);const P=document.createElement("div");P.style.position="absolute",P.style.top="-1000px",P.style.padding="0.5rem",P.style.borderRadius="0.375rem",P.style.display="flex",P.style.alignItems="center",P.style.gap="0.5rem",P.style.opacity="1",P.style.fontSize="0.875rem";const k=Xh(A.rarity);P.style.backgroundColor=Qh(k.bg||"bg-slate-600"),P.style.color=Qh(k.text||"text-slate-100");const w=document.createElement("img");w.src=A.iconUrl,w.alt=A.name,w.style.width="2rem",w.style.height="2rem",w.style.objectFit="contain",w.style.borderRadius="0.25rem",P.appendChild(w);const D=document.createElement("span");D.textContent=A.name,D.style.fontWeight="500",P.appendChild(D),document.body.appendChild(P),N.dataTransfer.setDragImage(P,20,20),setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},0)},v=()=>{g(null)},E=u?u.split("-")[0]:null,x=new Set(r.filter(Boolean).map(N=>N.id)),b=new Set(((y==null?void 0:y.limbs)||[]).flatMap(N=>N.equippedItems||[]).map(N=>N.id)),R=l.filter(N=>!(x.has(N.id)||N.id===E||b.has(N.id)));q.useEffect(()=>{m&&R.some(N=>N.id===m)&&g(null)},[R,m]);const L=Array(QN).fill(null);return T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{id:"inventory-heading",className:"text-2xl font-semibold mb-4 text-red-400",children:"Your Inventory"}),l.length===0&&!x.size&&!E&&!b.size?T.jsx("p",{className:"text-slate-400 italic text-center col-span-full py-4",children:"Your backpack feels light... too light. It's empty."}):T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[L.map((N,A)=>{const P=R[A];if(P){const k=n===P.id,w=P.id===m,D=Xh(P.rarity),X=w?{opacity:.05,transform:"scale(0.95)",transition:"opacity 0.1s ease-out, transform 0.1s ease-out"}:{transition:"opacity 0.1s ease-in, transform 0.1s ease-in"};return T.jsxs("div",{draggable:!k,onDragStart:W=>!k&&p(W,P),onDragEnd:v,style:X,className:`bg-slate-700/70 p-3 rounded-lg shadow-md flex flex-col items-center text-center group relative min-h-[12rem] border-2 ${D.border} ${D.hoverBorder} transition-all duration-150 ease-out hover:shadow-red-500/30 ${!w&&!k?"cursor-grab":""} ${w?"cursor-grabbing":""} ${k?"opacity-50 cursor-default":""}`,"aria-label":`Inventory item: ${P.name}, Rarity: ${P.rarity}. ${k?"":"Draggable."}`,title:k?P.name:"Drag to use on self/limbs or combine in crafting. Click to view details.",children:[T.jsxs("button",{type:"button",onClick:()=>!w&&a(P),disabled:w||k,className:"w-full flex flex-col items-center focus:outline-none focus:ring-2 focus:ring-red-400 rounded-md p-1 flex-grow","aria-label":`View details for ${P.name}`,children:[T.jsx("img",{src:P.iconUrl,alt:`${P.name} icon`,className:"w-20 h-20 md:w-24 md:h-24 object-contain mb-2 rounded bg-slate-600/50 p-1 pointer-events-none"}),T.jsx("h4",{className:"text-base font-medium text-red-400 mb-1 pointer-events-none",children:P.name}),T.jsxs("p",{className:"text-sm text-slate-400 overflow-hidden overflow-ellipsis whitespace-nowrap max-w-full pointer-events-none",title:`${P.itemTypeGuess} - Rarity: ${P.rarity}`,children:[P.itemTypeGuess," (",P.rarity,")"]})]}),T.jsx("button",{onClick:W=>{W.stopPropagation(),w||t(P.id)},disabled:k||!!n||w,className:"mt-auto w-full bg-rose-600 hover:bg-rose-500 text-white text-sm font-semibold py-1.5 px-2.5 rounded-md transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-rose-400 focus:ring-opacity-75 disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center","aria-label":`Use ${P.name}`,children:k?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-4 h-4 mr-1.5"}),"Using..."]}):"Use"})]},P.id)}else return T.jsx("div",{className:"bg-slate-700/20 p-3 rounded-lg shadow-inner min-h-[12rem] border-2 border-dashed border-slate-600 flex items-center justify-center","aria-label":"Empty inventory slot",children:T.jsx("span",{className:"text-slate-500 text-xs italic",children:"Empty Slot"})},`empty-slot-${A}`)}),R.length===0&&(x.size>0||!!E||b.size>0)&&T.jsx("p",{className:"text-slate-400 italic text-center col-span-full py-4",children:"All inventory items are currently in use (crafting/equipping) or all slots are empty."})]})]})},Qh=l=>({"bg-slate-500":"#64748b","text-slate-100":"#f1f5f9","bg-green-500":"#22c55e","text-green-100":"#dcfce7","bg-sky-500":"#0ea5e9","text-sky-100":"#e0f2fe","bg-purple-500":"#a855f7","text-purple-100":"#f3e8ff","bg-amber-500":"#f59e0b","text-amber-100":"#fffbeb","bg-slate-600":"#475569"})[l]||"#475569",jh=l=>{switch(l){case"Common":return"border-slate-500";case"Uncommon":return"border-green-500";case"Rare":return"border-sky-500";case"Epic":return"border-purple-500";case"Legendary":return"border-amber-500";default:return"border-slate-600"}},Wh=l=>{switch(l){case"Common":return"hover:border-slate-400";case"Uncommon":return"hover:border-green-400";case"Rare":return"hover:border-sky-400";case"Epic":return"hover:border-purple-400";case"Legendary":return"hover:border-amber-400";default:return"hover:border-slate-500"}},WN=({craftingSlots:l,playerInventory:t,onAddItemToSlot:n,onRemoveItemFromSlot:a,onAttemptCraft:r,isCrafting:u})=>{const[m,g]=q.useState(!1),[y,p]=q.useState(null),[v,E]=q.useState(null),x=w=>{p(w),g(!0)},b=w=>{y!==null&&n(w,y),g(!1),p(null)},R=l.some(w=>w!==null)&&!u,L=t.filter(w=>!l.some(D=>(D==null?void 0:D.id)===w.id)),N=w=>{w.preventDefault(),w.dataTransfer.dropEffect="move"},A=(w,D)=>{w.preventDefault(),l[D]===null&&E(D)},P=w=>{w.preventDefault(),E(null)},k=(w,D)=>{if(w.preventDefault(),E(null),l[D]===null)try{const X=w.dataTransfer.getData("application/json");if(X){const W=JSON.parse(X);if(l.some(ne=>(ne==null?void 0:ne.id)===W.id))return;W&&W.id?n(W,D):console.error("Dropped item data is invalid for crafting slot:",W)}}catch(X){console.error("Error parsing dropped item data for crafting slot:",X)}};return T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-2xl font-semibold mb-4 text-purple-400",children:"Crafting Area"}),T.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4 p-3 bg-slate-700/50 rounded-lg ring-1 ring-slate-600",children:l.map((w,D)=>{const X=v===D&&!w,W="aspect-square rounded-md flex flex-col items-center justify-center p-2 text-center transition-all duration-150 ease-in-out";let ne=w?`${W} border-2 ${jh(w.rarity)} bg-slate-600/50 ${Wh(w.rarity)} cursor-default`:`${W} border-2 border-dashed border-slate-500 hover:border-purple-400 hover:bg-slate-700 cursor-pointer`;return X&&(ne=`${W} border-2 border-purple-500 bg-purple-600/30 ring-2 ring-purple-400 scale-105`),T.jsx("div",{className:ne,onClick:()=>!w&&x(D),onDragOver:N,onDragEnter:B=>A(B,D),onDragLeave:P,onDrop:B=>k(B,D),role:"button",tabIndex:0,"aria-label":w?`Crafting slot ${D+1} contains ${w.name} (${w.rarity}). Click to remove.`:`Crafting slot ${D+1} is empty. Click or drag item to add.`,title:w?`Item: ${w.name}. Rarity: ${w.rarity}`:"Empty crafting slot. Add an item.",children:w?T.jsxs(T.Fragment,{children:[T.jsx("img",{src:w.iconUrl,alt:w.name,className:"w-12 h-12 object-contain mb-1 pointer-events-none"}),T.jsx("p",{className:"text-xs text-purple-300 truncate w-full pointer-events-none",children:w.name}),T.jsxs("p",{className:"text-[0.65rem] text-slate-400 truncate w-full pointer-events-none",children:["(",w.rarity,")"]}),T.jsx("button",{onClick:B=>{B.stopPropagation(),a(D)},className:"mt-1 text-xs bg-red-700 hover:bg-red-600 px-2 py-0.5 rounded text-red-200","aria-label":`Remove ${w.name} from slot ${D+1}`,children:"Remove"})]}):T.jsx("span",{className:`text-slate-400 text-sm ${X?"text-purple-300 font-semibold":""}`,children:X?"Drop Here":"Empty Slot"})},D)})}),T.jsx("button",{onClick:r,disabled:!R||u,className:"w-full bg-purple-600 hover:bg-purple-500 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-opacity-75 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center","aria-label":"Attempt to craft items in slots",children:u?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-5 h-5 mr-2"}),"Crafting..."]}):"Craft Items"}),m&&y!==null&&T.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50","aria-modal":"true",role:"dialog",children:T.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg shadow-xl max-w-md w-full ring-1 ring-slate-700",children:[T.jsxs("h4",{className:"text-xl font-semibold mb-4 text-purple-300",children:["Select an Item for Slot ",y+1]}),L.length>0?T.jsx("div",{className:"grid grid-cols-3 gap-3 max-h-60 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50",children:L.map(w=>T.jsxs("button",{onClick:()=>b(w),className:`p-2 bg-slate-700 hover:bg-purple-600 rounded-md flex flex-col items-center text-center transition-colors border-2 ${jh(w.rarity)} ${Wh(w.rarity)}`,"aria-label":`Select ${w.name} (${w.rarity})`,children:[T.jsx("img",{src:w.iconUrl,alt:w.name,className:"w-12 h-12 object-contain mb-1"}),T.jsx("span",{className:"text-xs text-slate-300 truncate w-full",children:w.name}),T.jsxs("span",{className:"text-[0.65rem] text-slate-400 truncate w-full",children:["(",w.rarity,")"]})]},w.id))}):T.jsx("p",{className:"text-slate-400",children:"No available items in inventory to add."}),T.jsx("button",{onClick:()=>g(!1),className:"mt-6 w-full bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors","aria-label":"Close item selection",children:"Cancel"})]})})]})},eA=l=>{switch(l){case"Common":return{border:"border-slate-500 hover:border-slate-400"};case"Uncommon":return{border:"border-green-500 hover:border-green-400"};case"Rare":return{border:"border-sky-500 hover:border-sky-400"};case"Epic":return{border:"border-purple-500 hover:border-purple-400",shadow:"shadow-purple-500/30"};case"Legendary":return{border:"border-amber-500 hover:border-amber-400",shadow:"shadow-amber-500/30"};default:return{border:"border-slate-600 hover:border-slate-500"}}},tA=l=>{switch(l){case"Common":return"text-slate-300";case"Uncommon":return"text-green-300";case"Rare":return"text-sky-300";case"Epic":return"text-purple-300";case"Legendary":return"text-amber-300";default:return"text-slate-400"}},nA=({npcs:l,onStartConversation:t,onSelectNPCForModal:n,isInteracting:a,isEventActive:r,currentEventDetails:u,visualStyle:m})=>{var p,v;let g=[];if(l===null&&!r)return T.jsx("p",{className:"text-slate-400 italic",children:"You haven't looked for anyone here yet. Try 'look for people' or 'search for NPCs'."});if(r){new Set(((p=u==null?void 0:u.npcEffects)==null?void 0:p.map(x=>x.npcIdTargeted))||[]),g=(l||[]).filter(x=>{var R;if(x.isDefeated)return!1;if(x.isEventSpawned)return!0;const b=(R=u==null?void 0:u.npcEffects)==null?void 0:R.find(L=>L.npcIdTargeted===x.id);return b?b.isHiddenDuringEvent===!1||b.isHiddenDuringEvent===void 0:!1});const E=(v=u==null?void 0:u.locationEffects)==null?void 0:v.newTemporaryNpc;E&&g.find(x=>x.isEventSpawned&&x.name===E.name)}else g=(l||[]).filter(E=>!E.isDefeated);if(g.length===0){const E=r?"The area seems devoid of other people, or they are obscured by the ongoing event.":"You look around but see no one else of note here.";return T.jsx("p",{className:"text-slate-400 italic",children:E})}const y={imageRendering:m==="Pixel Art"?"pixelated":"auto"};return T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:g.map(E=>{const x=eA(E.rarity),b=tA(E.rarity),R=E.isEventSpawned?"text-purple-400":"text-sky-400";return T.jsxs("div",{className:`bg-slate-700 rounded-lg shadow-md overflow-hidden group relative aspect-[3/4] border-2 ${x.border} ${x.shadow?`hover:${x.shadow}`:""} transition-all duration-150 ease-in-out cursor-pointer`,"aria-label":`Character: ${E.name}, Rarity: ${E.rarity}`,onClick:()=>n(E),children:[T.jsx("img",{src:E.iconUrl,alt:`${E.name}`,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105 pointer-events-none",style:y}),T.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-3 bg-gradient-to-t from-slate-900/80 via-slate-900/50 to-transparent",children:[T.jsxs("button",{type:"button",onClick:L=>{L.stopPropagation(),n(E)},className:"w-full text-left focus:outline-none mb-2","aria-label":`View details for ${E.name}`,children:[T.jsx("h4",{className:`text-lg font-semibold ${R} group-hover:underline mb-0.5 truncate`,title:E.name,children:E.name}),T.jsxs("p",{className:"text-xs text-slate-300 overflow-hidden overflow-ellipsis whitespace-nowrap max-w-full",title:E.description,children:[E.description.length>30?E.description.substring(0,27)+"...":E.description,T.jsxs("span",{className:`ml-1 font-medium ${b}`,children:["(",E.rarity,")"]})]})]}),T.jsx("button",{onClick:L=>{L.stopPropagation(),t(E.id)},disabled:a,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-semibold py-2 px-3 rounded-md transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 ring-offset-2 ring-offset-black/50 focus:ring-cyan-400 disabled:opacity-70 disabled:cursor-not-allowed","aria-label":`Talk to ${E.name}`,children:"Talk"})]})]},E.id)})})},eg=3,iA=({visitedLocations:l,currentCoordinates:t,onSelectLocationForModal:n,visualStyle:a})=>{var m,g,y,p;const r=[],u={imageRendering:a==="Pixel Art"?"pixelated":"auto"};for(let v=eg;v>=-3;v--){const E=[];for(let x=-3;x<=eg;x++){const b=t.x+x,R=t.y+v,L=`${b},${R}`,N=l.get(L),A=b===t.x&&R===t.y,P=[];let k="w-14 h-14 border border-slate-700 flex items-center justify-center relative text-xs",w=`${b},${R}`,D=`Location at ${b},${R}`;if(N){k+=" bg-slate-600/50",w=`${N.location.name} (${N.location.rarity}) (${b},${R})`,D=`View details for ${N.location.name} at ${b},${R}`,P.push(T.jsx("img",{src:N.location.imageUrl,alt:N.location.name,className:"w-full h-full object-contain pointer-events-none",style:u},`${L}-img`));const X=N.location.validExits||[],W="absolute bg-lime-500/80 pointer-events-none",ne={north:`${b},${R+1}`,south:`${b},${R-1}`,east:`${b+1},${R}`,west:`${b-1},${R}`};X.includes("north")&&P.push(T.jsx("div",{className:`${W} h-1.5 w-4 top-0 left-1/2 -translate-x-1/2 rounded-b-sm`,title:`Exit North to ${((m=l.get(ne.north))==null?void 0:m.location.name)||"Unexplored"}`},`${L}-exit-n`)),X.includes("south")&&P.push(T.jsx("div",{className:`${W} h-1.5 w-4 bottom-0 left-1/2 -translate-x-1/2 rounded-t-sm`,title:`Exit South to ${((g=l.get(ne.south))==null?void 0:g.location.name)||"Unexplored"}`},`${L}-exit-s`)),X.includes("east")&&P.push(T.jsx("div",{className:`${W} w-1.5 h-4 top-1/2 right-0 -translate-y-1/2 rounded-l-sm`,title:`Exit East to ${((y=l.get(ne.east))==null?void 0:y.location.name)||"Unexplored"}`},`${L}-exit-e`)),X.includes("west")&&P.push(T.jsx("div",{className:`${W} w-1.5 h-4 top-1/2 left-0 -translate-y-1/2 rounded-r-sm`,title:`Exit West to ${((p=l.get(ne.west))==null?void 0:p.location.name)||"Unexplored"}`},`${L}-exit-w`))}else k+=" bg-slate-800",P.push(T.jsx("span",{className:"text-slate-600 pointer-events-none",children:"?"},`${L}-fog`)),w=`Unexplored (${b},${R})`,D=`Unexplored area at ${b},${R}`;A?(k+=" ring-2 ring-amber-400 shadow-lg shadow-amber-500/30 z-10",P.push(T.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-amber-300 font-bold text-2xl pointer-events-none","aria-hidden":"true",children:"◎"},`${L}-current-marker`))):N&&(k+=" ring-1 ring-slate-500 hover:ring-sky-400 transition-all"),E.push(T.jsx("button",{type:"button",className:`${k} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-700 ${N?"focus:ring-sky-500":"focus:ring-slate-500 cursor-default"}`,title:w,"aria-label":D,onClick:()=>N&&n(N.location,L),disabled:!N,children:P},L))}r.push(T.jsx("div",{className:"flex",children:E},`row-${v}`))}return T.jsx("div",{className:"flex flex-col items-center p-2 bg-slate-700/30 rounded-md shadow-inner",children:T.jsx("div",{className:"grid grid-cols-1 gap-0",children:r})})},aA=({overallHealth:l,currentEnergy:t,maxEnergy:n})=>{const a=Math.max(0,Math.min(100,l/100*100)),r=Math.max(0,Math.min(100,t/n*100)),u=m=>m>70?"bg-green-500":m>30?"bg-yellow-500":"bg-red-500";return T.jsxs("div",{className:"space-y-3 mb-4",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[T.jsx("h4",{className:"text-md font-semibold text-rose-400",children:"Overall Health"}),T.jsxs("span",{className:"text-sm text-rose-300 font-mono",children:[l," / 100 HP"]})]}),T.jsx("div",{className:"w-full bg-slate-600 rounded-full h-3.5 shadow-inner",children:T.jsx("div",{className:`h-3.5 rounded-full transition-all duration-300 ease-out ${u(a)}`,style:{width:`${a}%`},role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Overall health: ${l} out of 100`})})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[T.jsx("h4",{className:"text-md font-semibold text-sky-400",children:"Energy"}),T.jsxs("span",{className:"text-sm text-sky-300 font-mono",children:[t," / ",n," EN"]})]}),T.jsx("div",{className:"w-full bg-slate-600 rounded-full h-3.5 shadow-inner",children:T.jsx("div",{className:"bg-sky-500 h-3.5 rounded-full transition-all duration-300 ease-out",style:{width:`${r}%`},role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":n,"aria-label":`Current energy: ${t} out of ${n}`})})]})]})},oA={Combat:"Improves effectiveness in fights, influencing attack success and damage dealt.",Crafting:"Determines the quality and complexity of crafted items. Higher skill can result in rarer or more potent creations.",Survival:"Aids in navigating the world and enduring its challenges. May affect energy consumption during exploration.",Perception:"Increases the likelihood of finding hidden items or people, and discerning subtle details or lore.",Persuasion:"Enhances ability to influence NPCs through dialogue, potentially leading to more favorable outcomes.",Mobility:"Represents agility and ease of movement. Currently enhances narrative flavor, may impact future actions like evasion or traversing difficult terrain."},lA=({skills:l})=>{const[t,n]=q.useState(null),a=q.useRef(null),r=q.useRef({}),u=(m,g)=>{m.stopPropagation(),n(y=>(y==null?void 0:y.id)===g.id?null:g)};return q.useEffect(()=>{const m=g=>{let y=!1;Object.values(r.current).forEach(p=>{p&&p.contains(g.target)&&(y=!0)}),a.current&&!a.current.contains(g.target)&&!y&&n(null)};return t&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[t]),!l||l.length===0?T.jsx("p",{className:"text-slate-400 mt-3 text-sm italic",children:"No skill data available."}):T.jsxs("div",{className:"mt-4",children:[T.jsx("h3",{className:"text-xl font-semibold mb-3 text-teal-300",children:"Skills"}),T.jsx("div",{className:"space-y-3",children:l.map(m=>T.jsxs("div",{className:"bg-slate-600/40 p-2.5 rounded-md shadow-sm group relative",children:[T.jsxs("div",{className:"flex justify-between items-center mb-1",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("span",{className:"text-sm font-medium text-teal-200",children:m.name}),T.jsx("button",{ref:g=>{r.current[m.id]=g},onClick:g=>u(g,m),className:"ml-2 text-teal-400 hover:text-teal-200 focus:outline-none p-0.5 rounded-full hover:bg-slate-700/50","aria-label":`More information about ${m.name}`,title:`Info about ${m.name}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})})]}),T.jsxs("span",{className:"text-xs text-teal-400 font-mono",children:["Lvl ",m.level]})]}),T.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2.5 shadow-inner",children:T.jsx("div",{className:"bg-teal-500 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${m.experienceToNextLevel>0?m.experience/m.experienceToNextLevel*100:m.level>0?100:0}%`},role:"progressbar","aria-valuenow":m.experience,"aria-valuemin":0,"aria-valuemax":m.experienceToNextLevel,"aria-label":`${m.name} experience: ${m.experience} out of ${m.experienceToNextLevel}`})}),T.jsxs("p",{className:"text-xs text-slate-400 text-right mt-0.5",children:[m.experience," / ",m.experienceToNextLevel>0?m.experienceToNextLevel:"MAX"," XP"]}),(t==null?void 0:t.id)===m.id&&T.jsxs("div",{ref:a,className:"absolute left-full top-0 ml-2 w-64 z-20 p-3 rounded-md bg-slate-800 shadow-xl ring-1 ring-slate-600 text-sm",role:"tooltip",children:[T.jsx("h4",{className:"font-semibold text-teal-200 mb-1.5",children:t.name}),T.jsx("p",{className:"text-slate-300 leading-snug",children:oA[t.name]||t.description}),T.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Current Level: ",t.level]})]})]},m.id))})]})},Cr={Legendary:5,Epic:4,Character_Self:3,Rare:3,Uncommon:2,Common:1,Lore:0},tg=l=>{if(!l)return"text-slate-400";switch(l){case"Common":return"text-slate-300";case"Uncommon":return"text-green-300";case"Rare":return"text-sky-300";case"Epic":return"text-purple-300";case"Legendary":return"text-amber-300";case"Lore":return"text-yellow-300";case"Character_Self":return"text-rose-300";default:return"text-slate-400"}},ng=l=>{if(!l)return"border-slate-600";switch(l){case"Common":return"border-slate-500";case"Uncommon":return"border-green-500";case"Rare":return"border-sky-500";case"Epic":return"border-purple-500";case"Legendary":return"border-amber-500";case"Lore":return"border-yellow-500";case"Character_Self":return"border-rose-500";default:return"border-slate-600"}},ig=l=>{switch(l){case"item":return"text-red-400";case"npc":return"text-sky-400";case"location":return"text-yellow-400";case"lore_hint":return"text-yellow-300";case"character":return"text-sky-400";default:return"text-slate-400"}},rA=({memorableEntities:l,potentialDiscoveries:t,majorPlotPoints:n,onSelectKnowledgeEntry:a})=>{const[r,u]=q.useState(null),m=p=>{u(v=>v===p?null:p)},g=Array.from(l.values()).filter(p=>p.type!=="lore_hint").sort((p,v)=>{const E=Cr[p.rarity]??0,x=Cr[v.rarity]??0;return x!==E?x-E:p.name.localeCompare(v.name)}),y=[...t].sort((p,v)=>{if(p.status!==v.status)return p.status==="mentioned"?-1:1;const E=Cr[p.rarityHint||"Lore"]??0,x=Cr[v.rarityHint||"Lore"]??0;return x!==E?x-E:p.name.localeCompare(v.name)});return T.jsxs("div",{className:"w-full text-sm",children:[T.jsx("h3",{id:"knowledge-archives-heading",className:"text-2xl font-semibold mb-4 text-indigo-300",children:"Knowledge Archives"}),T.jsxs("div",{className:"mb-3",children:[T.jsxs("button",{onClick:()=>m("entities"),className:"w-full text-left text-lg font-medium text-indigo-200 hover:text-indigo-100 focus:outline-none py-1.5 px-2 rounded bg-indigo-700/30 hover:bg-indigo-700/50 transition-colors","aria-expanded":r==="entities","aria-controls":"known-entities-content",children:["Known Entities (",g.length,")",T.jsx("span",{className:`float-right transform transition-transform ${r==="entities"?"rotate-180":""}`,children:"▼"})]}),r==="entities"&&T.jsx("div",{id:"known-entities-content",className:"mt-2 space-y-1.5 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 pr-1",children:g.length>0?g.map(p=>T.jsxs("button",{onClick:()=>a(p.id,p.type),className:`w-full text-left p-1.5 rounded-md bg-slate-800/60 hover:bg-slate-700/80 border-l-2 ${ng(p.rarity)} transition-all focus:outline-none focus:ring-1 focus:ring-indigo-400`,title:`Click to view details for ${p.name}`,children:[T.jsxs("div",{className:"flex justify-between items-baseline",children:[T.jsx("span",{className:`font-medium ${ig(p.type)}`,children:p.name}),T.jsxs("span",{className:`text-xs ${tg(p.rarity)}`,children:["(",p.rarity,")"]})]}),T.jsx("p",{className:"text-xs text-slate-400 truncate",title:p.descriptionHint,children:p.descriptionHint})]},p.id)):T.jsx("p",{className:"text-slate-400 italic p-1.5",children:"No specific entities recorded yet."})})]}),T.jsxs("div",{className:"mb-3",children:[T.jsxs("button",{onClick:()=>m("discoveries"),className:"w-full text-left text-lg font-medium text-yellow-200 hover:text-yellow-100 focus:outline-none py-1.5 px-2 rounded bg-yellow-700/30 hover:bg-yellow-700/50 transition-colors","aria-expanded":r==="discoveries","aria-controls":"rumored-leads-content",children:["Leads & Discoveries (",t.length,")",T.jsx("span",{className:`float-right transform transition-transform ${r==="discoveries"?"rotate-180":""}`,children:"▼"})]}),r==="discoveries"&&T.jsx("div",{id:"rumored-leads-content",className:"mt-2 space-y-1.5 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 pr-1",children:y.length>0?y.map(p=>{const v=p.rarityHint&&p.rarityHint!=="Lore"?p.rarityHint:p.rarityHint==="Lore"?"Lore Hint":"Unk. Rarity",E=tg(p.rarityHint||"Lore"),x=ng(p.rarityHint||"Lore");return T.jsxs("button",{onClick:()=>a(p.id,p.type,p.status),className:`w-full text-left p-1.5 rounded-md bg-slate-800/60 hover:bg-slate-700/80 border-l-2 ${x} transition-all focus:outline-none focus:ring-1 focus:ring-yellow-400 ${p.status==="discovered"?"opacity-70 hover:opacity-100":""}`,title:`Source: ${p.sourceTextSnippet}`,children:[T.jsxs("div",{className:"flex justify-between items-baseline",children:[T.jsxs("span",{className:`font-medium ${ig(p.type)}`,children:[p.name,p.status==="discovered"&&T.jsx("span",{className:"text-xs text-green-400 ml-1",children:"(Confirmed)"})]}),T.jsxs("span",{className:`text-xs ${E}`,children:["(",v,") - ",p.status==="discovered"?T.jsx("span",{className:"text-green-400",children:"Discovered"}):T.jsx("span",{className:"text-yellow-400",children:"Mentioned"})]})]}),T.jsx("p",{className:"text-xs text-slate-400 italic truncate",title:p.descriptionHint,children:p.descriptionHint})]},p.id)}):T.jsx("p",{className:"text-slate-400 italic p-1.5",children:"No active rumors or leads yet."})})]}),T.jsxs("div",{children:[T.jsxs("button",{onClick:()=>m("chronicle"),className:"w-full text-left text-lg font-medium text-purple-200 hover:text-purple-100 focus:outline-none py-1.5 px-2 rounded bg-purple-700/30 hover:bg-purple-700/50 transition-colors","aria-expanded":r==="chronicle","aria-controls":"chronicle-content",children:["Chronicle (",n.length,")",T.jsx("span",{className:`float-right transform transition-transform ${r==="chronicle"?"rotate-180":""}`,children:"▼"})]}),r==="chronicle"&&T.jsx("div",{id:"chronicle-content",className:"mt-2 space-y-1.5 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 pr-1",children:n.length>0?[...n].reverse().map(p=>T.jsxs("div",{className:"p-1.5 rounded-md bg-slate-800/60 border-l-2 border-purple-500",children:[T.jsxs("span",{className:"text-xs text-purple-300 block",children:[new Date(p.timestamp).toLocaleDateString()," - ",p.locationName||"Various Locations"]}),T.jsx("p",{className:"text-xs text-slate-300",children:p.summary})]},p.id)):T.jsx("p",{className:"text-slate-400 italic p-1.5",children:"The story is yet to unfold."})})]})]})},sA=({itemProps:l,npcProps:t,craftingProps:n,characterProps:a,onSelectLocationForModal:r,currentCoordinates:u,onSelectKnowledgeEntry:m,onDropItemOnNpcImage:g})=>{var W,ne;const{characterData:y,locationData:p,playerInventory:v,visitedLocations:E,memorableEntities:x,potentialDiscoveries:b,majorPlotPoints:R,isEventActive:L,currentEventImageUrl:N,currentEventDetails:A}=bn();if(!y||!p)return T.jsxs("div",{className:"w-full p-4 md:p-6 space-y-6 bg-slate-850 shadow-2xl rounded-lg ring-1 ring-slate-700 relative text-center",children:[T.jsx(tn,{className:"w-12 h-12 mx-auto text-sky-500"}),T.jsx("p",{className:"text-slate-300",children:"Loading game data..."})]});const P=l.locationItems!==null,k=t.locationNPCs!==null,w=L&&N?N:((W=t.talkingToNPC)==null?void 0:W.iconUrl)||p.imageUrl,D=L&&(A!=null&&A.eventTitle)?A.eventTitle:((ne=t.talkingToNPC)==null?void 0:ne.name)||p.name,X=y.visualStyle;return T.jsxs("div",{className:"w-full p-4 md:p-6 space-y-6 bg-slate-850 shadow-2xl rounded-lg ring-1 ring-slate-700 relative",children:[T.jsxs("h2",{id:"location-main-heading",className:"text-3xl font-bold text-center",children:[L&&(A!=null&&A.eventTitle)?T.jsxs("span",{className:"text-purple-400",children:["EVENT: ",A.eventTitle]}):t.talkingToNPC?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"text-slate-300",children:"Talking to: "}),T.jsx("span",{className:"text-sky-400",children:t.talkingToNPC.name})]}):T.jsx("span",{className:"text-yellow-400",children:p.name}),!L&&!t.talkingToNPC&&p&&T.jsxs("span",{className:"text-xl text-slate-400 ml-2",children:["(",p.rarity,")"]})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8",children:[T.jsxs("div",{className:"space-y-6 lg:col-span-4",children:[T.jsxs("section",{"aria-labelledby":"character-info-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:[T.jsx("h3",{id:"character-info-heading",className:"text-2xl font-semibold mb-3 text-sky-400",children:y.characterName||"Character Status"}),T.jsxs("div",{className:"prose prose-sm prose-invert max-w-none prose-p:text-slate-300 my-3",children:[T.jsx("p",{className:"font-medium text-sky-300",children:"Concept:"}),T.jsx("p",{className:"italic text-sm",children:y.characterConcept})]}),T.jsx(FN,{limbs:y.limbs,characterImageUrl:y.characterImageUrl,onApplyItemToLimb:a.onApplyItemToLimb,isApplyingToLimbId:a.isApplyingToLimbId,onUnequipItemFromLimb:a.onUnequipItemFromLimb,visualStyle:X})]}),T.jsxs("section",{"aria-labelledby":"character-vitals-skills-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:[T.jsx("h3",{id:"character-vitals-skills-heading",className:"text-2xl font-semibold mb-3 text-teal-400 sr-only",children:"Vitals & Skills"}),T.jsx(aA,{overallHealth:a.overallHealth,currentEnergy:a.currentEnergy,maxEnergy:a.maxEnergy}),T.jsx(lA,{skills:y.skills})]}),T.jsx("section",{"aria-labelledby":"knowledge-archives-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:T.jsx(rA,{memorableEntities:x,potentialDiscoveries:b,majorPlotPoints:R,onSelectKnowledgeEntry:m})})]}),T.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[T.jsxs("section",{"aria-labelledby":"location-visual-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow relative",children:[T.jsx("h3",{id:"location-visual-heading",className:"text-2xl font-semibold mb-3 text-amber-300 sr-only",children:"Visuals"}),T.jsx(ZN,{imageUrl:w,imageAltText:D,onSelectLocationForModal:r,locationData:L||t.talkingToNPC?null:p,currentCoordinates:u,isEventActive:L,talkingToNPC:t.talkingToNPC,onDropItemOnNpcImage:g,visualStyle:X}),!L&&p.environmentTags&&p.environmentTags.length>0&&!t.talkingToNPC&&T.jsxs("div",{className:"mt-4 text-center",children:[T.jsx("h4",{className:"text-md font-medium text-slate-400 mb-2",children:"Environment:"}),T.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:p.environmentTags.map((B,ce)=>T.jsx("span",{className:"bg-sky-700 text-sky-200 px-3 py-1 rounded-full text-xs font-medium shadow","aria-label":`Environment tag: ${B}`,children:B},ce))})]}),!L&&u&&!t.talkingToNPC&&T.jsxs("div",{className:"mt-2 text-center",children:[T.jsx("h4",{className:"text-md font-medium text-slate-400",children:"Coordinates:"}),T.jsxs("p",{className:"text-sm text-slate-300 tabular-nums",children:["(",u.x,", ",u.y,")"]})]}),!L&&p.validExits&&!t.talkingToNPC&&T.jsxs("div",{className:"mt-2 text-center",children:[T.jsx("h4",{className:"text-md font-medium text-slate-400",children:"Exits:"}),T.jsx("p",{className:"text-sm text-slate-300",children:p.validExits.length>0?p.validExits.join(", "):"None apparent"})]}),L&&(A==null?void 0:A.narration)&&T.jsxs("div",{className:"mt-2 text-center p-2 bg-slate-700/50 rounded",children:[T.jsx("h4",{className:"text-md font-medium text-purple-300 mb-1",children:"Event Details:"}),T.jsx("p",{className:"text-sm text-slate-300 italic",children:A.narration})]})]}),T.jsxs("section",{"aria-labelledby":"world-map-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:[T.jsx("h3",{id:"world-map-heading",className:"text-2xl font-semibold mb-3 text-lime-400",children:"World Map"}),T.jsx(iA,{visitedLocations:E,currentCoordinates:u,onSelectLocationForModal:r,visualStyle:X})]})]}),T.jsxs("div",{className:"space-y-6 lg:col-span-4",children:[T.jsxs("section",{"aria-labelledby":"location-items-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h3",{id:"location-items-heading",className:"text-2xl font-semibold text-red-400",children:"Items Here"}),T.jsx("button",{onClick:l.onTriggerLookForItems,disabled:L||l.isLoadingItems||P||!!t.talkingToNPC||y.isDefeated,className:"bg-emerald-700 hover:bg-emerald-600 text-white text-xs font-semibold py-1.5 px-3 rounded-md transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":P?"Items already searched/found":"Search for items in this area",children:l.isLoadingItems?T.jsx(tn,{className:"w-4 h-4"}):P?"Searched":"Search Area"})]}),l.isLoadingItems&&!P&&T.jsxs("div",{className:"flex items-center text-slate-400",children:[T.jsx(tn,{className:"w-5 h-5 mr-2 text-emerald-500"}),T.jsx("span",{children:"Searching for items..."})]}),l.itemsError&&!l.isLoadingItems&&T.jsx(ol,{type:"error",message:`Failed to load items: ${l.itemsError}`}),!l.isLoadingItems&&!l.itemsError&&T.jsx(XN,{items:l.locationItems,onPickupItem:l.onPickupItem,isPickingUpItemId:l.isPickingUpItemId,onSelectItemForModal:l.onSelectItemForModal})]}),T.jsxs("section",{"aria-labelledby":"location-npcs-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h3",{id:"location-npcs-heading",className:"text-2xl font-semibold text-sky-400",children:"People Here"}),T.jsx("button",{onClick:t.onTriggerLookForPeople,disabled:L||t.isLoadingNPCs||k||!!t.talkingToNPC||y.isDefeated,className:"bg-cyan-700 hover:bg-cyan-600 text-white text-xs font-semibold py-1.5 px-3 rounded-md transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":k?"People already searched/found":"Look for people in this area",children:t.isLoadingNPCs?T.jsx(tn,{className:"w-4 h-4"}):k?"Searched":"Look for People"})]}),t.isLoadingNPCs&&!k&&T.jsxs("div",{className:"flex items-center text-slate-400",children:[T.jsx(tn,{className:"w-5 h-5 mr-2 text-cyan-500"}),T.jsx("span",{children:"Looking for people..."})]}),t.npcsError&&!t.isLoadingNPCs&&T.jsx(ol,{type:"error",message:`Failed to find NPCs: ${t.npcsError}`}),!t.isLoadingNPCs&&!t.npcsError&&T.jsx(nA,{npcs:t.locationNPCs,onStartConversation:t.onStartConversation,onSelectNPCForModal:t.onSelectNPCForModal,isInteracting:!!t.talkingToNPC,isEventActive:L,currentEventDetails:A,visualStyle:X})]}),T.jsx("section",{"aria-labelledby":"player-inventory-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:T.jsx(jN,{items:v,onUseItem:a.onUseItem,isUsingItemId:a.isUsingItemId,onSelectItemForModal:l.onSelectItemForModal,craftingSlots:n.craftingSlots,isApplyingToLimbId:a.isApplyingToLimbId})}),T.jsx("section",{"aria-labelledby":"crafting-area-heading",className:"bg-slate-700/30 p-4 rounded-lg shadow",children:T.jsx(WN,{craftingSlots:n.craftingSlots,playerInventory:v,onAddItemToSlot:n.onAddItemToCraftingSlot,onRemoveItemFromSlot:n.onRemoveItemFromSlot,onAttemptCraft:n.onAttemptCraft,isCrafting:n.isCrafting})})]})]})]})},uA=({onCustomStart:l,onQuickStart:t,isLoading:n,apiKeyMissing:a})=>{const[r,u]=q.useState("Historical"),[m,g]=q.useState(""),[y,p]=q.useState("Pixel Art"),v="e.g., Being Plato orating in the Parthenon. OR A eunuch in the Chinese imperial court. OR A farmer in Cleopatra's age. OR A knight at King Arthur's table.",E="e.g., A lone cyborg scavenger in a neon-drenched metropolis. OR A young sorcerer discovering a hidden portal in an enchanted forest.",[x,b]=q.useState(v);q.useEffect(()=>{b(r==="Historical"?v:E)},[r]);const R=L=>{if(L.preventDefault(),!m.trim()){alert("Please describe your desired world and character.");return}l(r,m,y)};return T.jsxs("form",{onSubmit:R,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"settingType",className:"block text-sm font-medium text-slate-300 mb-1",children:"Setting Type"}),T.jsxs("select",{id:"settingType",value:r,onChange:L=>u(L.target.value),className:"w-full bg-slate-700 text-slate-200 border border-slate-600 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-sky-500 focus:border-sky-500","aria-label":"Choose game setting type: Historical or Fictional",children:[T.jsx("option",{value:"Historical",children:"Historical"}),T.jsx("option",{value:"Fictional",children:"Fictional"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"visualStyle",className:"block text-sm font-medium text-slate-300 mb-1",children:"Visual Style"}),T.jsxs("select",{id:"visualStyle",value:y,onChange:L=>p(L.target.value),className:"w-full bg-slate-700 text-slate-200 border border-slate-600 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-sky-500 focus:border-sky-500","aria-label":"Choose visual style",children:[T.jsx("option",{value:"Pixel Art",children:"Pixel Art"}),T.jsx("option",{value:"Anime",children:"Anime"}),T.jsx("option",{value:"Ink Painting",children:"Ink Painting"}),T.jsx("option",{value:"Low Poly",children:"Low Poly"}),T.jsx("option",{value:"Oil Painting",children:"Oil Painting"}),T.jsx("option",{value:"Water Painting",children:"Water Painting"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"userWorldAndCharacterIdea",className:"block text-sm font-medium text-slate-300 mb-1",children:"Describe Your Desired World & Character"}),T.jsx("textarea",{id:"userWorldAndCharacterIdea",value:m,onChange:L=>g(L.target.value),placeholder:x,rows:4,className:"w-full bg-slate-700 text-slate-200 placeholder-slate-500 border border-slate-600 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-sky-500 focus:border-sky-500","aria-label":"Enter your desired world and character description",required:!0})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.jsx("button",{type:"submit",disabled:n||a||!m.trim(),className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed text-lg","aria-label":"Generate my custom world",children:"Generate My World"}),T.jsx("button",{type:"button",onClick:t,disabled:n||a||r==="Historical",className:"flex-1 bg-sky-600 hover:bg-sky-500 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-sky-400 disabled:opacity-50 disabled:cursor-not-allowed text-lg","aria-label":r==="Historical"?"Quick Start is disabled for Historical settings":"Start a new game with a random character and location",title:r==="Historical"?"For Historical settings, please describe your world and character.":"Quick Start (Random Fictional)",children:"Quick Start (Random)"})]})]})},cA=({isGlobalBlockingLoad:l,loadingMessage:t,error:n,gameStarted:a,apiKeyMissing:r,characterData:u,locationData:m,gameInterfaceProps:g,handleStartNewGame:y,handleCustomStartGame:p})=>l?T.jsx("div",{className:"p-4 w-full max-w-7xl mx-auto mt-8 md:mt-12",children:T.jsx("main",{children:T.jsxs("div",{className:"flex flex-col items-center justify-center p-10 bg-slate-800/70 rounded-lg shadow-xl",children:[T.jsx(tn,{className:"w-16 h-16 text-sky-500"}),T.jsx("p",{className:"mt-4 text-lg text-slate-300",children:t||"Loading..."})]})})}):n?T.jsx("div",{className:"p-4 w-full max-w-7xl mx-auto mt-8 md:mt-12",children:T.jsx("main",{children:T.jsxs("div",{className:"mb-6",children:[T.jsx(ol,{type:"error",message:n}),!a&&!r&&T.jsx("button",{onClick:y,className:"mt-6 w-full bg-red-600 hover:bg-red-500 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-75 flex items-center justify-center","aria-label":"Retry starting a new game",children:"Try Again"})]})})}):a?u&&m?T.jsx("section",{className:"w-full bg-slate-800 py-4 md:py-6 px-4 sm:px-6 lg:px-8",children:T.jsx(sA,{...g})}):T.jsx("div",{className:"p-4 w-full max-w-7xl mx-auto mt-8 md:mt-12",children:T.jsx("main",{children:T.jsxs("div",{className:"flex flex-col items-center justify-center p-10 bg-slate-800/70 rounded-lg shadow-xl",children:[T.jsx(tn,{className:"w-16 h-16 text-sky-500"}),T.jsx("p",{className:"mt-4 text-lg text-slate-300",children:"Preparing game world..."})]})})}):T.jsx("div",{className:"p-4 w-full max-w-2xl mx-auto mt-8 md:mt-12",children:T.jsx("main",{children:T.jsxs("div",{className:"bg-slate-800/70 shadow-2xl rounded-lg p-6 md:p-8 ring-1 ring-slate-700",children:[T.jsx("h2",{className:"text-3xl font-semibold mb-6 text-sky-300 text-center",children:"Create Your World"}),T.jsx(uA,{onCustomStart:p,onQuickStart:y,isLoading:l,apiKeyMissing:r}),r&&T.jsx(ol,{type:"warning",message:"API Key is missing. Game generation might not work.",className:"mt-6"})]})})}),Pg=()=>T.jsx("div",{className:"w-full bg-slate-900/80 border-t border-slate-700/60",children:T.jsx("div",{className:"p-4 w-full max-w-7xl mx-auto",children:T.jsxs("footer",{className:"text-center text-slate-500 text-sm",children:[T.jsxs("p",{children:["© ",new Date().getFullYear()," LostWorld Project. All rights reserved (not really)."]}),T.jsx("p",{children:"API Key for Gemini is expected to be in `process.env.API_KEY`."})]})})}),dA=({characterData:l,gameLog:t,onTryAgain:n})=>{const a={imageRendering:l.visualStyle==="Pixel Art"?"pixelated":"auto"};return T.jsxs("div",{className:"min-h-screen bg-slate-900 text-red-400 flex flex-col items-center justify-center p-8",children:[T.jsx("h1",{className:"text-6xl font-bold mb-4",children:"GAME OVER"}),T.jsxs("p",{className:"text-2xl mb-8 text-slate-300",children:[l.characterName," - ",l.characterConcept," has fallen."]}),T.jsx("img",{src:l.characterImageUrl||"",alt:"Defeated Character",className:"w-48 h-48 object-contain rounded-lg mb-8 opacity-70 grayscale",style:a}),T.jsxs("div",{className:"mb-6 max-h-60 overflow-y-auto p-4 bg-slate-800 rounded-md w-full max-w-2xl scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50",children:[T.jsx("h2",{className:"text-xl text-slate-200 mb-2 text-center",children:"Final Log Entries:"}),t.slice(-10).map(r=>T.jsxs("div",{className:`text-sm ${r.type==="error"?"text-red-400":r.type==="game_event"?"text-emerald-400":r.type==="combat"?"text-orange-400":r.type==="system"?"text-sky-400":"text-slate-400"} mb-1`,children:[T.jsxs("span",{className:"text-slate-500 mr-2",children:["[",new Date(r.timestamp).toLocaleTimeString(),"]"]}),r.text]},r.id))]}),T.jsx("button",{onClick:n,className:"bg-sky-600 hover:bg-sky-500 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors","aria-label":"Start a new game",children:"Try Again?"}),T.jsx(Pg,{})]})},fA=({isGlobalBlockingLoad:l,loadingMessage:t,error:n,gameStarted:a,apiKeyMissing:r,characterData:u,locationData:m,gameLog:g,gameInterfaceProps:y,onQuickStart:p,onCustomStart:v,onTryAgain:E})=>u!=null&&u.isDefeated?T.jsx(dA,{characterData:u,gameLog:g,onTryAgain:E}):T.jsx(cA,{isGlobalBlockingLoad:l,loadingMessage:t,error:n,gameStarted:a,apiKeyMissing:r,characterData:u,locationData:m,gameInterfaceProps:y,handleStartNewGame:p,handleCustomStartGame:v}),mA=({isLoading:l,loadingMessage:t,currentPhaseTitle:n,apiKeyMissing:a,isGeneratingEvent:r,eventLoadingMessage:u})=>{let m=n;return r&&u?m=u:l&&t&&(m=t),T.jsxs("div",{className:"w-full bg-slate-900/80 border-b border-slate-700/60 shadow-md relative",children:[T.jsxs("div",{className:"p-4 w-full max-w-7xl mx-auto",children:[T.jsxs("header",{className:"text-center",children:[T.jsx("h1",{className:"text-4xl font-bold text-sky-400 tracking-tight",children:"LostWorld"}),T.jsx("p",{className:`text-xl text-slate-400 mt-2 min-h-[1.75rem] ${r?"italic text-purple-300":l?"italic text-sky-300":""}`,children:m})]}),a&&T.jsx("div",{className:"w-full max-w-xl mt-4 mb-2 mx-auto",children:T.jsx(ol,{type:"error",message:"API_KEY is not set. Please configure the API_KEY environment variable for the application to work."})})]}),T.jsx("style",{children:".pixelated-render { image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges; }"})]})},pA=({onSubmit:l,isProcessing:t})=>{const[n,a]=q.useState(""),r=u=>{u.preventDefault(),n.trim()&&!t&&(l(n.trim()),a(""))};return T.jsxs("form",{onSubmit:r,className:"mt-4 flex items-center gap-3",children:[T.jsx("label",{htmlFor:"command-input",className:"sr-only",children:"Enter command"}),T.jsx("input",{id:"command-input",type:"text",value:n,onChange:u=>a(u.target.value),placeholder:"What do you do?",disabled:t,className:"flex-grow bg-slate-700 text-slate-200 placeholder-slate-500 border border-slate-600 rounded-lg py-2.5 px-4 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow duration-150 ease-in-out shadow-sm disabled:opacity-70","aria-label":"Player command input",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),T.jsx("button",{type:"submit",disabled:t||!n.trim(),className:"bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-2.5 px-6 rounded-lg transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-75 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg","aria-label":"Submit command",children:t?T.jsxs(T.Fragment,{children:[T.jsx(tn,{className:"w-5 h-5 mr-2"}),"Sending..."]}):"Send"})]})},hA=l=>{const t=[];let n=0;const a=/\[lore entity_type="([^"]*)" entity_name="([^"]*)"\](.*?)\[\/lore\]/g;let r;for(;(r=a.exec(l))!==null;){r.index>n&&t.push(l.substring(n,r.index));const[u,m,g,y]=r;t.push(T.jsx("span",{className:"text-yellow-400 hover:text-yellow-300 font-medium",title:`Lore: ${g} (${m})`,children:y},`${r.index}-${g}`)),n=a.lastIndex}return n<l.length&&t.push(l.substring(n)),t},gA=({entries:l})=>{const t=q.useRef(null);q.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[l]);const n=r=>{switch(r){case"command":return"text-indigo-300 italic";case"narration":return"text-slate-300";case"error":return"text-red-400";case"system":return"text-sky-400";case"game_event":return"text-emerald-400";case"combat":return"text-orange-400 font-medium";default:return"text-slate-400"}},a=r=>r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return T.jsxs("div",{ref:t,className:"h-64 bg-slate-800/70 p-4 rounded-lg shadow-inner ring-1 ring-slate-700 overflow-y-auto space-y-2 scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 overscroll-contain","aria-live":"polite","aria-atomic":"false",role:"log","aria-label":"Game log and narrative",children:[l.length===0&&T.jsx("p",{className:"text-slate-500 italic text-center py-4",children:"Your adventure begins here..."}),l.map(r=>T.jsxs("div",{className:`text-sm ${n(r.type)}`,children:[T.jsxs("span",{className:"text-slate-500 mr-2 select-none","aria-hidden":"true",children:["[",a(r.timestamp),"]"]}),r.type==="command"&&T.jsx("span",{className:"font-medium mr-1 select-none","aria-hidden":"true",children:">"}),T.jsx("span",{children:r.processedText?hA(r.processedText):r.text})]},r.id))]})},yA=({gameStarted:l,talkingToNPC:t,handleEndConversation:n,processPlayerCommand:a,isProcessing:r,gameLog:u,isConsoleMinimized:m,onToggleMinimize:g})=>{const{isEventActive:y,currentEventDetails:p,currentDirectives:v}=bn();if(!l)return null;let E="Context: World Interaction",x="text-indigo-400";y&&(p!=null&&p.requiresPlayerActionToResolve)?(E=`Context: Event - ${p.eventTitle||"Active Event"}`,x="text-purple-400"):t&&(E=`Context: Talking to ${t.name}`,x="text-sky-400");const b=(v==null?void 0:v.reasoning)||"Game Director's current strategic focus.",R=v?`${v.currentGameFocus}${v.currentGameFocus==="CustomScenario"&&v.gameplayParameterSuggestions.customFocusDescription?` (${v.gameplayParameterSuggestions.customFocusDescription.substring(0,30)}...)`:""}`:"No specific focus";return T.jsx("section",{"aria-labelledby":"interactive-console-heading",className:"w-full mt-auto sticky bottom-0 py-3 md:py-4 pointer-events-none z-30",children:T.jsxs("div",{className:"p-3 md:p-4 w-full max-w-7xl mx-auto bg-slate-800 rounded-lg shadow-2xl ring-1 ring-slate-600/70 pointer-events-auto relative",children:[T.jsx("button",{onClick:g,className:"absolute top-2 right-2 z-40 p-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-slate-100 rounded-md transition-colors","aria-label":m?"Show console":"Hide console","aria-expanded":!m,title:m?"Show console":"Hide console",children:m?T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}):T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}),T.jsx("h2",{id:"interactive-console-heading",className:"text-xl font-semibold mb-1 text-indigo-300 sr-only",children:"Console"}),!m&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mb-2 items-center text-xs",children:[t&&(!y||!(p!=null&&p.requiresPlayerActionToResolve))&&T.jsx("button",{onClick:n,disabled:r,className:"bg-orange-600 hover:bg-orange-500 text-white font-semibold py-1.5 px-3 rounded-md transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-opacity-75 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":`End conversation with ${t.name}`,children:"End Conversation"}),v&&T.jsxs("div",{className:"font-medium px-2 py-1 rounded-md text-purple-300 bg-slate-700/50",title:b,"aria-label":`Game Director Focus: ${R}. Reasoning: ${b}`,children:["Director Focus: ",T.jsx("span",{className:"font-semibold",children:R})]}),T.jsx("div",{className:`font-medium px-2 py-1 rounded-md ${x} bg-slate-700/50 ml-auto`,children:E})]}),T.jsx(pA,{onSubmit:a,isProcessing:r}),T.jsx("div",{className:"mt-3",children:T.jsx(gA,{entries:u})})]}),m&&T.jsxs("div",{className:"text-sm text-center text-slate-400 py-2 h-10 flex items-center justify-center gap-x-3",children:[T.jsx("span",{children:"Console Minimized."}),v&&T.jsxs("span",{className:"text-xs text-purple-300",title:b,"aria-label":`Current Game Director Focus: ${R}. Reasoning: ${b}`,children:["(Focus: ",R,")"]}),T.jsxs("span",{className:`text-xs ${x}`,children:["(Context: ",E.split(": ")[1],")"]})]})]})})},vA=async(l,t,n="")=>{throw new Error("Gemini API key is not configured.")},ki=3,TA=({handleCloseItemModal:l,handleCloseNPCModal:t,handleCloseLocationModal:n,handleCloseImageViewModal:a,setSelectedLocationCoordinateKeyForModal:r,setCraftingSlots:u,setIsCrafting:m,setIsPickingUpItem:g,setIsUsingItem:y,setIsApplyingToLimb:p,setPreviousMovementSourceCoordinates:v,setIsConsoleMinimized:E})=>{const{setGameStarted:x,setCharacterData:b,setLocationData:R,setPlayerInventory:L,setCurrentCoordinates:N,setVisitedLocations:A,setGameLog:P,addLogEntry:k,setIsLoading:w,setLoadingMessage:D,setError:X,setLocationNPCs:W,setTalkingToNPC:ne,setLocationItems:B,attemptToTriggerUnexpectedEvent:ce,addMemorableEntity:ie,addMajorPlotPoint:Z,getMemoryContextString:de,clearMemorySystem:se,visitedLocations:ue,addPotentialDiscovery:O}=bn(),Q=q.useCallback(()=>{X(null),x(!1),b(null),R(null),L([]),u(Array(3).fill(null)),m(!1),g(null),y(null),p(null),P([]),N({x:0,y:0}),A(new Map),v(null),W(null),ne(null),B(null),l(),t(),n(),a(),r(null),E(!1),se&&se()},[X,x,b,R,L,P,N,A,l,t,n,a,u,m,g,y,p,v,E,W,ne,B,se]),Y=q.useCallback(async(j,K,le,fe,ee,J)=>{var rn;let ae=null,ge=[],F=null;const Ne=de();D("Conceptualizing your character...");const ye=await xN(j,J,K,fe,ee,Ne);ae=ye.characterDetails,ge=ye.initialItems,ae.visualStyle=J,fe==="Fictional"&&ee&&(ae.fictionalUniverseContext=ee),ie(ae.characterName,ae.characterName,"character",ae.characterRarity,ae.characterConcept,"Player Character - Game Start"),k("game_event",`Character: ${ae.characterName} - ${ae.characterConcept} (Rarity: ${ae.characterRarity}, Style: ${J})`),ae.fictionalUniverseContext&&k("system",`Playing in the universe of: ${ae.fictionalUniverseContext}`),(rn=ae.skills)!=null&&rn.length&&k("system",`Initial skills: ${ae.skills.filter(Mt=>Mt.level>0).map(Mt=>`${Mt.name} (Lvl ${Mt.level})`).join(", ")||"None notable"}`),D("Creating your world...");const Pe={...ae};F=await PN(le,Pe,de()),ie(F.name,F.name,"location",F.rarity,F.description,"Game Start Location");const be=[];if(ge!=null&&ge.length){for(const Mt of ge){const nn=await Ka(Mt.visualPromptHint,Mt.name),sn={...Mt,id:crypto.randomUUID(),iconUrl:nn||""};be.push(sn),ie(sn.id,sn.name,"item",sn.rarity,sn.description.substring(0,50)+"...","Starting Equipment"),k("game_event",`Starts with: ${sn.name} (${sn.rarity}).`)}L(be)}D("Generating character appearance...");const ft=await CN(Pe,F.visualPromptHint),kt={...ae,characterImageUrl:ft,visualStyle:J};b(kt),R(F),k("system",ft?`Character appearance generated for ${kt.characterName}.`:`Character appearance for ${kt.characterName} could not be generated. Using placeholder.`),k("narration",`${F.description}`),k("game_event",`You find yourself in: ${F.name} (Rarity: ${F.rarity}).`);const mt={x:0,y:0};N(mt),B(null),W(null),v(null);const pt=`${mt.x},${mt.y}`;A(Mt=>{const nn=new Map(Mt);return nn.set(pt,{location:F,items:null,npcs:null}),nn}),D("Discovering initial leads...");const At=await eN(kt,F,fe,ee,J,de());if(At.length>0){k("system","Initial rumors and leads surface...");for(const Mt of At)await O(Mt,`game_start-${kt.characterName}`,pt)}Z(`Game started for character '${kt.characterName}' (${kt.characterRarity}) in '${F.name}'. Setting: ${fe}, Style: ${J}. Initial leads: ${At.length}.`,[kt.characterName,F.name],F.name),x(!0),await ce(`game_start_in_${F.name.replace(/\s+/g,"_")}_${F.rarity}`)},[D,de,ie,k,L,b,R,N,B,W,v,A,Z,x,ce,O]),he=q.useCallback(async()=>{w(!0),Q(),k("system","Starting new adventure...");let j=!1;for(let K=1;K<=ki;K++)try{await Y("A mysterious adventurer concept",null,"A mysterious place","Fictional",null,"Pixel Art"),j=!0;break}catch(le){console.error(`World creation attempt ${K} failed:`,le),X(`World creation failed (attempt ${K}/${ki}): ${le.message||"Unknown error"}. Retrying...`),K===ki&&X(`Failed to create world after ${ki} attempts: ${le.message||"Unknown error"}. Please try again.`),await new Promise(fe=>setTimeout(fe,500*K))}w(!1),D("")},[k,Q,w,D,X,Y]),I=q.useCallback(async(j,K,le)=>{if(!K.trim()){X("Please describe your desired world and character idea."),k("error","World/Character idea cannot be empty for custom start.");return}w(!0),Q(),k("system",`Starting custom adventure: ${j} setting, ${le} style...`);let fe=!1;for(let ee=1;ee<=ki;ee++)try{D(`Refining your ideas (attempt ${ee})...`);const J=await vA(j,K,de()),ae=j==="Historical"?K:J.fictionalUniverseContext;await Y(J.refinedCharConcept,J.refinedCharName,J.refinedStartLocationConcept,j,ae,le),fe=!0;break}catch(J){console.error(`Custom world creation attempt ${ee} failed:`,J),X(`World creation failed (attempt ${ee}/${ki}): ${J.message||"Unknown error"}. Retrying...`),ee===ki&&X(`Failed to create custom world after ${ki} attempts: ${J.message||"Unknown error"}. Please try again.`),await new Promise(ae=>setTimeout(ae,500*ee))}w(!1),D("")},[k,Q,w,D,X,de,Y]);return{handleStartNewGame:he,handleCustomStartGame:I}},CA=({isPickingUpItem:l,setIsPickingUpItem:t,isUsingItem:n,setIsUsingItem:a,isApplyingToLimb:r,setIsApplyingToLimb:u})=>{const{characterData:m,setCharacterData:g,locationData:y,locationItems:p,setLocationItems:v,playerInventory:E,setPlayerInventory:x,currentCoordinates:b,visitedLocations:R,setVisitedLocations:L,addLogEntry:N,_consumeEnergy:A,_gainSkillExperience:P,attemptToTriggerUnexpectedEvent:k,addMajorPlotPoint:w,getMemoryContextString:D}=bn(),X=q.useCallback(async ie=>{if(!m||!p||!y){N("error","No items visible or area not searched to pick up from.");return}const Z=p.find(se=>se.id===ie);if(!Z){N("error","Could not find the item to pick up.");return}if(A(0),m.isDefeated&&Z.itemTypeGuess.toLowerCase()!=="revival_item_type"){N("system","You are too weak to pick that up.");return}t(ie);const de=D();try{const se=await sN(Z,m,de),ue=p.filter(Y=>Y.id!==ie);v(ue),x(Y=>[...Y,se.pickedUpItem]),N("narration",se.narration);const O=`${b.x},${b.y}`,Q=R.get(O);Q&&L(Y=>new Map(Y).set(O,{...Q,items:ue})),(Z.rarity==="Epic"||Z.rarity==="Legendary")&&w(`Player acquired ${Z.rarity} item: '${Z.name}'.`,[Z.id],y==null?void 0:y.name),await k(`item_pickup_${Z.rarity.toLowerCase()}_${Z.name.replace(/\s+/g,"_")}_from_${y.name.replace(/\s+/g,"_")}`)}catch(se){console.error("Failed to pick up item:",se),N("error",`Pickup failed: ${se.message||"An error occurred while picking up the item."}`)}finally{t(null)}},[m,p,y,A,N,b,R,x,L,v,t,k,D,w]),W=q.useCallback((ie,Z,de,se)=>{var Q;if(!m||!y)return;let ue=!1,O=[...E];Z.itemEffect.consumed?(O=O.filter(Y=>Y.id!==ie.id),ue=!0):(Z.itemEffect.newNameIfChanged||Z.itemEffect.newDescriptionIfChanged||Z.itemEffect.newVisualPromptHintIfChanged)&&(O=O.map(Y=>Y.id===ie.id?(ue=!0,{...Y,name:Z.itemEffect.newNameIfChanged||Y.name,description:Z.itemEffect.newDescriptionIfChanged||Y.description,visualPromptHint:Z.itemEffect.newVisualPromptHintIfChanged||Y.visualPromptHint}):Y)),g(Y=>{if(!Y)return null;let he={...Y},I=!1;if(Z.characterEffect.overallHealthChange&&(he.overallHealth=Math.max(0,Math.min(100,he.overallHealth+Z.characterEffect.overallHealthChange)),N("game_event",`Overall health changed by ${Z.characterEffect.overallHealthChange}. Now: ${he.overallHealth}HP.`)),Z.characterEffect.energyChange&&(he.currentEnergy=Math.max(0,Math.min(he.maxEnergy,he.currentEnergy+Z.characterEffect.energyChange)),N("game_event",`Energy changed by ${Z.characterEffect.energyChange}. Now: ${he.currentEnergy}EN.`)),Z.characterEffect.limbStatusChanges&&(he.limbs=he.limbs.map(j=>{const K=Z.characterEffect.limbStatusChanges.find(le=>le.limbName===j.name);return K?(I=!0,{...j,status:K.newStatus,health:K.newHealth}):j})),Z.itemEffect.isEquippedToLimb&&se&&(he.limbs=he.limbs.map(j=>{if(j.name===se){const K=E.find(le=>le.id===ie.id);if(K)return ue=!0,O=O.filter(le=>le.id!==K.id),{...j,equippedItems:[...j.equippedItems||[],K]}}return j}),N("game_event",`${ie.name} equipped to ${se}.`)),I){const j=he.limbs.reduce((K,le)=>K+le.health,0);he.overallHealth=Math.round(j/he.limbs.length)}return he.overallHealth<=0&&!he.isDefeated&&(he.isDefeated=!0,N("game_event","The effects are devastating. You have been defeated.")),he}),ue&&x(O),Z.characterEffect.xpGain&&P(Z.characterEffect.xpGain.skillName,Z.characterEffect.xpGain.amount),(ie.rarity==="Epic"||ie.rarity==="Legendary")&&(Z.itemEffect.isEquippedToLimb||Z.characterEffect.overallHealthChange||(Q=Z.characterEffect.limbStatusChanges)!=null&&Q.length)&&w(`Player used ${ie.rarity} item '${ie.name}', causing significant effect.`,[ie.id],y==null?void 0:y.name)},[N,g,x,E,P,m,y,w]),ne=q.useCallback(async(ie,Z)=>{if(!m||!y){N("error","Character data not available.");return}const de=E.find(ue=>ue.id===ie);if(!de){N("error","Item not found in inventory.");return}if(A(1),m.isDefeated&&de.itemTypeGuess.toLowerCase()!=="revival_item_type"){N("system","You are too weak to use that item.");return}a(ie),N("system",`Attempting to use ${de.name}...`);const se=(Z==null?void 0:Z._augmentedMemoryContext)||D();try{const ue={...m},O=await Yh(de,ue,Z!=null&&Z.is_limb_target?Z.on_target:void 0,se);N("narration",O.narration),W(de,O,`item_used_${de.name.replace(/\s+/g,"_")}`),await k(`used_item_${de.rarity.toLowerCase()}_${de.name.replace(/\s+/g,"_")}_in_${y.name.replace(/\s+/g,"_")}`)}catch(ue){console.error("Item usage error:",ue),N("error",`Item usage failed: ${ue.message||"An unexpected error occurred."}`)}finally{a(null)}},[m,E,y,N,a,W,A,D,k]),B=q.useCallback(async(ie,Z,de)=>{if(!m||!y){N("error","Character data not available to apply item to limb.");return}const se=E.find(Q=>Q.id===ie);if(!se){N("error",`Item with ID ${ie} not found in inventory.`);return}const ue=m.limbs.find(Q=>Q.id===Z);if(!ue){N("error",`Limb with ID ${Z} not found.`);return}if(A(1),m.isDefeated&&se.itemTypeGuess.toLowerCase()!=="revival_item_type"){N("system","You are too weak to apply that item.");return}u(`${ie}-${Z}`),N("system",`Attempting to use ${se.name} on your ${ue.name}...`);const O=(de==null?void 0:de._augmentedMemoryContext)||D();try{const Q={...m},Y=await Yh(se,Q,ue.name,O);N("narration",Y.narration),W(se,Y,`item_applied_to_limb_${ue.name.replace(/\s+/g,"_")}`,ue.name),await k(`applied_item_${se.rarity.toLowerCase()}_to_limb_${ue.name.replace(/\s+/g,"_")}_in_${y.name.replace(/\s+/g,"_")}`)}catch(Q){console.error(`Error applying item ${se.name} to ${ue.name}:`,Q),N("error",`Failed to apply ${se.name} to ${ue.name}: ${Q.message||"An unexpected error occurred."}`)}finally{u(null)}},[m,E,y,N,u,W,A,D,k]),ce=q.useCallback((ie,Z)=>{if(!m||!y){N("error","Character data not available to unequip item.");return}if(A(0),m.isDefeated){N("system","You are too weak to change equipment.");return}let de=null;g(se=>{if(!se)return null;const ue=se.limbs.map(O=>{var Q;if(O.id===ie){const Y=(Q=O.equippedItems)==null?void 0:Q.findIndex(he=>he.id===Z);if(Y!==void 0&&Y>-1){de=O.equippedItems[Y];const he=O.equippedItems.filter((I,j)=>j!==Y);return N("system",`Unequipped ${de.name} from your ${O.name}.`),{...O,equippedItems:he}}else N("error",`Item to unequip not found on ${O.name}.`)}return O});return{...se,limbs:ue}}),de&&(x(se=>[...se,de]),(de.rarity==="Epic"||de.rarity==="Legendary")&&w(`Player unequipped ${de.rarity} item '${de.name}'.`,[de.id],y.name),k(`unequipped_item_${de.rarity.toLowerCase()}_from_limb_in_${y.name.replace(/\s+/g,"_")}`))},[m,y,x,g,N,A,k,w]);return{handlePickupItem:X,handleUseItem:ne,handleApplyItemToLimb:B,handleUnequipItemFromLimb:ce}},xA=({contextIsLoading:l,contextLoadingMessage:t,hookIsLoadingItems:n,hookIsLoadingNPCs:a,isGeneratingEvent:r,eventLoadingMessage:u,isCharacterDefeated:m})=>{const{isConsoleBusy:g}=bn(),y=q.useMemo(()=>l||n||a||r,[l,n,a,r]),p=q.useMemo(()=>l&&t?t:n?"Searching for items...":a?"Looking for people...":r&&u?u:null,[l,t,n,a,r,u]),v=q.useMemo(()=>l||g||r||m,[l,g,r,m]);return{appHeaderIsLoading:y,appHeaderLoadingMessage:p,consoleIsProcessing:v}},EA=()=>{const[l,t]=q.useState(null),[n,a]=q.useState(null),[r,u]=q.useState(null),[m,g]=q.useState(null),[y,p]=q.useState(null),[v,E]=q.useState(null),x=q.useCallback(w=>{t(w)},[]),b=q.useCallback(()=>{t(null)},[]),R=q.useCallback(w=>{a(w)},[]),L=q.useCallback(()=>{a(null)},[]),N=q.useCallback((w,D)=>{u(w),g(D||null)},[]),A=q.useCallback(()=>{u(null),g(null)},[]),P=q.useCallback((w,D)=>{p(w),E(D)},[]),k=q.useCallback(()=>{p(null),E(null)},[]);return{itemToViewInModal:l,setItemToViewInModal:t,npcToViewInModal:n,setNpcToViewInModal:a,locationToViewInModal:r,setLocationToViewInModal:u,selectedLocationCoordinateKeyForModal:m,setSelectedLocationCoordinateKeyForModal:g,imageUrlToView:y,setImageUrlToView:p,imageAltTextToView:v,setImageAltTextToView:E,handleSelectItemForModal:x,handleCloseItemModal:b,handleSelectNPCForModal:R,handleCloseNPCModal:L,handleSelectLocationForModal:N,handleCloseLocationModal:A,handleSelectImageForViewing:P,handleCloseImageViewModal:k}},_A=[],xr=3,SA=({})=>{const{characterData:l,playerInventory:t,setPlayerInventory:n,addLogEntry:a,_consumeEnergy:r,_gainSkillExperience:u,attemptToTriggerUnexpectedEvent:m,addMemorableEntity:g,getMemoryContextString:y,locationData:p,potentialDiscoveries:v,markPotentialDiscoveryFound:E}=bn(),[x,b]=q.useState(Array(xr).fill(null)),[R,L]=q.useState(!1),N=q.useCallback((w,D)=>{if(x.some(W=>(W==null?void 0:W.id)===w.id)){a("system",`${w.name} is already in a slot.`);return}const X=[...x];X[D]=w,b(X),a("system",`Added ${w.name} to crafting slot ${D+1}.`)},[x,a]),A=q.useCallback(w=>{const D=x[w],X=[...x];X[w]=null,b(X),D&&a("system",`Removed ${D.name} from slot ${w+1}.`)},[x,a]),P=w=>{switch(w){case"Common":return 5;case"Uncommon":return 10;case"Rare":return 20;case"Epic":return 50;case"Legendary":return 100;default:return 0}},k=q.useCallback(async()=>{if(!l)return;if(l.isDefeated){a("system","Too weak to craft.");return}const w=x.filter(ie=>ie!==null);if(w.length===0){a("system","Place items in slots.");return}r(3,"Crafting");const D=l;if(D.isDefeated)return;L(!0),a("system",`Attempting craft with: ${w.map(ie=>ie.name).join(", ")}...`);const X=y(),W=(p==null?void 0:p.visualPromptHint)||null;let ne=null,B=[];const ce=v.filter(ie=>ie.type==="item"&&ie.status==="mentioned");for(const ie of _A){const Z=[...w],de=[];let se=!0;for(const ue of ie.inputs){let O=ue.quantity;for(let Q=0;Q<O;Q++){const Y=Z.findIndex(he=>he.name===ue.itemName);if(Y!==-1){const he=x.findIndex(I=>(I==null?void 0:I.id)===Z[Y].id);he!==-1&&!de.includes(he)&&de.push(he),Z.splice(Y,1)}else{se=!1;break}}if(!se)break}if(se&&Z.length===0&&w.length===ie.inputs.reduce((ue,O)=>ue+O.quantity,0)){ne=ie,B=de.sort((ue,O)=>ue-O);break}}try{if(ne){const ie=B.map(ue=>x[ue].name),Z=await dN(ne.output,ie,D,W,X),de=B.map(ue=>{var O;return(O=x[ue])==null?void 0:O.id}).filter(ue=>!!ue);n(ue=>ue.filter(O=>!de.includes(O.id))),n(ue=>[...ue,Z.craftedItem]),g(Z.craftedItem.id,Z.craftedItem.name,"item",Z.craftedItem.rarity,Z.craftedItem.description.substring(0,50)+"...",`Crafted in ${(p==null?void 0:p.name)||"current area"}`),a("narration",Z.narration),a("game_event",`Crafted ${Z.craftedItem.name} (Rarity: ${Z.craftedItem.rarity}).`),u("Crafting",P(Z.craftedItem.rarity)*.5),b(Array(xr).fill(null));const se=await Oi(Z.craftedItem,"item",ce,D,X);se&&E(se,Z.craftedItem.id),await m(`crafted_recipe_item_${Z.craftedItem.rarity.toLowerCase()}_in_${(p==null?void 0:p.name.toLowerCase().replace(/\s+/g,"_"))||"unknown_loc"}`)}else if(w.length>=2){const ie=[...w],Z=ie.map(se=>se.id);n(se=>se.filter(ue=>!Z.includes(ue.id))),b(Array(xr).fill(null));const de=await fN(ie,D,W,ce,X);if(n(se=>[...se,de.newItem]),g(de.newItem.id,de.newItem.name,"item",de.newItem.rarity,de.newItem.description.substring(0,50)+"...",`Dynamically crafted in ${(p==null?void 0:p.name)||"current area"}`),a("narration",de.narration),a("game_event",`Experimentally crafted ${de.newItem.name} (Rarity: ${de.newItem.rarity}).`),u("Crafting",P(de.newItem.rarity)),de.fulfilledLeadId)E(de.fulfilledLeadId,de.newItem.id);else{const se=await Oi(de.newItem,"item",ce,D,X);se&&E(se,de.newItem.id)}await m(`crafted_dynamic_item_${de.newItem.rarity.toLowerCase()}_in_${(p==null?void 0:p.name.toLowerCase().replace(/\s+/g,"_"))||"unknown_loc"}`)}else a("system","Items don't combine, not enough for experiment.")}catch(ie){console.error("Crafting error:",ie);const Z=ie.message||(ne?"Error during predefined crafting.":"Combination yielded smoke. Items lost.");if(a("error",`Crafting failed: ${Z}`),!ne&&w.length>=2){const de=w.map(se=>se.id);n(se=>se.filter(ue=>!de.includes(ue.id))),b(Array(xr).fill(null))}}finally{L(!1)}},[x,l,t,n,a,r,u,m,g,y,p==null?void 0:p.name,p==null?void 0:p.visualPromptHint,v,E]);return{craftingSlots:x,setCraftingSlots:b,isCrafting:R,setIsCrafting:L,handleAddItemToCraftingSlot:N,handleRemoveItemFromCraftingSlot:A,handleAttemptCraft:k}},bA=({})=>{const{locationData:l,characterData:t,currentCoordinates:n,visitedLocations:a,setVisitedLocations:r,addLogEntry:u,locationNPCs:m,setLocationNPCs:g,talkingToNPC:y,setTalkingToNPC:p,_consumeEnergy:v,_gainSkillExperience:E,attemptToTriggerUnexpectedEvent:x,addMemorableEntity:b,getMemoryContextString:R,potentialDiscoveries:L,markPotentialDiscoveryFound:N}=bn(),[A,P]=q.useState(!1),[k,w]=q.useState(null),D=q.useCallback(ne=>{if(!m)return;const B=m.find(ce=>ce.id===ne);B&&(p(B),u("system",`You begin talking to ${B.name}.`))},[m,u,p]),X=q.useCallback(()=>{y&&(u("system",`You end conversation with ${y.name}.`),x(`end_talk_with_${y.name.replace(/\s+/g,"_")}_${y.rarity}`),p(null))},[y,u,p,x]),W=q.useCallback(async()=>{var se;if(!t){u("error","Character data not available.");return}if(t.isDefeated){u("system","You are too weak to search.");return}v(2,"Perception");const ne=t;if(ne.isDefeated)return;const B={...n},ce=l,ie=ce==null?void 0:ce.name;if(!ce||k){k&&n.x===B.x&&n.y===B.y&&u("error",`Cannot look for people in ${ie||"current area"}: ${k}`);return}const Z=`${B.x},${B.y}`,de=a.get(Z);if(!de){u("error",`Cannot look in ${ie||"current area"}: location data missing.`);return}if(de.npcs===null){w(null),P(!0);const ue=R();try{const O=L.filter(Y=>Y.type==="npc"&&Y.status==="mentioned");let Q=await hN(ce,ne,O,ue);Q=Q.map(Y=>({...Y,currentHealth:Y.currentHealth??100,maxHealth:Y.maxHealth??100,isDefeated:Y.isDefeated??!1,disposition:Y.disposition??"Neutral"}));for(const Y of Q){const he=await Oi(Y,"npc",O,ne,ue);he&&N(he,Y.id),b(Y.id,Y.name,"npc",Y.rarity,Y.description.substring(0,50)+"...",`Encountered in ${ce.name}`)}r(Y=>{const he=new Map(Y),I=he.get(Z);return I&&he.set(Z,{...I,npcs:Q}),he}),n.x===B.x&&n.y===B.y?(g(Q),Q.length>0?(u("game_event",`You notice: ${Q.map(Y=>`${Y.name} (${Y.rarity})`).join(", ")} in ${ie||"this area"}.`),de.npcs===null&&(E("Perception",3),await x(`npcs_found_first_time_count_${Q.length}_in_${ce.name.replace(/\s+/g,"_")}`))):(u("game_event",`After looking around in ${ie||"this area"}, you don't see anyone else here.`),de.npcs===null&&await x(`npcs_searched_area_empty_in_${ce.name.replace(/\s+/g,"_")}`))):u("system",`NPC search for ${ie||"a previous area"} completed, results cached.`)}catch(O){console.error(`Failed to generate NPCs for ${ie}:`,O);const Q=O.message||"Error looking for people.";r(Y=>{const he=new Map(Y),I=he.get(Z);return I&&he.set(Z,{...I,npcs:[]}),he}),n.x===B.x&&n.y===B.y?(w(Q),u("error",`Search failed: ${Q}`),g([])):u("system",`NPC search for ${ie||"a previous area"} failed. Error logged.`)}finally{P(!1)}}else(se=de.npcs)!=null&&se.length?u("narration",`You recall seeing: ${de.npcs.map(ue=>`${ue.name} (${ue.rarity})`).join(", ")} here.`):u("narration","You reconfirm no one else is around here."),m===null&&de.npcs!==null&&n.x===B.x&&n.y===B.y&&g(de.npcs),await x(`npcs_reconfirm_search_in_${ce.name.replace(/\s+/g,"_")}`)},[l,t,k,n,a,u,r,g,m,v,E,x,b,R,L,N]);return{locationNPCs:m,isLoadingNPCs:A,npcsError:k,talkingToNPC:y,handleStartConversation:D,handleEndConversation:X,handleTriggerLookForPeople:W,setLocationNPCs:g,setIsLoadingNPCs:P,setNpcsError:w,setTalkingToNPC:p}},NA=({})=>{const{locationData:l,characterData:t,currentCoordinates:n,visitedLocations:a,setVisitedLocations:r,addLogEntry:u,locationItems:m,setLocationItems:g,_consumeEnergy:y,_gainSkillExperience:p,attemptToTriggerUnexpectedEvent:v,addMemorableEntity:E,getMemoryContextString:x,potentialDiscoveries:b,markPotentialDiscoveryFound:R}=bn(),[L,N]=q.useState(!1),[A,P]=q.useState(null),k=q.useCallback(async()=>{var ce;if(!t){u("error","Character data not available.");return}if(t.isDefeated){u("system","Your wounds are too severe to search.");return}y(2,"Perception");const w=t;if(w.isDefeated)return;const D={...n},X=l,W=X==null?void 0:X.name;if(!X||A){A&&n.x===D.x&&n.y===D.y&&u("error",`Cannot search in ${W||"current area"}: ${A}`);return}const ne=`${D.x},${D.y}`,B=a.get(ne);if(!B){u("error",`Cannot look in ${W||"current area"}: location data missing.`);return}if(B.items===null){P(null),N(!0);const ie=x();try{const Z=b.filter(se=>se.type==="item"&&se.status==="mentioned");let de=await rN(X,w,Z,ie);for(const se of de){const ue=await Oi(se,"item",Z,w,ie);ue&&R(ue,se.id),E(se.id,se.name,"item",se.rarity,se.description.substring(0,50)+"...",`Found in ${X.name}`)}r(se=>{const ue=new Map(se),O=ue.get(ne);return O&&ue.set(ne,{...O,items:de}),ue}),n.x===D.x&&n.y===D.y?(g(de),de.length>0?(u("game_event",`You find: ${de.map(se=>`${se.name} (${se.rarity})`).join(", ")} in ${W||"this area"}.`),B.items===null&&(p("Perception",5),await v(`items_found_first_time_count_${de.length}_in_${X.name.replace(/\s+/g,"_")}`))):(u("game_event",`After a thorough search of ${W||"this area"}, you find nothing of particular interest.`),B.items===null&&await v(`items_searched_area_empty_in_${X.name.replace(/\s+/g,"_")}`))):u("system",`Item search for ${W||"a previous area"} completed, results cached.`)}catch(Z){console.error(`Failed to generate items for ${W}:`,Z);const de=Z.message||"Error searching for items.";r(se=>{const ue=new Map(se),O=ue.get(ne);return O&&ue.set(ne,{...O,items:[]}),ue}),n.x===D.x&&n.y===D.y?(P(de),u("error",`Item search failed: ${de}`),g([])):u("system",`Item search for ${W||"a previous area"} failed. Error logged.`)}finally{N(!1)}}else(ce=B.items)!=null&&ce.length?u("narration",`You recall seeing: ${B.items.map(ie=>`${ie.name} (${ie.rarity})`).join(", ")} here.`):u("narration","You reconfirm no distinct items here."),m===null&&B.items!==null&&n.x===D.x&&n.y===D.y&&g(B.items),await v(`items_reconfirm_search_in_${X.name.replace(/\s+/g,"_")}`)},[l,t,A,n,a,u,r,g,m,y,p,v,E,x,b,R]);return{locationItems:m,isLoadingItems:L,itemsError:A,handleTriggerLookForItems:k,setLocationItems:g,setIsLoadingItems:N,setItemsError:P}},dt={DIALOGUE_INPUT:"dialogue_input",END_CONVERSATION:"end_conversation",TALK:"talk",GIVE_ITEM:"give_item",REQUEST_ITEM_FROM_NPC:"request_item_from_npc",ATTACK_NPC:"attack_npc",PICKUP:"pickup",TAKE:"take",GET:"get",USE:"use",EXAMINE:"examine",LOOK:"look",INSPECT:"inspect",DISCOVER_ITEMS:"discover_items",SEARCH_AREA_FOR_ITEMS:"search_area_for_items",DISCOVER_NPCS:"discover_npcs",LOOK_FOR_PEOPLE:"look_for_people",GO:"go",MOVE:"move",WALK:"walk",RUN:"run",LEAVE_AREA:"leave_area",INVENTORY:"inventory",CHECK_INVENTORY:"check_inventory",STATUS:"status",HEALTH:"health",CHECK_SELF:"check_self",CRAFT:"craft",UNKNOWN:"unknown",EVENT_DIALOGUE_INPUT:"event_dialogue_input"};S.OBJECT,S.STRING,S.ARRAY,S.STRING,S.OBJECT,S.STRING,S.STRING,S.BOOLEAN,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.BOOLEAN,S.STRING,S.STRING;const AA=async(l,t,n,a,r,u,m,g,y="",p)=>{throw new Error("Gemini API key is not configured.")},wA=l=>{const{onPickupItemRequested:t,onUseItemRequested:n,onSelectItemForModal:a,onSelectNPCForModal:r,onStartConversation:u,onEndConversation:m,onTriggerLookForItems:g,onTriggerLookForPeople:y,previousMovementSourceCoordinates:p,setPreviousMovementSourceCoordinates:v}=l,{gameStarted:E,characterData:x,locationData:b,playerInventory:R,gameLog:L,addLogEntry:N,setIsLoading:A,setLoadingMessage:P,setIsConsoleBusy:k,currentCoordinates:w,setCurrentCoordinates:D,visitedLocations:X,setVisitedLocations:W,locationNPCs:ne,setLocationNPCs:B,talkingToNPC:ce,setTalkingToNPC:ie,locationItems:Z,setLocationItems:de,setPlayerInventory:se,setLocationData:ue,_consumeEnergy:O,_gainSkillExperience:Q,attemptToTriggerUnexpectedEvent:Y,handlePlayerInitiatedSignificantAction:he,applyEventEffects:I,addMemorableEntity:j,addMajorPlotPoint:K,getMemoryContextString:le,potentialDiscoveries:fe,addPotentialDiscovery:ee,markPotentialDiscoveryFound:J,isEventActive:ae,setIsEventActive:ge,currentEventDetails:F,setCurrentEventDetails:Ne,setCurrentEventImageUrl:ye,majorPlotPoints:Pe,incrementPlayerCommandCount:be,triggerGameDirectorAnalysis:ft}=bn(),kt=q.useCallback((Ae,Re,$e)=>{const me=$e.toLowerCase();let ke=0,Be=0,_e=$e;if(["north","n","forwards","forward"].includes(me))Be=1,_e="north";else if(["south","s","backwards","backward"].includes(me))Be=-1,_e="south";else if(["east","e","right"].includes(me))ke=1,_e="east";else if(["west","w","left"].includes(me))ke=-1,_e="west";else if(["up","u"].includes(me))_e="up";else if(["down","d"].includes(me))_e="down";else return{x:Ae,y:Re,normalizedDirection:"an_unknown_direction"};return{x:Ae+ke,y:Re+Be,normalizedDirection:_e}},[]),mt=q.useCallback(()=>{var Ae;return ne?ae&&F?(new Set(((Ae=F.npcEffects)==null?void 0:Ae.map(Re=>Re.npcIdTargeted))||[]),ne.filter(Re=>{var me;if(Re.isDefeated)return!1;if(Re.isEventSpawned)return!0;const $e=(me=F.npcEffects)==null?void 0:me.find(ke=>ke.npcIdTargeted===Re.id);return $e?$e.isHiddenDuringEvent===!1||$e.isHiddenDuringEvent===void 0:!1})):ne.filter(Re=>!Re.isDefeated):[]},[ne,ae,F]),pt=async(Ae,Re)=>{const $e=mt(),me=Re||ce&&$e.find(ke=>ke.id===ce.id);if(me&&Ae.dialogue_text&&x&&!x.isDefeated){const ke=le(),Be=`${w.x},${w.y}`;try{const _e=await gN(me,Ae.dialogue_text,x,Be,ke,F);N("narration",`${me.name} says: ${_e.rawText}`,`${me.name} says: ${_e.processedText}`);for(const ht of _e.potentialDiscoveries)await ee(ht,me.id,Be);if((Ae.dialogue_text.toLowerCase().includes("secret")||Ae.dialogue_text.toLowerCase().includes("plan to assassinate"))&&K(`Player revealed to ${me.name}: "${Ae.dialogue_text.substring(0,70)}..."`,[x.characterName,me.id],b==null?void 0:b.name),me.rarity==="Epic"||me.rarity==="Legendary"){const ht=`dialogue_interaction_with_${me.rarity.toLowerCase()}_npc_${me.name.replace(/\s+/g,"_")}`;await Y(ht)}else await Y(`dialogue_response_from_${me.name.toLowerCase().replace(/\s+/g,"_")}_rarity_${me.rarity}`)}catch(_e){N("error",`Error with ${me==null?void 0:me.name}: ${(_e==null?void 0:_e.message)||"Unknown dialogue error"}`)}}else x!=null&&x.isDefeated?N("system","Too weak to speak."):me?Ae.dialogue_text?N("error","Dialogue error (NPC, text, or char data missing)."):N("error","What do you want to say?"):N("error","No one is currently being spoken to for this dialogue, or they are obscured by the event.")},At=async(Ae,Re)=>{if(x!=null&&x.isDefeated){N("system","You are too weak to initiate conversations.");return}if(!Ae){N("error","Who do you want to talk to?");return}const me=mt().find(ke=>ke.name.toLowerCase()===Ae.toLowerCase());if(!me){N("error",`Cannot find ${Ae} here or they are not currently interactable.`);return}if((ce==null?void 0:ce.id)===me.id){N("system",`You are already talking to ${me.name}.`),Re&&Re.trim()!==""&&await pt({dialogue_text:Re},me);return}ce&&(N("system",`You first end your conversation with ${ce.name}.`),m()),u(me.id),Re&&Re.trim()!==""&&await pt({dialogue_text:Re},me)},rn=()=>{ce?m():N("system","You are not currently talking to anyone.")},Mt=async Ae=>{if(ae){N("system","You are too focused on the event to pick up items now.");return}if(!Ae){N("error","What do you want to pick up?");return}if(!Z){N("error","You haven't searched for items here, or there are none.");return}const Re=Z.find($e=>$e.name.toLowerCase()===Ae.toLowerCase());if(!Re){N("error",`Cannot find "${Ae}" here.`);return}await t(Re.id)},nn=async(Ae,Re)=>{if(!Ae){N("error","What do you want to use?");return}if(!x){N("error","Character data not available.");return}k(!0);let $e=null,me=le();try{if(R.length>0&&(P(`Thinking about using "${Ae}"...`),$e=await cN(Ae,R,x,me),P("")),!$e){N("error",`You don't seem to have anything like a "${Ae}" to use.`),k(!1);return}ce&&(me+=`
CURRENTLY IN DIALOGUE WITH: ${ce.name} (ID: ${ce.id}, Rarity: ${ce.rarity}, Disposition: ${ce.disposition||"Neutral"}). Their current inventory: ${ce.inventory.map(Be=>Be.name).join(", ")||"none"}.`),ae&&F&&(me+=`
ACTIVE EVENT: "${F.eventTitle}". Event State: "${F.narration.substring(0,100)}...". This item usage might be relevant to resolving or interacting with the event.`);const ke={...Re||{},_augmentedMemoryContext:me};await n($e.id,ke)}catch(ke){N("error",`Error identifying or using item: ${ke.message}`)}finally{k(!1),P("")}},sn=async(Ae,Re)=>{if(!Ae&&!(Re!=null&&Re.examine_detail_target)){N("error","What do you want to examine?");return}const $e=(Re==null?void 0:Re.examine_detail_target)||Ae,me=$e.toLowerCase(),ke=mt();if(["area","location","surroundings","room","here","around"].includes(me)){if(ae&&F){N("narration",F.narration||"You survey the chaotic scene of the event."),N("system",`Contextual examination of event: ${F.eventTitle}`);return}N("system","You scan your surroundings..."),await g(),await y(),b&&N("narration",b.description);return}const Be=R.find(Xe=>Xe.name.toLowerCase()===me);if(Be){a(Be);return}const _e=Z==null?void 0:Z.find(Xe=>Xe.name.toLowerCase()===me);if(_e){a(_e);return}const ht=ke.find(Xe=>Xe.name.toLowerCase()===me);if(ht){r(ht);return}if(x&&b){k(!0),P(`Examining ${$e}...`);try{const Xe=le(),Ie=`${w.x},${w.y}`,Ut=await VN($e,x,b,F,Ie,Xe);N("narration",Ut.narration);for(const st of Ut.potentialDiscoveries)await ee(st,`examine_${$e.replace(/\s+/g,"_")}`,Ie);Q("Perception",1),await Y(`examined_detail_${$e.replace(/\s+/g,"_")}_in_${b.name.replace(/\s+/g,"_")}`)}catch(Xe){N("error",`Cannot examine "${$e}": ${Xe.message||"Nothing noteworthy observed."}`)}finally{k(!1),P("")}}else N("error",`You don't see a "${$e}" to examine closely here, or they are currently obscured.`)},Hi=async()=>{if(ae){N("system","Your attention is fixed on the current event; you cannot search for others now.");return}await y()},ca=async()=>{if(ae){N("system","The unfolding event prevents you from searching for items.");return}await g()},qi=async(Ae,Re,$e,me)=>{if(!x||x.isDefeated){N("system","You are too weak to interact.");return}if(O(1,"Persuasion"),!x.isDefeated){k(!0);try{const ke=Ae||R.find(we=>we.name.toLowerCase()===($e||"").toLowerCase());if(!ke){N("error",`You don't have a "${$e||"specified item"}".`);return}const Be=mt(),_e=Re||Be.find(we=>we.name.toLowerCase()===(me||"").toLowerCase());if(!_e){N("error",`Cannot find ${me||"specified NPC"} here or they are not currently interactable.`);return}const ht=L.filter(we=>we.type==="command"&&we.text.toLowerCase().startsWith("you say:")||we.type==="narration"&&we.text.toLowerCase().startsWith(`${_e.name.toLowerCase()} says:`)).slice(-3).map(we=>we.text),Xe=le(),Ie=await yN(x,_e,ke,ht,Xe,F),Ut=`${w.x},${w.y}`,st=await zh(Ie.npcReactionText,"dialogue",_e.id,x,Ut,Xe);for(const we of st.potentialDiscoveries)await ee(we,_e.id,Ut);if(N("narration",Ie.narration),N("narration",`${_e.name} says: ${Ie.npcReactionText}`,`${_e.name} says: ${st.processedText}`),Ie.accepted){let we={...ke};if(!we.iconUrl||we.iconUrl.startsWith("https://via.placeholder.com")){N("system",`Generating icon for ${we.name} as it's given...`);try{const Te=await Ka(we.visualPromptHint,we.name,x.visualStyle,null);we.iconUrl=Te}catch(Te){console.error(`Failed to generate icon for given item ${we.name}:`,Te),N("error",`Could not create icon for ${we.name}.`)}}se(Te=>Te.filter(at=>at.id!==we.id)),B(Te=>Te?Te.map(at=>at.id===_e.id?{...at,inventory:[...at.inventory,we]}:at):null);const zt=`${w.x},${w.y}`;W(Te=>{var an;const at=new Map(Te),Qe=at.get(zt);if(Qe){const hn=((an=Qe.npcs)==null?void 0:an.map(ot=>ot.id===_e.id?{...ot,inventory:[...ot.inventory,we]}:ot))||null;at.set(zt,{...Qe,npcs:hn})}return at}),N("game_event",`${_e.name} accepted the ${we.name}.`),Q("Persuasion",10),K(`Player gave '${we.name}' (${we.rarity}) to ${_e.name}. NPC accepted.`,[x.characterName,_e.id,we.id],b==null?void 0:b.name),await Y(`gave_item_${we.rarity.toLowerCase()}_to_${_e.name.toLowerCase().replace(/\s+/g,"_")}_accepted`)}else N("system",`${_e.name} did not accept the ${ke.name}.`),K(`Player offered '${ke.name}' to ${_e.name}. NPC refused.`,[x.characterName,_e.id,ke.id],b==null?void 0:b.name),await Y(`gave_item_${ke.rarity.toLowerCase()}_to_${_e.name.toLowerCase().replace(/\s+/g,"_")}_refused`)}catch(ke){N("error",`Error giving item: ${ke.message||"Unknown error"}`)}finally{k(!1)}}},$n=async(Ae,Re)=>{if(!x||x.isDefeated){N("system","You are too weak to make requests.");return}if(O(1,"Persuasion"),!x.isDefeated){k(!0);try{if(!Ae||!Re){N("error","Specify item and NPC (e.g., 'ask Bob for key').");return}const me=mt().find(Ie=>Ie.name.toLowerCase()===Re.toLowerCase());if(!me){N("error",`Cannot find ${Re} here or they are not currently interactable.`);return}const ke=L.filter(Ie=>Ie.type==="command"&&Ie.text.toLowerCase().startsWith("you say:")||Ie.type==="narration"&&Ie.text.toLowerCase().startsWith(`${me.name.toLowerCase()} says:`)).slice(-3).map(Ie=>Ie.text),Be=le(),_e=await vN(x,me,Ae,ke,Be,F),ht=`${w.x},${w.y}`,Xe=await zh(_e.npcReactionText,"dialogue",me.id,x,ht,Be);for(const Ie of Xe.potentialDiscoveries)await ee(Ie,me.id,ht);if(N("narration",_e.narration),N("narration",`${me.name} says: ${_e.npcReactionText}`,`${me.name} says: ${Xe.processedText}`),_e.willingToGive&&_e.itemGiven){let Ie={..._e.itemGiven};if(!Ie.iconUrl||Ie.iconUrl.startsWith("https://via.placeholder.com")){N("system",`Generating icon for ${Ie.name}...`);try{const st=await Ka(Ie.visualPromptHint,Ie.name,x.visualStyle,null);Ie.iconUrl=st}catch(st){console.error(`Failed to generate icon for acquired item ${Ie.name}:`,st),N("error",`Could not create icon for ${Ie.name}.`)}}se(st=>[...st,Ie]),B(st=>st?st.map(we=>we.id===me.id?{...we,inventory:we.inventory.filter(zt=>zt.id!==Ie.id)}:we):null);const Ut=`${w.x},${w.y}`;W(st=>{var Te;const we=new Map(st),zt=we.get(Ut);if(zt){const at=((Te=zt.npcs)==null?void 0:Te.map(Qe=>Qe.id===me.id?{...Qe,inventory:Qe.inventory.filter(an=>an.id!==Ie.id)}:Qe))||null;we.set(Ut,{...zt,npcs:at})}return we}),N("game_event",`${me.name} gave you ${Ie.name}.`),Q("Persuasion",10),K(`${me.name} gave '${Ie.name}' (${Ie.rarity}) to player.`,[x.characterName,me.id,Ie.id],b==null?void 0:b.name),await Y(`npc_${me.name.toLowerCase().replace(/\s+/g,"_")}_gave_item_${Ie.rarity.toLowerCase()}`)}else N("system",`${me.name} did not give you the ${Ae}.`),K(`${me.name} did not give '${Ae}' to player.`,[x.characterName,me.id],b==null?void 0:b.name),await Y(`npc_${me.name.toLowerCase().replace(/\s+/g,"_")}_refused_item_${Ae.toLowerCase().replace(/\s+/g,"_")}`)}catch($e){N("error",`Error requesting item: ${$e.message||"Unknown error"}`)}finally{k(!1)}}},Bt=async(Ae,Re,$e)=>{if(ae){N("system","You must deal with the current event before moving!");return}if(!x||!b){N("error","Game state not ready for movement.");return}if(x.isDefeated&&!b.name.toLowerCase().includes("afterlife")&&!b.name.toLowerCase().includes("limbo")){N("system","You are too weak to move.");return}if(O(2,"Survival"),x.isDefeated&&!b.name.toLowerCase().includes("afterlife")&&!b.name.toLowerCase().includes("limbo"))return;let me=Ae.toLowerCase();const ke=b.validExits.map(Te=>Te.toLowerCase());if(Re===dt.LEAVE_AREA||me==="random_exit")if(ke.length>0)me=ke[Math.floor(Math.random()*ke.length)];else{N("error","There are no apparent exits from this location to 'leave' through.");return}const Be=me.match(/^(-?\d+),(-?\d+)$/);let _e,ht,Xe;if(Be)_e=parseInt(Be[1],10),ht=parseInt(Be[2],10),Xe=`to coordinates ${me}`;else{const Te=kt(w.x,w.y,me);_e=Te.x,ht=Te.y,Xe=Te.normalizedDirection}if(Xe==="an_unknown_direction"){N("error",`Cannot interpret direction: "${me}". Try N, S, E, W or use the map.`);return}if(!Be&&!ke.includes(Xe)){N("error",`Cannot move ${Xe} from ${b.name}. Valid exits: ${ke.join(", ")||"none"}.`);return}if(_e===w.x&&ht===w.y&&!Be){N("error",`Cannot move ${Xe} from here, it seems you'd stay in place.`);return}A(!0),P(`Moving ${Xe}...`);const Ie=`${_e},${ht}`,Ut={...w},st=!X.has(Ie);let we=!1;const zt=le();try{let Te,at;if(X.has(Ie)){const Qe=X.get(Ie);Te=Qe.location,at=`You head ${Xe} and arrive at ${Te.name}.`,N("narration",at),N("narration",Te.description),de(Qe.items),B(Qe.npcs),we=!0}else{const Qe=fe.filter(lt=>lt.type==="location"&&lt.status==="mentioned"),an={previousLocation:b,direction:Xe,characterConcept:x.characterConcept,characterName:x.characterName,skills:x.skills,gameSettingType:x.gameSettingType,initialHistoricalContext:x.initialHistoricalContext,fictionalUniverseContext:x.fictionalUniverseContext,recentStorySummary:L.slice(-5).map(lt=>lt.text).join(" "),potentialDiscoveries:Qe,intendedLocationTypeHint:$e||null,visualStyle:x.visualStyle},hn=await ON(an,zt),ot=hn.newLocationDetails,gt=await UN(ot.visualPromptHint,ot.name,x.visualStyle);Te={...ot,imageUrl:gt},at=hn.movementNarration,N("narration",at),N("narration",Te.description),N("game_event",`Discovered: ${Te.name} (Rarity: ${Te.rarity}).`),W(lt=>new Map(lt).set(Ie,{location:Te,items:null,npcs:null})),de(null),B(null);const nt=await Oi(Te,"location",Qe,x,zt);nt&&J(nt,Ie),j(Ie,Te.name,"location",Te.rarity,Te.description.substring(0,70)+"...",`Discovered by moving ${Xe} from ${b.name}`),we=!0}if(we){ue(Te),D({x:_e,y:ht}),v(Ut),Q("Survival",1);const Qe=st?`moved_to_new_location_${Te.rarity.toLowerCase()}_${Te.environmentTags.join("_")||"unknown_env"}`:`revisited_location_${Te.name.toLowerCase().replace(/\s+/g,"_")}`;await Y(Qe)}}catch(Te){console.error("Error during movement: ",Te),N("error",`Movement failed: ${Te.message||"An unknown error occurred while trying to move."}`)}finally{A(!1),P("")}},pn=async(Ae,Re)=>{if(!x||x.isDefeated){N("system","You are too weak to attack.");return}if(!Ae&&!Re){N("error","Who do you want to attack?");return}const $e=mt();let me;if(Re&&(me=$e.find(Be=>Be.id===Re)),!me&&Ae&&(me=$e.find(Be=>Be.name.toLowerCase()===Ae.toLowerCase())),!me){N("error",`Cannot find "${Ae||"target"}" here to attack or they are not currently interactable.`);return}if(me.isDefeated){N("system",`${me.name} is already defeated.`);return}const ke={actionType:"attack_npc",targetNpcId:me.id};await he(ke)};return{processPlayerCommand:q.useCallback(async Ae=>{var Re,$e,me,ke,Be,_e,ht,Xe,Ie;if(!x||!b||!E){N("error","Game not ready for commands.");return}N("command",`You say: "${Ae}"`,Ae),be(),k(!0);try{const Ut=L.slice(-5).map(Qe=>Qe.text),st=le(),we=mt(),zt=ae&&(F!=null&&F.requiresPlayerActionToResolve)?F:null,Te=await AA(Ae,x,b,Z,R,Ut,we,ce,st,zt);if(!Te.isPlausible){N("error",Te.reasonIfNotPlausible||"That action doesn't seem possible right now."),k(!1);return}Te.narrationForPlausibleAction&&N("narration",Te.narrationForPlausibleAction);const at=Te.targets[0];switch(Te.action){case dt.EVENT_DIALOGUE_INPUT:if(F&&F.requiresPlayerActionToResolve){const Qe=((Re=Te.parameters)==null?void 0:Re.dialogue_text)||Ae,an=`${w.x},${w.y}`,hn=await Zh(F,Qe,x,b.name,Pe,fe,st,an);N("narration",hn.rawText,hn.processedText);for(const gt of hn.potentialDiscoveries)await ee(gt,F.eventTitle,an);const ot=await Fh(F,Ae,Te,x,we,st,R);if(N("narration",ot.resolutionNarration),ot.majorPlotPointSummary&&K(ot.majorPlotPointSummary,[x.characterName,F.eventTitle],b.name),ot.resolved){if(N("game_event",`Event "${F.eventTitle}" has been resolved!`),ot.updatedNpcDisposition&&x){const gt=ne==null?void 0:ne.find(nt=>nt.id===ot.updatedNpcDisposition.npcId);if(gt){const nt={...gt,disposition:ot.updatedNpcDisposition.newDisposition};B(lt=>lt?lt.map(gn=>gn.id===nt.id?nt:gn):null),N("system",`${gt.name}'s disposition is now ${nt.disposition}.`)}}if(($e=ot.itemsAwardedToPlayer)!=null&&$e.length&&x)for(const gt of ot.itemsAwardedToPlayer){const nt=await Ka(gt.visualPromptHint||gt.name,gt.name,x.visualStyle,null),lt={...gt,visualPromptHint:gt.visualPromptHint||gt.name,id:crypto.randomUUID(),iconUrl:nt};se(gn=>[...gn,lt]),N("game_event",`You received: ${lt.name} (${lt.rarity}).`)}ge(!1),Ne(null),ye(null),ft(!0)}else if(ot.progressed){N("game_event",`Event "${F.eventTitle}" has progressed!`);const gt={...F,narration:ot.nextStageNarration||F.narration,visualPromptHintForEventImage:ot.updatedVisualPromptHintForEventImage||F.visualPromptHintForEventImage,resolutionCriteriaPrompt:ot.updatedResolutionCriteriaPrompt||F.resolutionCriteriaPrompt};if(Ne(gt),ot.nextStageNarration&&N("narration",ot.nextStageNarration),ot.updatedVisualPromptHintForEventImage&&(b!=null&&b.visualPromptHint)&&(x!=null&&x.visualStyle)){const nt=await vc(ot.updatedVisualPromptHintForEventImage,b.visualPromptHint,gt.eventTitle,x.visualStyle);ye(nt)}}else N("system","Your action didn't seem to change the course of the event.")}else N("error","Tried to send event dialogue, but no resolvable event is active.");break;case dt.DIALOGUE_INPUT:await pt(Te.parameters);break;case dt.TALK:await At(at,(me=Te.parameters)==null?void 0:me.dialogue_text);break;case dt.END_CONVERSATION:rn();break;case dt.PICKUP:case dt.TAKE:case dt.GET:await Mt(at);break;case dt.USE:await nn(at,Te.parameters||void 0);break;case dt.EXAMINE:case dt.LOOK:case dt.INSPECT:await sn(at,Te.parameters||void 0);break;case dt.DISCOVER_ITEMS:case dt.SEARCH_AREA_FOR_ITEMS:await ca();break;case dt.DISCOVER_NPCS:case dt.LOOK_FOR_PEOPLE:await Hi();break;case dt.GO:case dt.MOVE:case dt.WALK:case dt.RUN:case dt.LEAVE_AREA:await Bt(at,Te.action,(ke=Te.parameters)==null?void 0:ke.intendedLocationTypeHint);break;case dt.GIVE_ITEM:await qi(void 0,void 0,(Be=Te.parameters)==null?void 0:Be.item_to_give_name,(_e=Te.parameters)==null?void 0:_e.target_npc_name_for_interaction);break;case dt.REQUEST_ITEM_FROM_NPC:await $n((ht=Te.parameters)==null?void 0:ht.item_to_request_name,(Xe=Te.parameters)==null?void 0:Xe.target_npc_name_for_request);break;case dt.ATTACK_NPC:await pn(at,(Ie=Te.parameters)==null?void 0:Ie.direct_object_npc_id);break;case dt.INVENTORY:case dt.CHECK_INVENTORY:N("system",R.length>0?`You have: ${R.map(Qe=>`${Qe.name} (${Qe.rarity})`).join(", ")}.`:"Your inventory is empty.");break;case dt.STATUS:case dt.HEALTH:case dt.CHECK_SELF:N("system",`Overall Health: ${x.overallHealth}HP. Energy: ${x.currentEnergy}/${x.maxEnergy}EN. Limbs: ${x.limbs.map(Qe=>`${Qe.name} (${Qe.status}, ${Qe.health}HP)`).join("; ")}.`);break;default:N("error",`Unknown action: ${Te.action}`);break}}catch(Ut){N("error",`Command processing error: ${Ut.message}`),console.error("Command processing error:",Ut)}finally{k(!1),ft()}},[x,b,E,N,L,Z,R,ce,k,le,mt,pt,At,rn,Mt,nn,sn,ca,Hi,Bt,qi,$n,pn,ae,F,Pe,fe,w,Zh,Fh,ge,Ne,ye,K,ee,he,I,B,se,Q,ne,be,ft,t,n,a,r,u,m,g,y,p,v,ue,A,P,W]),handleGiveItemToNpc:qi}},ag=["SurvivalHorror","DetectiveMystery","HighStakesCombat","SocialIntrigue","ExplorationAdventure","ResourceManagement","PuzzleSolving","SportsMatchFocus","PoliticalIntrigue","StealthOperations","HumorousAdventure","PhilosophicalDebate","RomanticPursuit","TragedyUnfolding","PersonalGrowthJourney","FactionConflict","BaseBuildingDefense","NoSpecificFocus","CustomScenario"],RA=["EventGeneration","NPCInteraction","CombatResolution","LocationDescription","ItemGeneration","PlayerVitals","GameLogNarration","WorldProgression"];S.OBJECT,S.STRING,S.ARRAY,S.OBJECT,S.STRING,S.STRING,S.STRING,S.OBJECT,S.BOOLEAN,S.STRING,S.STRING,S.STRING,[...ag],S.STRING,S.NUMBER,S.NUMBER,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING,S.STRING;const MA=async(l,t,n,a,r,u,m)=>(console.warn("GameDirectorService: API_KEY not configured."),null),og=21,IA=6*60*1e3,DA=()=>{const{characterData:l,locationData:t,playerInventory:n,gameLog:a,getMemoryContextString:r,currentEventDetails:u,setCurrentDirectives:m,currentDirectives:g,playerCommandCount:y,addLogEntry:p,gameStarted:v}=bn(),[E,x]=q.useState(0),[b,R]=q.useState(0),[L,N]=q.useState(!1),[A,P]=q.useState(!1),k=q.useCallback(async(w=!1)=>{if(L||!l||!t)return;const D=Date.now(),X=y-b,W=D-E>IA,ne=X>=og;if(!(!w&&(!W||!ne)&&A)){N(!0),p("system","The winds of fate shift... (Game Director is contemplating...)");try{const B=r(),ce=await MA(l,t,n,a,B,u,g);if(ce){const ie={...ce,directiveId:crypto.randomUUID(),timestamp:D,analyzedCommandCount:y,lastGameLogEntryIdAnalyzed:a.length>0?a[a.length-1].id:"none"};m(ie),x(D),R(y);let Z=`Game Director's Focus: ${ie.currentGameFocus}`;ie.currentGameFocus==="CustomScenario"&&ie.gameplayParameterSuggestions.customFocusDescription&&(Z+=` (${ie.gameplayParameterSuggestions.customFocusDescription.substring(0,50)}...)`),ie.reasoning&&(Z+=` Reasoning: ${ie.reasoning.substring(0,100)}...`),p("system",Z)}else p("system","Game Director's contemplation yielded no new directives at this moment.")}catch(B){console.error("GameDirector: Error during analysis:",B),p("error","Game Director encountered an issue during contemplation.")}finally{N(!1),A||P(!0)}}},[L,l,t,n,a,u,r,g,y,E,b,p,m,A]);return q.useEffect(()=>{v&&!A&&l&&t&&!L&&k(!0)},[v,A,l,t,k,L]),q.useEffect(()=>{v&&A&&y>0&&y%og===0&&y!==b&&k()},[y,v,A,b,k]),{currentDirectives:g,triggerGameDirectorAnalysis:k,lastAnalysisCommandCount:b}},LA=()=>{const l=bn(),{gameStarted:t,characterData:n,locationData:a,playerInventory:r,currentCoordinates:u,gameLog:m,isLoading:g,loadingMessage:y,error:p,locationNPCs:v,talkingToNPC:E,locationItems:x,isGeneratingEvent:b,eventLoadingMessage:R,memorableEntities:L,potentialDiscoveries:N,visitedLocations:A,addLogEntry:P,addPotentialDiscovery:k,setPlayerInventory:w,setLocationItems:D,setLocationNPCs:X,setVisitedLocations:W,setLocationData:ne,currentDirectives:B,setCurrentDirectives:ce,playerCommandCount:ie}=l;DA();const{itemToViewInModal:Z,setItemToViewInModal:de,npcToViewInModal:se,setNpcToViewInModal:ue,locationToViewInModal:O,setLocationToViewInModal:Q,selectedLocationCoordinateKeyForModal:Y,setSelectedLocationCoordinateKeyForModal:he,imageUrlToView:I,imageAltTextToView:j,handleSelectItemForModal:K,handleCloseItemModal:le,handleSelectNPCForModal:fe,handleCloseNPCModal:ee,handleSelectLocationForModal:J,handleCloseLocationModal:ae,handleSelectImageForViewing:ge,handleCloseImageViewModal:F}=EA(),[Ne,ye]=q.useState(!1),[Pe,be]=q.useState(!1),[ft,kt]=q.useState(null),[mt,pt]=q.useState(null),[At,rn]=q.useState(null),[Mt,nn]=q.useState(null);q.useEffect(()=>{ye(!0),console.warn("API_KEY environment variable is not set. The application will not function correctly.")},[]);const sn=q.useCallback(()=>{be(We=>!We)},[]),{craftingSlots:Hi,setCraftingSlots:ca,isCrafting:qi,setIsCrafting:$n,handleAddItemToCraftingSlot:Bt,handleRemoveItemFromCraftingSlot:pn,handleAttemptCraft:jt}=SA({}),Ae=TA({handleCloseItemModal:le,handleCloseNPCModal:ee,handleCloseLocationModal:ae,handleCloseImageViewModal:F,setSelectedLocationCoordinateKeyForModal:he,setCraftingSlots:ca,setIsCrafting:$n,setIsPickingUpItem:kt,setIsUsingItem:pt,setIsApplyingToLimb:rn,setPreviousMovementSourceCoordinates:nn,setIsConsoleMinimized:be}),{handlePickupItem:Re,handleUseItem:$e,handleApplyItemToLimb:me,handleUnequipItemFromLimb:ke}=CA({isPickingUpItem:ft,setIsPickingUpItem:kt,isUsingItem:mt,setIsUsingItem:pt,isApplyingToLimb:At,setIsApplyingToLimb:rn}),Be=q.useCallback((We,Ft,Et,It)=>{de(Ve=>Ve&&Ve.id===We?{...Ve,description:Et}:Ve),w(Ve=>Ve.map(_t=>_t.id===We?{..._t,description:Et}:_t)),D(Ve=>Ve?Ve.map(_t=>_t.id===We?{..._t,description:Et}:_t):null);const yt=`${u.x},${u.y}`;W(Ve=>{const _t=new Map(Ve),rt=_t.get(yt);if(rt&&rt.items){const yn=rt.items.map(Jn=>Jn.id===We?{...Jn,description:Et}:Jn);_t.set(yt,{...rt,items:yn})}return _t}),P("system",`Learned more about ${(Z==null?void 0:Z.name)||"item"}.`);const Ke=`${u.x},${u.y}`;It.forEach(Ve=>k(Ve,We,Ke))},[de,w,D,P,k,u,Z==null?void 0:Z.name,W]),_e=q.useCallback((We,Ft,Et,It)=>{ue(Ve=>Ve&&Ve.id===We?{...Ve,description:Et}:Ve),X(Ve=>Ve?Ve.map(_t=>_t.id===We?{..._t,description:Et}:_t):null);const yt=`${u.x},${u.y}`;W(Ve=>{const _t=new Map(Ve),rt=_t.get(yt);if(rt&&rt.npcs){const yn=rt.npcs.map(Jn=>Jn.id===We?{...Jn,description:Et}:Jn);_t.set(yt,{...rt,npcs:yn})}return _t}),P("system",`Learned more about ${(se==null?void 0:se.name)||"NPC"}.`);const Ke=`${u.x},${u.y}`;It.forEach(Ve=>k(Ve,We,Ke))},[ue,X,W,P,k,u,se==null?void 0:se.name]),ht=q.useCallback((We,Ft,Et,It)=>{Q(yt=>yt&&Y===We?{...yt,description:Et}:yt),W(yt=>{const Ke=new Map(yt),Ve=Ke.get(We);return Ve&&Ke.set(We,{...Ve,location:{...Ve.location,description:Et}}),Ke}),a&&`${u.x},${u.y}`===We&&ne(yt=>yt?{...yt,description:Et}:null),P("system",`Learned more about ${(O==null?void 0:O.name)||"location"}.`),It.forEach(yt=>k(yt,We,We))},[Q,Y,W,ne,a,u,P,k,O==null?void 0:O.name]),{isLoadingNPCs:Xe,npcsError:Ie,handleStartConversation:Ut,handleEndConversation:st,handleTriggerLookForPeople:we}=bA({}),{isLoadingItems:zt,itemsError:Te,handleTriggerLookForItems:at}=NA({}),{processPlayerCommand:Qe,handleGiveItemToNpc:an}=wA({onPickupItemRequested:Re,onUseItemRequested:(We,Ft)=>$e(We,Ft),onSelectItemForModal:K,onSelectNPCForModal:fe,onStartConversation:Ut,onEndConversation:st,onTriggerLookForItems:at,onTriggerLookForPeople:we,previousMovementSourceCoordinates:Mt,setPreviousMovementSourceCoordinates:nn}),{appHeaderIsLoading:hn,appHeaderLoadingMessage:ot,consoleIsProcessing:gt}=xA({contextIsLoading:g,contextLoadingMessage:y,hookIsLoadingItems:zt,hookIsLoadingNPCs:Xe,isGeneratingEvent:b,eventLoadingMessage:R,isCharacterDefeated:(n==null?void 0:n.isDefeated)??!1}),nt=We=>{if(!We||We.length===0)return 100;const Ft=We.reduce((Et,It)=>Et+It.health,0);return Math.round(Ft/We.length)},lt=q.useCallback((We,Ft,Et)=>{let It=We,yt=Ft;if(Ft==="lore_hint"&&Et!=="discovered"){P("system","This is a piece of general lore or a hint. No specific details modal available yet.");return}const Ke=N.find(rt=>rt.id===We);if(Ke&&Et==="discovered"&&Ke.fulfilledById)It=Ke.fulfilledById,yt=Ke.type;else if(Et==="mentioned"){P("system",`Details for ${(Ke==null?void 0:Ke.name)||"this lead"} are still unknown or unconfirmed.`);return}else if(Et==="discovered"&&(!Ke||!Ke.fulfilledById)){P("system",`Details for this discovered ${Ft} are confirmed but not directly linkable to a modal via this entry yet.`);return}let Ve=null,_t=null;switch(yt){case"item":Ve=r.find(rt=>rt.id===It)||(x==null?void 0:x.find(rt=>rt.id===It))||null,Ve&&K(Ve);break;case"npc":Ve=(v==null?void 0:v.find(rt=>rt.id===It))||null,Ve&&fe(Ve);break;case"location":if(It.includes(",")){const rt=A.get(It);rt&&(Ve=rt.location,_t=It)}else for(const[rt,yn]of A.entries())if(yn.location.name===It){Ve=yn.location,_t=rt;break}Ve&&J(Ve,_t);break;default:Ft!=="lore_hint"&&P("error",`Cannot open details for unknown knowledge type: ${yt}`);return}Ve||P("system",`Details for this ${yt} are not currently available or the link is missing.`)},[r,x,v,A,N,K,fe,J,P]),gn="Phase 12: ReadMe & New Visual Styles",no={locationItems:x,isLoadingItems:zt,itemsError:Te,onSelectItemForModal:K,onTriggerLookForItems:at,onPickupItem:Re,isPickingUpItemId:ft},Vr={locationNPCs:v,isLoadingNPCs:Xe,npcsError:Ie,talkingToNPC:E,onStartConversation:Ut,onSelectNPCForModal:fe,onTriggerLookForPeople:we,onEndConversation:st},$r={craftingSlots:Hi,onAddItemToCraftingSlot:Bt,onRemoveItemFromSlot:pn,onAttemptCraft:jt,isCrafting:qi},rl={onUseItem:$e,isUsingItemId:mt,onApplyItemToLimb:me,isApplyingToLimbId:At,onUnequipItemFromLimb:ke,overallHealth:n?nt(n.limbs):100,currentEnergy:(n==null?void 0:n.currentEnergy)??100,maxEnergy:(n==null?void 0:n.maxEnergy)??100},Bi={itemProps:no,npcProps:Vr,craftingProps:$r,characterProps:rl,onSelectLocationForModal:J,currentCoordinates:u,onSelectKnowledgeEntry:lt,onDropItemOnNpcImage:an};return T.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 flex flex-col selection:bg-sky-500 selection:text-white",children:[T.jsx(mA,{isLoading:hn,loadingMessage:ot,currentPhaseTitle:gn,apiKeyMissing:Ne,isGeneratingEvent:b,eventLoadingMessage:R}),T.jsx("div",{className:"flex-grow overflow-y-auto",children:T.jsx(fA,{isGlobalBlockingLoad:g,loadingMessage:y,error:p,gameStarted:t,apiKeyMissing:Ne,characterData:n,locationData:a,gameLog:m,gameInterfaceProps:Bi,onQuickStart:Ae.handleStartNewGame,onCustomStart:Ae.handleCustomStartGame,onTryAgain:Ae.handleStartNewGame})}),T.jsx(BN,{itemToViewInModal:Z,onCloseItemModal:le,onItemDescriptionElaborated:Be,npcToViewInModal:se,onCloseNpcModal:ee,onNpcDescriptionElaborated:_e,locationToViewInModal:O,onCloseLocationModal:ae,onLocationDescriptionElaborated:ht,selectedLocationCoordinateKeyForModal:Y,characterData:n,imageUrlToView:I,imageAltTextToView:j,onCloseImageViewModal:F,onSelectImageForViewing:ge}),T.jsx(yA,{gameStarted:t,talkingToNPC:E,handleEndConversation:st,processPlayerCommand:Qe,isProcessing:gt,gameLog:m,isConsoleMinimized:Pe,onToggleMinimize:sn}),T.jsx(Pg,{})]})},kA=()=>T.jsx(_N,{children:T.jsx(LA,{})}),Og=document.getElementById("root");if(!Og)throw new Error("Could not find root element to mount to");const UA=t0.createRoot(Og);UA.render(T.jsx(tl.StrictMode,{children:T.jsx(kA,{})}));
